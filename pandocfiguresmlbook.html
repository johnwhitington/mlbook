<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html,pic-fbox,pic-equations,pic-tabular --> 
<meta name="src" content="pandocfiguresmlbook.tex"> 
<link rel="stylesheet" type="text/css" href="pandocfiguresmlbook.css"> 
</head><body 
>
                                                                               
                                                                               
<!--l. 230--><p class="indent" >
                                                                               
                                                                               
<!--l. 235--><p class="indent" >   <span 
class="pplrc8t-x-x-144">OC<span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">L</span> <span 
class="small-caps">F</span><span 
class="small-caps">R</span><span 
class="small-caps">O</span><span 
class="small-caps">M</span> <span 
class="small-caps">T</span><span 
class="small-caps">H</span><span 
class="small-caps">E</span> V<span 
class="small-caps">E</span><span 
class="small-caps">R</span><span 
class="small-caps">Y</span> B<span 
class="small-caps">E</span><span 
class="small-caps">G</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span><span 
class="small-caps">N</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span><span 
class="small-caps">G</span></span>
   <div class="minipage"><!--l. 241--><p class="noindent" >In  <span 
class="pplri8t-">OCaml  from  the  Very  Beginning  </span>John  Whitington  takes  a  no-prerequisites
approach  to  teaching  a  modern  general-purpose  programming  language.  Each
small,  self-contained  chapter  introduces  a  new  topic,  building  until  the  reader
can write quite substantial programs. There are plenty of questions and, crucially,
worked answers and hints.
<!--l. 243--><p class="indent" >          <span 
class="pplri8t-">OCaml from the Very Beginning </span>will appeal both to new programmers, and
experienced programmers eager to explore functional languages such as OCaml.
It is suitable both for formal use within an undergraduate or graduate curriculum,
and for the interested amateur.
<!--l. 247--><p class="noindent" >
<!--l. 247--><p class="noindent" ><span 
class="pplrc8t-">J<span 
class="small-caps">O</span><span 
class="small-caps">H</span><span 
class="small-caps">N</span> W<span 
class="small-caps">H</span><span 
class="small-caps">I</span><span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span><span 
class="small-caps">G</span><span 
class="small-caps">T</span><span 
class="small-caps">O</span><span 
class="small-caps">N</span> </span>founded a software company which uses OCaml extensively. He
teaches functional programming to students of Computer Science at the University of
Cambridge.
</div>
                                                                               
                                                                               
<!--l. 250--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 251--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-1000"></a></h2>
<div class="center" 
>
<!--l. 256--><p class="noindent" >
<!--l. 257--><p class="noindent" >
<!--l. 261--><p class="noindent" ><span 
class="pplrc8t-x-x-248">OC<span 
class="small-caps">A</span><span 
class="small-caps">M</span><span 
class="small-caps">L</span></span>
<!--l. 263--><p class="noindent" ><span 
class="pplri8t-x-x-172">from the very beginning</span>
<!--l. 269--><p class="noindent" >John Whitington
                                                                               
                                                                               
<!--l. 273--><p class="noindent" ><span 
class="pplrc8t-">C O H E R E N T </span><span 
class="pplrc8t-">&#x00A0;</span><span 
class="pplrc8t-">&#x00A0;P R E S S</span></div>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 278--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-2000"></a></h2>
<div class="center" 
>
<!--l. 282--><p class="noindent" >
<!--l. 284--><p class="noindent" >
<!--l. 288--><p class="noindent" >C O H E R E N T &#x00A0;&#x00A0;&#x00A0;P R E S S<br />
<span 
class="pplr8t-x-x-80">Cambridge</span>
<!--l. 292--><p class="noindent" ><span 
class="pplr8t-x-x-80">Published in the United Kingdom by Coherent Press, Cambridge</span>
<!--l. 296--><p class="noindent" ><span 
class="pplr8c-x-x-90">© </span><span 
class="pplr8t-x-x-80">Coherent Press 2013</span>
<!--l. 300--><p class="noindent" ><span 
class="pplr8t-x-x-80">This publication is in copyright. Subject to statutory</span><br />
<span 
class="pplr8t-x-x-80">exception no reproduction of any part may take place</span><br />
<span 
class="pplr8t-x-x-80">without the written permission of Coherent Press.</span>
<!--l. 304--><p class="noindent" ><span 
class="pplr8t-x-x-80">First published June 2013</span><br />
<span 
class="pplr8t-x-x-80">Reprinted with corrections October 2013</span><br />
<span 
class="pplr8t-x-x-80">Reprinted 2014, 2015, 2016, 2017</span>
<!--l. 314--><p class="noindent" ><span 
class="pplri8t-x-x-80">A catalogue record for this book is available from the British Library</span><br />
<span 
class="pplr8t-x-x-80">&#x00A0;</span><br />
<span 
class="pplri8t-x-x-80">by the same author</span><br />
<span 
class="pplr8t-x-x-80">PDF Explained (O&#8217;Reilly, 2012)</span><br />
<span 
class="pplr8t-x-x-80">More OCaml: Algorithms, Methods and Diversions (Coherent, 2014)</span><br />
<span 
class="pplr8t-x-x-80">A Machine Made this Book: Ten Sketches of Computer Science (Coherent, 2016)</span>
</div>
                                                                               
                                                                               
<!--l. 331--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-3000"></a><span 
class="pplr8t-x-x-90">Contents</span></h2>
   <div class="tableofcontents">
   <span class="chapterToc" > <a 
href="#x1-7000" id="QQ2-1-7"><span 
class="pplr8t-x-x-90">Getting Ready</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">1 </span><a 
href="#x1-80001" id="QQ2-1-8"><span 
class="pplr8t-x-x-90">Starting Off</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">2 </span><a 
href="#x1-110002" id="QQ2-1-11"><span 
class="pplr8t-x-x-90">Names and Functions</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-15"><span 
class="pplr8t-x-x-90">Note on Notation</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">3 </span><a 
href="#x1-150003" id="QQ2-1-16"><span 
class="pplr8t-x-x-90">Case by Case</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">4 </span><a 
href="#x1-180004" id="QQ2-1-19"><span 
class="pplr8t-x-x-90">Making Lists</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-23"><span 
class="pplr8t-x-x-90">Two Different Ways of Thinking</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">5 </span><a 
href="#x1-220005" id="QQ2-1-24"><span 
class="pplr8t-x-x-90">Sorting Things</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-29"><span 
class="pplr8t-x-x-90">Loading a Program from a File</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">6 </span><a 
href="#x1-270006" id="QQ2-1-30"><span 
class="pplr8t-x-x-90">Functions upon Functions upon Functions</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">7 </span><a 
href="#x1-300007" id="QQ2-1-34"><span 
class="pplr8t-x-x-90">When Things Go Wrong</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">8 </span><a 
href="#x1-330008" id="QQ2-1-38"><span 
class="pplr8t-x-x-90">Looking Things Up</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">9 </span><a 
href="#x1-360009" id="QQ2-1-41"><span 
class="pplr8t-x-x-90">More with Functions</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">10 </span><a 
href="#x1-4000010" id="QQ2-1-45"><span 
class="pplr8t-x-x-90">New Kinds of Data</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">11 </span><a 
href="#x1-4400011" id="QQ2-1-49"><span 
class="pplr8t-x-x-90">Growing Trees</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">12 </span><a 
href="#x1-4800012" id="QQ2-1-53"><span 
class="pplr8t-x-x-90">In and Out</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">13 </span><a 
href="#x1-5500013" id="QQ2-1-60"><span 
class="pplr8t-x-x-90">Putting Things in Boxes</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">14 </span><a 
href="#x1-6100014" id="QQ2-1-66"><span 
class="pplr8t-x-x-90">The Other Numbers</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">15 </span><a 
href="#x1-6400015" id="QQ2-1-69"><span 
class="pplr8t-x-x-90">The OCaml Standard Library</span></a></span>
<br />   <span class="chapterToc" ><span 
class="pplr8t-x-x-90">16 </span><a 
href="#x1-6700016" id="QQ2-1-72"><span 
class="pplr8t-x-x-90">Building Bigger Programs</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#x1-7400016" id="QQ2-1-84"><span 
class="pplr8t-x-x-90">Answers to Questions</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#x1-19200016" id="QQ2-1-202"><span 
class="pplr8t-x-x-90">Hints for Questions</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#x1-30300016" id="QQ2-1-313"><span 
class="pplr8t-x-x-90">Coping with Errors</span></a></span>
<br />   <span class="chapterToc" > <a 
href="#Q1-1-329"><span 
class="pplr8t-x-x-90">Index</span></a></span>
   </div>
                                                                               
                                                                               
<!--l. 338--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-4000"></a><span 
class="pplr8t-x-x-90">Preface</span></h2>
<!--l. 342--><p class="noindent" ><span 
class="pplr8t-x-x-90">This book is based on the Author&#8217;s experience of teaching programming to students in the University of</span>
<span 
class="pplr8t-x-x-90">Cambridge supervisions system. In particular, working with students for the first-year undergraduate course</span>
<span 
class="pplr8t-x-x-90">&#8220;Foundations of Computer Science&#8221;, based on Standard ML and lectured for many years by Lawrence C.</span>
<span 
class="pplr8t-x-x-90">Paulson.</span>
<!--l. 344--><p class="indent" >   <span 
class="pplr8t-x-x-90">An interesting aspect of supervising students from a wide range of backgrounds (some with no previous</span>
<span 
class="pplr8t-x-x-90">experience at all taking Computer Science as an additional subject within the Cambridge Natural Sciences</span>
<span 
class="pplr8t-x-x-90">curriculum, and some with a great deal of programming experience already) is the level playing field which the</span>
<span 
class="pplr8t-x-x-90">ML family of languages (like OCaml) provide. Sometimes, those students with least prior programming</span>
<span 
class="pplr8t-x-x-90">experience perform the best.</span>
<!--l. 346--><p class="indent" >   <span 
class="pplr8t-x-x-90">I have tried to write a book which has no prerequisites &#8211; and with which any intelligent undergraduate ought</span>
<span 
class="pplr8t-x-x-90">to be able to cope, whilst trying to be concise enough that someone coming from another language might not be</span>
<span 
class="pplr8t-x-x-90">too annoyed by the tone.</span>
   <h3 class="likesectionHead"><a 
 id="x1-5000"></a><span 
class="pplr8t-x-x-90">Special note to those who have already written programs</span></h3>
<!--l. 349--><p class="noindent" ><span 
class="pplr8t-x-x-90">When I was a boy, our class was using a word processor for the first time. I wanted a title for my</span>
<span 
class="pplr8t-x-x-90">story, so I typed it on the first line and then, placing the cursor at the beginning, held down the</span>
<span 
class="pplr8t-x-x-90">space bar until the title was roughly in the middle. My friend taught me how to use the centring</span>
<span 
class="pplr8t-x-x-90">function, but it seemed more complicated to me, and I stuck with the familiar way &#8211; after all, it</span>
<span 
class="pplr8t-x-x-90">worked. Later on, of course, when I had more confidence and experience, I realized he had been</span>
<span 
class="pplr8t-x-x-90">right.</span>
<!--l. 351--><p class="indent" >   <span 
class="pplr8t-x-x-90">When starting a language which is fundamentally different from those you have seen before, it can be</span>
<span 
class="pplr8t-x-x-90">difficult to see the advantages, and to try to think of every concept in terms of the old language. I would urge</span>
<span 
class="pplr8t-x-x-90">you to consider the possibility that, at the moment, you might be the boy holding down the space</span>
<span 
class="pplr8t-x-x-90">bar.</span>
<!--l. 353--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-6000"></a><span 
class="pplr8t-x-x-90">Acknowledgments</span></h3>
<!--l. 355--><p class="noindent" ><span 
class="pplr8t-x-x-90">Inevitably, the approach here owes a debt to that taken by Lawrence C. Paulson, both in his lecture notes and in</span>
<span 
class="pplr8t-x-x-90">his book &#8220;ML for the Working Programmer&#8221; (Cambridge University Press, 1996). Question 3 in Chapter 11 is</span>
<span 
class="pplr8t-x-x-90">inspired by an examination question of his. I was taught Standard ML by Professor Paulson and Andrei</span>
<span 
class="pplr8t-x-x-90">Serjantov in Autumn 2000. Mark Shinwell has been a constant source of helpful discussion. Robin Walker and</span>
<span 
class="pplr8t-x-x-90">latterly Andrew Rice have arranged the supervisions system at Queens&#8217; College within which I have taught since</span>
<span 
class="pplr8t-x-x-90">2004. I am grateful to the developers of OCaml who have provided such a pleasant environment in</span>
<span 
class="pplr8t-x-x-90">which to write programs. Helpful comments on an earlier draft were provided by Martin DeMello,</span>
<span 
class="pplr8t-x-x-90">Damien Doligez, Arthur Guillon, Zhi Han, Robert Jakob, Xavier Leroy, Florent Monnier, and Benjamin</span>
<span 
class="pplr8t-x-x-90">Pierce. And, of course, I thank all my students, some of whom are now working with OCaml for a</span>
<span 
class="pplr8t-x-x-90">living.</span>
                                                                               
                                                                               
<!--l. 361--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><a 
 id="x1-7000"></a><span 
class="pplr8t-x-x-90">Getting Ready</span></h2>
<!--l. 363--><p class="noindent" ><span 
class="pplr8t-x-x-90">This book is about teaching the computer to do new things by writing </span><span 
class="pplri8t-x-x-90">computer programs</span><span 
class="pplr8t-x-x-90">.</span><a 
 id="dx1-7001"></a> <span 
class="pplr8t-x-x-90">Just as there are</span>
<span 
class="pplr8t-x-x-90">different languages for humans to speak to one another, there are different</span> <a 
 id="dx1-7002"></a><span 
class="pplri8t-x-x-90">programming languages </span><span 
class="pplr8t-x-x-90">for humans to</span>
<span 
class="pplr8t-x-x-90">speak to computers.</span>
<!--l. 365--><p class="indent" >   <span 
class="pplr8t-x-x-90">We are going to be using a programming language called</span> <a 
 id="dx1-7003"></a><span 
class="pplb8t-x-x-90">OCaml</span><span 
class="pplr8t-x-x-90">. It might already be on your computer, or</span>
<span 
class="pplr8t-x-x-90">you may have to find it on the internet and install it yourself. You will know that you have OCaml working when</span>
<span 
class="pplr8t-x-x-90">you see something like this:</span>
<!--l. 368--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span></span></span>
<!--l. 378--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml is waiting for us to type something. Try typing </span><img 
src="pandocfiguresmlbook0x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook1x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook2x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook3x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook4x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook5x.png" alt=""  class="fbox" > <img 
src="pandocfiguresmlbook6x.png" alt=""  class="fbox" > <span 
class="pplr8t-x-x-90">followed by the</span>
<span 
class="pplr8t-x-x-90">Enter key. You should see this:</span>
<!--l. 383--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;;</span></span></span><br 
class="newline" /><a 
 id="dx1-7004"></a><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span></span></span>
<!--l. 389--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml is telling us the result of the calculation. To leave OCaml, give the </span><span 
class="fvmr8t-x-x-81">exit 0 </span><span 
class="pplr8t-x-x-90">command, again ending with</span>
<span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">;;</span></span></span> <span 
class="pplr8t-x-x-90">to tell OCaml we have finished typing:</span>
<!--l. 392--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><a 
 id="dx1-7005"></a><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;exit</span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span>
<!--l. 399--><p class="noindent" ><span 
class="pplr8t-x-x-90">You should find yourself back where you were before. If you make a mistake when typing, you</span>
<span 
class="pplr8t-x-x-90">can press </span><img 
src="pandocfiguresmlbook7x.png" alt=""  class="fbox" > <span 
class="pplr8t-x-x-90">(hold down the </span><img 
src="pandocfiguresmlbook8x.png" alt=""  class="fbox" > <span 
class="pplr8t-x-x-90">key and tap the </span><img 
src="pandocfiguresmlbook9x.png" alt=""  class="fbox" > <span 
class="pplr8t-x-x-90">key). This will allow you to start</span>
<span 
class="pplr8t-x-x-90">again:</span>
<!--l. 404--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;3^CInterrupted</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span></span></span>
<!--l. 411--><p class="noindent" ><span 
class="pplr8t-x-x-90">We are ready to begin.</span>
                                                                               
                                                                               
<!--l. 413--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 416--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;1</span></span><br /><a 
 id="x1-80001"></a><span 
class="pplr8t-x-x-90">Starting Off</span></h2>
<!--l. 418--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will cover a fair amount of material in this chapter and its questions, since we will need a solid base on which</span>
<span 
class="pplr8t-x-x-90">to build. You should read this with a computer running OCaml in front of you.</span>
<!--l. 420--><p class="indent" >   <span 
class="pplr8t-x-x-90">Consider first the mathematical</span> <a 
 id="dx1-8001"></a><span 
class="pplr8t-x-x-90">expression </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="pplr8t-x-x-90">. What is the result? How did you work it out? We might</span>
<span 
class="pplr8t-x-x-90">show the process like this: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook10x.png" alt="      1+ 2&#x00D7; 3
=&#x21D2;    1+ 6
=&#x21D2;    7
" class="math-display" ></center>
</div>
<!--l. 427--><p class="noindent" ><span 
class="pplr8t-x-x-90">How did we know to multiply </span><span 
class="zptmcm7t-x-x-90">2 </span><span 
class="pplr8t-x-x-90">by </span><span 
class="zptmcm7t-x-x-90">3 </span><span 
class="pplr8t-x-x-90">first, instead of adding </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="pplr8t-x-x-90">? How did we know when to stop? Let us</span>
<span 
class="pplr8t-x-x-90">underline the part of the expression which is dealt with at each step: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook11x.png" alt="      1+ 2&#x00D7;-3
=&#x21D2;    1+ 6
      ----
=&#x21D2;    7
" class="math-display" ></center>
</div>
<!--l. 435--><p class="noindent" ><span 
class="pplr8t-x-x-90">We chose which part of the expression to deal with each time using a familiar mathematical rule &#8211;</span>
<span 
class="pplr8t-x-x-90">multiplication is done before addition. We stopped when the expression could not be processed any</span>
<span 
class="pplr8t-x-x-90">further.</span>
<!--l. 439--><p class="indent" >   <span 
class="pplr8t-x-x-90">Computer programs in OCaml are just like these expressions. In order to give you an answer, the computer</span>
<span 
class="pplr8t-x-x-90">needs to know all the rules you know about how to process the expression correctly. In fact, </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3 </span><span 
class="pplr8t-x-x-90">is a valid</span>
<span 
class="pplr8t-x-x-90">OCaml expression as well as a valid mathematical one, but we must write </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">*</span></span></span> <span 
class="pplr8t-x-x-90">instead of </span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="pplr8t-x-x-90">, since there is no </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplr8t-x-x-90">key</span>
<span 
class="pplr8t-x-x-90">on the keyboard:</span>
<!--l. 446--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;2</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;3;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;7</span></span></span>
                                                                               
                                                                               
<!--l. 452--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here, </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span></span></span> <span 
class="pplr8t-x-x-90">is OCaml prompting us to write an expression, and </span><span 
class="fvmr8t-x-x-81">1 + 2 * 3;; </span><span 
class="pplr8t-x-x-90">is what we typed (the semicolons</span>
<span 
class="pplr8t-x-x-90">followed by the Enter key tell OCaml we have finished our expression). OCaml responds with the answer </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">7</span></span></span><span 
class="pplr8t-x-x-90">.</span>
<span 
class="pplr8t-x-x-90">OCaml also prints</span> <a 
 id="dx1-8004"></a><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">int</span></span></span><span 
class="pplr8t-x-x-90">, which tells us that the answer is a whole number, or </span><span 
class="pplri8t-x-x-90">integer</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 458--><p class="indent" >   <span 
class="pplr8t-x-x-90">Let us look at our example expression some more. There are two</span> <a 
 id="dx1-8005"></a><span 
class="pplri8t-x-x-90">operators</span><span 
class="pplr8t-x-x-90">: </span><span 
class="zplmr7t-x-x-90">+ </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="pplr8t-x-x-90">. There are three</span> <a 
 id="dx1-8006"></a><span 
class="pplri8t-x-x-90">operands</span><span 
class="pplr8t-x-x-90">:</span>
<span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="pplr8t-x-x-90">. When we wrote it down, and when we typed it into OCaml, we put spaces between the operators and</span>
<span 
class="pplr8t-x-x-90">operands for readability. How does OCaml process it? Firstly, the text we wrote must be split up into its basic</span>
<span 
class="pplr8t-x-x-90">parts: </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><span 
class="pplr8t-x-x-90">, </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">+</span></span></span><span 
class="pplr8t-x-x-90">, </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><span 
class="pplr8t-x-x-90">, </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">*</span></span></span><span 
class="pplr8t-x-x-90">, and </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><span 
class="pplr8t-x-x-90">. OCaml then looks at the order and kind of the operators and operands, and decides how to</span>
<span 
class="pplr8t-x-x-90">parenthesize the expression: </span><span 
class="zplmr7t-x-x-90">(</span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+(</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="zplmr7t-x-x-90">))</span><span 
class="pplr8t-x-x-90">. Now,</span> <a 
 id="dx1-8007"></a><span 
class="pplr8t-x-x-90">evaluating the expression just requires dealing with each</span>
<span 
class="pplr8t-x-x-90">parenthesized section, starting with the innermost, and stopping when there are no parentheses left:</span>
<div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook12x.png" alt="       (1+(2&#x00D7;-3))
=&#x21D2;     (1+6)-
=&#x21D2;     7
" class="math-display" ></center>
</div>
<!--l. 472--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml knows that </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplr8t-x-x-90">is to be done before </span><span 
class="zplmr7t-x-x-90">+</span><span 
class="pplr8t-x-x-90">, and parenthesizes the expression appropriately. We say the </span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span>
<span 
class="pplr8t-x-x-90">operator has</span> <a 
 id="dx1-8009"></a><span 
class="pplri8t-x-x-90">higher precedence </span><span 
class="pplr8t-x-x-90">than the </span><span 
class="zplmr7t-x-x-90">+ </span><span 
class="pplr8t-x-x-90">operator.</span>
<!--l. 474--><p class="indent" >   <span 
class="pplr8t-x-x-90">An </span><span 
class="pplri8t-x-x-90">expression </span><span 
class="pplr8t-x-x-90">is any valid OCaml program. To produce an answer, OCaml </span><span 
class="pplri8t-x-x-90">evaluates </span><span 
class="pplr8t-x-x-90">the expression, yielding a</span>
<span 
class="pplr8t-x-x-90">special kind of expression, a </span><span 
class="pplri8t-x-x-90">value</span><a 
 id="dx1-8010"></a><span 
class="pplr8t-x-x-90">. In our previous example, </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">6</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="zptmcm7t-x-x-90">7 </span><span 
class="pplr8t-x-x-90">were all expressions, but only </span><span 
class="zptmcm7t-x-x-90">7</span>
<span 
class="pplr8t-x-x-90">was a value.</span>
<!--l. 479--><p class="indent" >   <span 
class="pplr8t-x-x-90">Each expression (and so each value) has a</span> <a 
 id="dx1-8011"></a><span 
class="pplri8t-x-x-90">type</span><span 
class="pplr8t-x-x-90">. The type of </span><span 
class="zptmcm7t-x-x-90">7 </span><span 
class="pplr8t-x-x-90">is </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">(it is an integer). The types of the</span>
<span 
class="pplr8t-x-x-90">expressions </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">6 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3 </span><span 
class="pplr8t-x-x-90">are also </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, since they will evaluate to a value of type </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. The type of any</span>
<span 
class="pplr8t-x-x-90">expression may be worked out by considering the types of its</span> <a 
 id="dx1-8012"></a><span 
class="pplr8t-x-x-90">sub-expressions, and how they are combined</span>
<span 
class="pplr8t-x-x-90">to form the expression. For example, </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">6 </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">because </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">is an </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7t-x-x-90">6 </span><span 
class="pplr8t-x-x-90">is an </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, and the </span><span 
class="zplmr7t-x-x-90">+</span>
<span 
class="pplr8t-x-x-90">operator takes two integers and gives another one (their sum). Here are the mathematical operators on</span>
<span 
class="pplr8t-x-x-90">integers:</span>
<!--l. 487--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook13x.png" alt="---------------------------------------
Operator--Description---------------------

a+b      addition
a-b      subtractbfrom a
a*b      multiplication
a/b      divideaby b,returning the whole part
amodb----divideaby-b,returning-the-remainder-  " ></div>
<!--l. 498--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">mod</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">*</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">/ </span><span 
class="pplr8t-x-x-90">operators have higher precedence than the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">- </span><span 
class="pplr8t-x-x-90">operators. For any operator </span><span 
class="zptmcm7y-x-x-90">&#x2295; </span><span 
class="pplr8t-x-x-90">above, the</span>
<span 
class="pplr8t-x-x-90">expression </span><span 
class="zptmcm7m-x-x-90">a</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zptmcm7m-x-x-90">b</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zptmcm7m-x-x-90">c </span><span 
class="pplr8t-x-x-90">is equivalent to </span><span 
class="zplmr7t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">a</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zptmcm7m-x-x-90">b</span><span 
class="zplmr7t-x-x-90">)</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zptmcm7m-x-x-90">c </span><span 
class="pplr8t-x-x-90">rather than </span><span 
class="zptmcm7m-x-x-90">a</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zplmr7t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">b</span><span 
class="zptmcm7y-x-x-90">&#x2295;</span><span 
class="zptmcm7m-x-x-90">c</span><span 
class="zplmr7t-x-x-90">) </span><span 
class="pplr8t-x-x-90">(we say the operators are</span> <a 
 id="dx1-8018"></a><span 
class="pplri8t-x-x-90">left associative</span><span 
class="pplr8t-x-x-90">). We</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">sometimes write down the type of an expression after a colon when working on paper, to keep it in</span>
<span 
class="pplr8t-x-x-90">mind:</span>
<!--l. 501--><p class="indent" >   <span 
class="fvmr8t-x-x-81">5 * -2 : </span><span 
class="pplb8t-x-x-90">int</span>
<!--l. 504--><p class="noindent" ><span 
class="pplr8t-x-x-90">(negative numbers are written with </span><span 
class="fvmr8t-x-x-81">- </span><span 
class="pplr8t-x-x-90">before them). Of course, there are many more types than just</span>
<span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. Sometimes, instead of numbers, we would like to talk about truth: either something is true</span>
<span 
class="pplr8t-x-x-90">or it is not. For this we use the type</span> <a 
 id="dx1-8019"></a><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">which represents</span> <a 
 id="dx1-8020"></a><span 
class="pplri8t-x-x-90">boolean values</span><span 
class="pplr8t-x-x-90">, named after the English</span>
<span 
class="pplr8t-x-x-90">mathematician George Boole (1815&#8211;1864) who pioneered their use. There are just two things of type</span>
<span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">:</span>
<a 
 id="dx1-8021"></a>
<!--l. 507--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;                         </span><span 
class="fvmr8t-x-x-81">true</span><br 
class="newline" /><a 
 id="dx1-8022"></a><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;                         </span><span 
class="fvmr8t-x-x-81">false</span>
<!--l. 511--><p class="noindent" ><span 
class="pplr8t-x-x-90">How can we use these? One way is to use one of the</span> <a 
 id="dx1-8023"></a><span 
class="pplri8t-x-x-90">comparison operators</span><span 
class="pplr8t-x-x-90">, which are used for comparing values to</span>
<span 
class="pplr8t-x-x-90">one another. For example:</span>
<!--l. 514--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;99</span><span 
class="fvmr8t-x-x-81">&#x00A0;></span><span 
class="fvmr8t-x-x-81">&#x00A0;100;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;false</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;2</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;10;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span>
<!--l. 522--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here are all the comparison operators:</span>
<!--l. 525--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook14x.png" alt="-----------------------------------
Operator--Description-----------------
a=b      trueifaandbareequal
a< b      trueifais lessthan b
a< =b     trueifais lessthan orequaltob
a> b      trueifais morethan b

a> =b     trueifais morethan orequaltob
a<->-b-----trueifais-notequaltob--------  " ></div>
<!--l. 537--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that if we try to use operators with types for which they are not intended, OCaml will not accept the</span>
<span 
class="pplr8t-x-x-90">program at all, showing us where our mistake is by underlining it:</span>
<!--l. 540--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># 1 + </span><span class="underline"><span 
class="fvmr8t-x-x-81">true</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;This expression has type bool but an expression was expected of type</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span></span></span>
<!--l. 547--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can find more information about error messages in OCaml in the appendix &#8220;Coping with Errors&#8221; at the back</span>
<span 
class="pplr8t-x-x-90">of this book.</span>
<!--l. 551--><p class="indent" >   <span 
class="pplr8t-x-x-90">There are two operators for combining boolean values (for instance, those resulting from using the</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">comparison operators). The expression </span><span 
class="fvmr8t-x-x-81">a && b </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">only if </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">b </span><span 
class="pplr8t-x-x-90">both evaluate to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">. The</span>
<span 
class="pplr8t-x-x-90">expression</span> <a 
 id="dx1-8030"></a><span 
class="fvmr8t-x-x-81">a || b </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">only if </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">b </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">, or both do. The</span> <a 
 id="dx1-8031"></a><span 
class="fvmr8t-x-x-81">&& </span><span 
class="pplr8t-x-x-90">operator</span>
<span 
class="pplr8t-x-x-90">(pronounced &#8220;and&#8221;) is of higher precedence than the </span><span 
class="fvmr8t-x-x-81">|| </span><span 
class="pplr8t-x-x-90">operator (pronounced &#8220;or&#8221;), so </span><span 
class="fvmr8t-x-x-81">a && b || c </span><span 
class="pplr8t-x-x-90">is the same</span>
<span 
class="pplr8t-x-x-90">as </span><span 
class="fvmr8t-x-x-81">(a && b) || c</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 553--><p class="indent" >   <span 
class="pplr8t-x-x-90">A third type we shall be using is</span> <a 
 id="dx1-8032"></a><span 
class="pplb8t-x-x-90">char </span><span 
class="pplr8t-x-x-90">which holds a single </span><span 
class="pplri8t-x-x-90">character</span><a 
 id="dx1-8033"></a><span 
class="pplr8t-x-x-90">, such as &#8216;a&#8217; or &#8216;?&#8217;. We write these in single</span>
<span 
class="pplr8t-x-x-90">quotation marks:</span>
<!--l. 556--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">c</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;char = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">c</span><span 
class="fvmr8c-x-x-81">'</span>
<!--l. 562--><p class="noindent" ><span 
class="pplr8t-x-x-90">So far we have looked only at operators like </span><span 
class="fvmr8t-x-x-81">+</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">mod</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">= </span><span 
class="pplr8t-x-x-90">which look like familiar mathematical ones. But many</span>
<span 
class="pplr8t-x-x-90">constructs in programming languages look a little different. For example, to choose a course of evaluation based</span>
<span 
class="pplr8t-x-x-90">on some test, we use the</span> <a 
 id="dx1-8034"></a><a 
 id="dx1-8035"></a><a 
 id="dx1-8036"></a><span 
class="fvmb8t-x-x-81">if</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">then</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">construct:</span>
<!--l. 565--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># if 100 > 99 then 0 else 1;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 0</span>
<!--l. 571--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression between </span><span 
class="fvmb8t-x-x-81">if </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="pplr8t-x-x-90">(in our example </span><span 
class="fvmr8t-x-x-81">100 > 99</span><span 
class="pplr8t-x-x-90">) must have type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">&#8211; it evaluates to either</span>
<span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">. The types of the expression to choose if true and the expression to choose if false must be the</span>
<span 
class="pplr8t-x-x-90">same as one another &#8211; here they are both of type </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. The whole expression evaluates to the same type &#8211; </span><span 
class="pplb8t-x-x-90">int</span>
<span 
class="pplr8t-x-x-90">&#8211; because either the </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="pplr8t-x-x-90">part or the </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">part is chosen to be the result of evaluating the whole</span>
<span 
class="pplr8t-x-x-90">expression:</span>
<!--l. 578--><p class="indent" >
   <center class="math-display" >
<img 
src="pandocfiguresmlbook15x.png" alt="   &#x25DC;--bo&#x25DE;o&#x25DF;l-&#x25DD;     &#x25DC;in&#x25DE;t&#x25DF;&#x25DD;    &#x25DC;in&#x25DE;t&#x25DF;&#x25DD;
if-100->--99-then-0-else-1-
&#x25DF;           &#x25DD;i&#x25DC;nt           &#x25DE;   " class="math-display" ></center>
<!--l. 581--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have covered a lot in this chapter, but we need all these basic tools before we can write interesting programs.</span>
<span 
class="pplr8t-x-x-90">Make sure you work through the questions on paper, on the computer, or both, before moving on. Hints and</span>
<span 
class="pplr8t-x-x-90">answers are at the back of the book.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-90001"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 585--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-9002x1"><span 
class="pplr8t-x-x-90">What are the types of the following expressions and what do they evaluate to, and why?</span>
     <!--l. 589--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">17</span>
     <!--l. 591--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">1 + 2 * 3 + 4</span>
     <!--l. 593--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">800 / 80 / 8</span>
     <!--l. 595--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">400 > 200</span>
     <!--l. 597--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">1 <> 1</span>
     <!--l. 599--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">true || false</span>
     <!--l. 601--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8t-x-x-81">true && false</span>
     <!--l. 603--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmb8t-x-x-81">if </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="fvmr8t-x-x-81">true</span>
     <!--l. 605--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">%</span><span 
class="fvmr8c-x-x-81">'</span>
     <!--l. 607--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x00A0;        </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">b</span><span 
class="fvmr8c-x-x-81">'</span>
     </li>
     <li 
  class="enumerate" id="x1-9004x2"><span 
class="pplr8t-x-x-90">Consider the evaluations of the expressions </span><span 
class="fvmr8t-x-x-81">1 + 2 mod 3</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">(1 + 2) mod 3</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">1 + (2 mod 3)</span><span 
class="pplr8t-x-x-90">. What</span>
     <span 
class="pplr8t-x-x-90">can you conclude about the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">mod </span><span 
class="pplr8t-x-x-90">operators?</span>
     </li>
     <li 
  class="enumerate" id="x1-9006x3"><span 
class="pplr8t-x-x-90">A programmer writes </span><span 
class="fvmr8t-x-x-81">1+2 * 3+4</span><span 
class="pplr8t-x-x-90">. What does this evaluate to? What advice would you give him?</span>
     </li>
     <li 
  class="enumerate" id="x1-9008x4"><span 
class="pplr8t-x-x-90">The range of numbers available is limited. There are two special numbers:</span> <a 
 id="dx1-9009"></a><a 
 id="dx1-9010"></a><span 
class="fvmr8t-x-x-81">min_int </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">max_int</span><span 
class="pplr8t-x-x-90">.</span>
     <span 
class="pplr8t-x-x-90">What  are  their  values  on  your  computer?  What  happens  when  you  evaluate  the  expressions</span>
     <span 
class="fvmr8t-x-x-81">max_int + 1 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">min_int - 1</span><span 
class="pplr8t-x-x-90">?</span>
     </li>
     <li 
  class="enumerate" id="x1-9012x5"><span 
class="pplr8t-x-x-90">What happens when you try to evaluate the expression </span><span 
class="fvmr8t-x-x-81">1 / 0</span><span 
class="pplr8t-x-x-90">? Why?</span>
     </li>
     <li 
  class="enumerate" id="x1-9014x6"><span 
class="pplr8t-x-x-90">Can you discover what the </span><span 
class="fvmr8t-x-x-81">mod </span><span 
class="pplr8t-x-x-90">operator does when one or both of the operands are negative?</span>
     <span 
class="pplr8t-x-x-90">What about if the first operand is zero? What if the second is zero?</span>
     </li>
     <li 
  class="enumerate" id="x1-9016x7"><span 
class="pplr8t-x-x-90">Why not just use, for example, the integer </span><span 
class="fvmr8t-x-x-81">0 </span><span 
class="pplr8t-x-x-90">to represent false and the integer </span><span 
class="fvmr8t-x-x-81">1 </span><span 
class="pplr8t-x-x-90">for true? Why have</span>
     <span 
class="pplr8t-x-x-90">a separate </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">type at all?</span>
     </li>
     <li 
  class="enumerate" id="x1-9018x8"><span 
class="pplr8t-x-x-90">What is the effect of the comparison operators like </span><span 
class="fvmr8t-x-x-81">< </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">> </span><span 
class="pplr8t-x-x-90">on alphabetic values of type </span><span 
class="pplb8t-x-x-90">char</span><span 
class="pplr8t-x-x-90">? For</span>
     <span 
class="pplr8t-x-x-90">example, what does </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">p</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">< </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">q</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">evaluate to? What is the effect of the comparison operators on the</span>
     <span 
class="pplr8t-x-x-90">booleans, </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">?</span></li></ol>
                                                                               
                                                                               
<!--l. 618--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 620--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-100001"></a></h2>
<!--l. 621--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 625--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 625--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
                                                                               
                                                                               
<!--l. 632--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;2</span></span><br /><a 
 id="x1-110002"></a><span 
class="pplr8t-x-x-90">Names and Functions</span></h2>
<!--l. 635--><p class="noindent" ><span 
class="pplr8t-x-x-90">So far we have built only tiny toy programs. To build bigger ones, we need to be able to</span> <a 
 id="dx1-11001"></a><span 
class="pplr8t-x-x-90">name things so as to</span>
<span 
class="pplr8t-x-x-90">refer to them later. We also need to write expressions whose result depends upon one or more other</span>
<span 
class="pplr8t-x-x-90">things.</span>
<!--l. 637--><p class="indent" >   <span 
class="pplr8t-x-x-90">Before, if we wished to use a sub-expression twice or more in a single expression, we had to type it multiple</span>
<span 
class="pplr8t-x-x-90">times:</span>
<!--l. 640--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;200</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;200</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;200;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8000000</span></span></span>
<!--l. 646--><p class="noindent" ><span 
class="pplr8t-x-x-90">Instead, we can define our own name to stand for the result of evaluating an expression, and then use the name</span>
<span 
class="pplr8t-x-x-90">as we please:</span>
<!--l. 649--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;200;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;200</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8000000</span></span></span>
<!--l. 657--><p class="noindent" ><span 
class="pplr8t-x-x-90">To write this all in a single expression, we can use the</span> <a 
 id="dx1-11002"></a><a 
 id="dx1-11003"></a><a 
 id="dx1-11004"></a><span 
class="fvmb8t-x-x-81">let</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmr8t-x-x-81">=</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">in</span><span 
class="pplr8t-x-x-90">&#x00A0;construct:</span>
<!--l. 661--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;200</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8000000</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;500</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;(let</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;b);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;250500</span></span></span>
<!--l. 670--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can also make a</span> <a 
 id="dx1-11005"></a><span 
class="pplri8t-x-x-90">function</span><span 
class="pplr8t-x-x-90">, whose value depends upon some input (we call this input an</span> <a 
 id="dx1-11006"></a><span 
class="pplri8t-x-x-90">argument </span><span 
class="pplr8t-x-x-90">&#8211; we will be</span>
<span 
class="pplr8t-x-x-90">using the word &#8220;input&#8221; later in the book to mean something different):</span>
<!--l. 673--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;cube</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;cube</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;cube</span><span 
class="fvmr8t-x-x-81">&#x00A0;200;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8000000</span></span></span>
<!--l. 681--><p class="noindent" ><span 
class="pplr8t-x-x-90">We chose </span><span 
class="fvmr8t-x-x-81">cube </span><span 
class="pplr8t-x-x-90">for the name of the function and </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">for the name of its argument. When we typed the function in,</span>
<span 
class="pplr8t-x-x-90">OCaml replied by telling us that its type is</span> <a 
 id="dx1-11007"></a><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. This means it is a function which takes an integer as its</span>
<span 
class="pplr8t-x-x-90">argument, and, when given that argument, evaluates to an integer. To use the function, we just write its name</span>
<span 
class="pplr8t-x-x-90">followed by a suitable argument. In our example, we calculated </span><span 
class="zptmcm7t-x-x-90">200</span><sup><span 
class="zptmcm7t-x-x-70">3</span></sup> <span 
class="pplr8t-x-x-90">by giving the </span><span 
class="fvmr8t-x-x-81">cube </span><span 
class="pplr8t-x-x-90">function </span><span 
class="fvmr8t-x-x-81">200 </span><span 
class="pplr8t-x-x-90">as its</span>
<span 
class="pplr8t-x-x-90">argument.</span>
<!--l. 683--><p class="indent" >   <span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">cube </span><span 
class="pplr8t-x-x-90">function has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, we gave it an integer </span><span 
class="fvmr8t-x-x-81">200</span><span 
class="pplr8t-x-x-90">, and so the result is another integer.</span>
<span 
class="pplr8t-x-x-90">Thus, the type of the expression </span><span 
class="fvmr8t-x-x-81">cube 200 </span><span 
class="pplr8t-x-x-90">is </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">&#8211; remember that the type of any expression is the</span>
<span 
class="pplr8t-x-x-90">type of the thing it will evaluate to, and </span><span 
class="fvmr8t-x-x-81">cube 200 </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">8000000</span><span 
class="pplr8t-x-x-90">, an integer. In diagram</span>
<span 
class="pplr8t-x-x-90">form:</span>
                                                                               
                                                                               
<!--l. 686--><p class="indent" >
   <center class="math-display" >
<img 
src="pandocfiguresmlbook16x.png" alt="in&#x25DC;t&#x2192;&#x25DE;&#x25DF;int&#x25DD;&#x25DC;i &#x25DE;nt&#x25DF;-&#x25DD;
&#x25DF;cube&#x25DD;&#x25DC;-200-&#x25DE;
    int   " class="math-display" ></center>
<!--l. 689--><p class="noindent" ><span 
class="pplr8t-x-x-90">If we try an argument of the wrong type, the program will be rejected:</span>
<!--l. 692--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;cube</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;cube</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># cube </span><span class="underline"><span 
class="fvmr8t-x-x-81">false</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;This</span><span 
class="fvmr8t-x-x-81">&#x00A0;expression</span><span 
class="fvmr8t-x-x-81">&#x00A0;has</span><span 
class="fvmr8t-x-x-81">&#x00A0;type</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">but</span><span 
class="fvmr8t-x-x-81">&#x00A0;an</span><span 
class="fvmr8t-x-x-81">&#x00A0;expression</span><span 
class="fvmr8t-x-x-81">&#x00A0;was</span><span 
class="fvmr8t-x-x-81">&#x00A0;expected</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;type</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span></span></span>
<!--l. 702--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is a function which determines if an integer is negative:</span>
<!--l. 706--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;neg</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;<</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">else</span><span 
class="fvmr8t-x-x-81">&#x00A0;false;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;neg</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># neg (-30);;                                     </span><span 
class="pplri8t-x-x-90">[we add parentheses to distinguish from &#8220;neg -</span>
<span 
class="pplri8t-x-x-90">30&#8221;]</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span>
<!--l. 716--><p class="noindent" ><span 
class="pplr8t-x-x-90">But, of course, this is equivalent to just writing</span>
<!--l. 719--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;neg</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;<</span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;neg</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># neg (-30);;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span>
<!--l. 727--><p class="noindent" ><span 
class="pplr8t-x-x-90">because </span><span 
class="fvmr8t-x-x-81">x < 0 </span><span 
class="pplr8t-x-x-90">will evaluate to the appropriate boolean value on its own &#8211; </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if</span> <span 
class="fvmr8t-x-x-81">x</span> <span 
class="zptmcm7m-x-x-90">&#x003C; </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">otherwise.</span>
<span 
class="pplr8t-x-x-90">Here is another function, this time of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. It determines if a given character is a vowel or</span>
<span 
class="pplr8t-x-x-90">not:</span>
                                                                               
                                                                               
<!--l. 730--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;isvowel</span><span 
class="fvmr8t-x-x-81">&#x00A0;c</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;c = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">|| c = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">|| c = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">i</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">|| c = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">o</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">|| c = </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">u</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;isvowel</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;char</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># isvowel 'x';;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;false</span></span></span>
<!--l. 739--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we typed the function over two lines. This can be done by pressing the Enter key in between</span>
<span 
class="pplr8t-x-x-90">lines. OCaml knows that we are finished when we type </span><span 
class="fvmr8t-x-x-81">;; </span><span 
class="pplr8t-x-x-90">followed by Enter as usual. Notice also</span>
<span 
class="pplr8t-x-x-90">that we pressed space a few times so that the second line appeared a little to the right of the first.</span>
<span 
class="pplr8t-x-x-90">This is known as</span> <a 
 id="dx1-11008"></a><span 
class="pplri8t-x-x-90">indentation </span><span 
class="pplr8t-x-x-90">and does not affect the meaning of the program at all &#8211; it is just for</span>
<span 
class="pplr8t-x-x-90">readability.</span>
<!--l. 741--><p class="indent" >   <span 
class="pplr8t-x-x-90">There can be more than one argument to a function. For example, here is a function which checks if two</span>
<span 
class="pplr8t-x-x-90">numbers add up to ten:</span>
<!--l. 744--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;addtoten</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;10;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;addtoten</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># addtoten 6 4;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span>
<!--l. 754--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type is </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">because the arguments are both integers, and the result is a boolean. We use the</span>
<span 
class="pplr8t-x-x-90">function in the same way as before, but writing two integers this time, one for each argument the function</span>
<span 
class="pplr8t-x-x-90">expects.</span>
<!--l. 756--><p class="indent" >   <span 
class="pplr8t-x-x-90">A</span> <a 
 id="dx1-11009"></a><span 
class="pplri8t-x-x-90">recursive </span><span 
class="pplr8t-x-x-90">function is one which uses itself. Consider calculating the</span> <a 
 id="dx1-11010"></a><span 
class="pplr8t-x-x-90">factorial of a given number &#8211; the</span>
<span 
class="pplr8t-x-x-90">factorial of 4 (written </span><span 
class="zptmcm7t-x-x-90">4</span><span 
class="zplmr7t-x-x-90">! </span><span 
class="pplr8t-x-x-90">in mathematics), for example, is </span><span 
class="zptmcm7t-x-x-90">4</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">. Here is a recursive function to calculate the</span>
<span 
class="pplr8t-x-x-90">factorial of a positive number. Note that it uses itself in its own definition.</span>
<!--l. 759--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;(a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># factorial 4;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;24</span></span></span>
<!--l. 769--><p class="noindent" ><span 
class="pplr8t-x-x-90">We used</span> <a 
 id="dx1-11011"></a><span 
class="fvmb8t-x-x-81">let rec </span><span 
class="pplr8t-x-x-90">instead of </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="pplr8t-x-x-90">to indicate a recursive function. How does the evaluation of </span><span 
class="fvmr8t-x-x-81">factorial 4</span>
<span 
class="pplr8t-x-x-90">proceed? </span><div class="eqnarray">
   <center class="math-display" >
                                                                               
                                                                               
<img 
src="pandocfiguresmlbook17x.png" alt="       factorial-4-
=&#x21D2;     4 * factorial 3
           -----------
=&#x21D2;     4 * (3 * factorial-2)
=&#x21D2;     4 * (3 * (2 * factorial-1))
=&#x21D2;     4 * (3 * (2-*-1))
=&#x21D2;     4 * (3 *-2)
=&#x21D2;     4-*-6
=&#x21D2;     24
" class="math-display" ></center>
</div>
<!--l. 781--><p class="noindent" ><span 
class="pplr8t-x-x-90">For the first three steps, the </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">part of the conditional expression is chosen, because the argument </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">is greater</span>
<span 
class="pplr8t-x-x-90">than one. When the argument is equal to one, we do not use </span><span 
class="fvmr8t-x-x-81">factorial </span><span 
class="pplr8t-x-x-90">again, but just evaluate to one. The</span>
<span 
class="pplr8t-x-x-90">expression built up of all the multiplications is then evaluated until a value is reached: this is the result of the</span>
<span 
class="pplr8t-x-x-90">whole evaluation. It is sometimes possible for a recursive function never to finish &#8211; what if we try to evaluate</span>
<span 
class="fvmr8t-x-x-81">factorial (-1)</span><span 
class="pplr8t-x-x-90">? </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook18x.png" alt="       factorial (-1)
= &#x21D2;    -1 * factorial-(-2)-
= &#x21D2;    -1 * (-2 * factorial (- 3))
                 --------------
= &#x21D2;    -1 * (-2 * (-3 * factorial-(-4)))
   ...   ...
" class="math-display" ></center>
</div>
<!--l. 790--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression keeps expanding, and the recursion keeps going. Helpfully, OCaml tells us what is going</span>
<span 
class="pplr8t-x-x-90">on:</span>
<!--l. 793--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;(a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># factorial (-1);;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Stack</span><span 
class="fvmr8t-x-x-81">&#x00A0;overflow</span><span 
class="fvmr8t-x-x-81">&#x00A0;during</span><span 
class="fvmr8t-x-x-81">&#x00A0;evaluation</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">(looping</span><span 
class="fvmr8t-x-x-81">&#x00A0;recursion?).</span></span></span>
<!--l. 804--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is an example of an error OCaml cannot find by merely looking at the program &#8211; it can only be detected</span>
<span 
class="pplr8t-x-x-90">during evaluation. Later in the book, we will see how to prevent people who are using our functions from</span>
<span 
class="pplr8t-x-x-90">making such mistakes.</span>
<!--l. 806--><p class="indent" >   <span 
class="pplr8t-x-x-90">One of the oldest methods for solving a problem (called</span> <a 
 id="dx1-11014"></a><span 
class="pplri8t-x-x-90">algorithms</span><span 
class="pplr8t-x-x-90">) still in common use is</span> <a 
 id="dx1-11015"></a><span 
class="pplr8t-x-x-90">Euclid&#8217;s algorithm</span>
<span 
class="pplr8t-x-x-90">for calculating the greatest common divisor of two numbers (that is, given two positive integers </span><span 
class="zptmcm7m-x-x-90">a </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7m-x-x-90">b</span><span 
class="pplr8t-x-x-90">, finding</span>
<span 
class="pplr8t-x-x-90">the biggest positive integer </span><span 
class="zptmcm7m-x-x-90">c </span><span 
class="pplr8t-x-x-90">such that neither </span><span 
class="zptmcm7m-x-x-90">a</span><span 
class="zplmr7t-x-x-90">/</span><span 
class="zptmcm7m-x-x-90">c </span><span 
class="pplr8t-x-x-90">nor </span><span 
class="zptmcm7m-x-x-90">b</span><span 
class="zplmr7t-x-x-90">/</span><span 
class="zptmcm7m-x-x-90">c </span><span 
class="pplr8t-x-x-90">have a remainder). Euclid was a Greek mathematician</span>
<span 
class="pplr8t-x-x-90">who lived about three centuries before Christ. Euclid&#8217;s algorithm is simple to write as a function with two</span>
<span 
class="pplr8t-x-x-90">arguments:</span>
<!--l. 809--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;gcd</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span><span 
class="fvmr8t-x-x-81">&#x00A0;gcd</span><span 
class="fvmr8t-x-x-81">&#x00A0;b</span><span 
class="fvmr8t-x-x-81">&#x00A0;(a</span><span 
class="fvmr8t-x-x-81">&#x00A0;mod</span><span 
class="fvmr8t-x-x-81">&#x00A0;b);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;gcd</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># gcd 64000 3456;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;128</span></span></span>
<!--l. 818--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is the evaluation: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook19x.png" alt="       gcd-64000-3456-
=&#x21D2;     gcd-3456-1792-
=&#x21D2;     gcd-1792-1664-
=&#x21D2;     gcd-1664-128-
=&#x21D2;     gcd 128 0
=&#x21D2;     128------
" class="math-display" ></center>
</div>
<!--l. 828--><p class="noindent" ><span 
class="pplr8t-x-x-90">Finally, here is a simple function on boolean values. In the previous chapter, we looked at the </span><span 
class="fvmr8t-x-x-81">&& </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">||</span>
<span 
class="pplr8t-x-x-90">operators which are built in to OCaml. The other important boolean operator is the</span> <a 
 id="dx1-11017"></a><span 
class="fvmr8t-x-x-81">not </span><span 
class="pplr8t-x-x-90">function, which</span>
<span 
class="pplr8t-x-x-90">returns the boolean complement (opposite) of its argument &#8211; </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if the argument is </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">, and vice</span>
<span 
class="pplr8t-x-x-90">versa. This is also built in, but it is easy enough to define ourselves, as a function of type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="zptmcm7y-x-x-90">&#x2192;</span>
<span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 831--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;false</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># not true;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;false</span></span></span>
<!--l. 840--><p class="noindent" ><span 
class="pplr8t-x-x-90">Almost every program we write will involve functions such as these, and many larger ones too. In fact,</span>
<span 
class="pplr8t-x-x-90">languages like OCaml are often called</span> <a 
 id="dx1-11018"></a><span 
class="pplri8t-x-x-90">functional languages</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-120002"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 845--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-12002x1"><span 
class="pplr8t-x-x-90">Write a function which multiplies a given number by ten. What is its type?</span>
     </li>
     <li 
  class="enumerate" id="x1-12004x2"><span 
class="pplr8t-x-x-90">Write a function which returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if both of its arguments are non-zero, and </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">otherwise.</span>
     <span 
class="pplr8t-x-x-90">What is the type of your function?</span>
     </li>
     <li 
  class="enumerate" id="x1-12006x3"><span 
class="pplr8t-x-x-90">Write a recursive function which, given a number </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">, calculates the sum </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">3</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">. What is its</span>
     <span 
class="pplr8t-x-x-90">type?</span>
     </li>
     <li 
  class="enumerate" id="x1-12008x4"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">power x n </span><span 
class="pplr8t-x-x-90">which raises </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">to the power </span><span 
class="fvmr8t-x-x-81">n</span><span 
class="pplr8t-x-x-90">. Give its type.</span>
     </li>
     <li 
  class="enumerate" id="x1-12010x5"><span 
class="pplr8t-x-x-90">Write  a  function  </span><span 
class="fvmr8t-x-x-81">isconsonant </span><span 
class="pplr8t-x-x-90">which,  given  a  lower-case  character  in  the  range  </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">,</span>
     <span 
class="pplr8t-x-x-90">determines if it is a consonant.</span>
     </li>
     <li 
  class="enumerate" id="x1-12012x6"><span 
class="pplr8t-x-x-90">What is the result of the expression  </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = 1 </span><span 
class="fvmb8t-x-x-81">in let </span><span 
class="fvmr8t-x-x-81">x = 2 </span><span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">x + x </span><span 
class="pplr8t-x-x-90">?</span>
     </li>
     <li 
  class="enumerate" id="x1-12014x7"><span 
class="pplr8t-x-x-90">Can you suggest a way of preventing the non-termination of the </span><span 
class="fvmr8t-x-x-81">factorial </span><span 
class="pplr8t-x-x-90">function in the case of</span>
     <span 
class="pplr8t-x-x-90">a zero or negative argument?</span></li></ol>
                                                                               
                                                                               
<!--l. 855--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 857--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-130002"></a></h2>
<!--l. 858--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 862--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 862--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 865--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 865--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
<!--l. 871--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-140002"></a><span 
class="pplr8t-x-x-90">Note on Notation</span></h2>
<a 
 id="Q1-1-15"></a>
<!--l. 874--><p class="noindent" ><span 
class="pplr8t-x-x-90">From now on, instead of showing the actual OCaml session</span><span 
class="pplr8t-x-x-90">&#x2026;</span>
<!--l. 877--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;(a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 885--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x2026;we will usually just show the program in a box, together with its type:</span>
<!--l. 889--><p class="noindent" ><img 
src="pandocfiguresmlbook20x.png" alt=""  class="fbox" >
<!--l. 898--><p class="noindent" ><span 
class="pplr8t-x-x-90">If you prefer to compose your programs in a text editing program, and copy-and-paste them into OCaml, you</span>
<span 
class="pplr8t-x-x-90">can do that too. Just make sure you end with </span><span 
class="fvmr8t-x-x-81">;; </span><span 
class="pplr8t-x-x-90">to let OCaml know you have finished entering the</span>
<span 
class="pplr8t-x-x-90">program.</span>
<!--l. 900--><p class="indent" >   <span 
class="pplr8t-x-x-90">Later on, when we write larger programs, we will see how to use OCaml to load our programs from external</span>
<span 
class="pplr8t-x-x-90">files.</span>
                                                                               
                                                                               
<!--l. 903--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;3</span></span><br /><a 
 id="x1-150003"></a><span 
class="pplr8t-x-x-90">Case by Case</span></h2>
<!--l. 906--><p class="noindent" ><span 
class="pplr8t-x-x-90">In the previous chapter, we used the</span> <a 
 id="dx1-15001"></a><span 
class="pplr8t-x-x-90">conditional expression </span><span 
class="fvmb8t-x-x-81">if</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">then</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">to define functions whose</span>
<span 
class="pplr8t-x-x-90">results depend on their arguments. For some of them we had to nest the conditional expressions one inside</span>
<span 
class="pplr8t-x-x-90">another. Programs like this are not terribly easy to read, and expand quickly in size and complexity as the</span>
<span 
class="pplr8t-x-x-90">number of cases increases.</span>
<!--l. 908--><p class="indent" >   <span 
class="pplr8t-x-x-90">OCaml has a nicer way of expressing choices &#8211;</span> <a 
 id="dx1-15002"></a><span 
class="pplri8t-x-x-90">pattern matching</span><span 
class="pplr8t-x-x-90">. For example, recall our factorial</span>
<span 
class="pplr8t-x-x-90">function:</span>
<!--l. 912--><p class="noindent" ><img 
src="pandocfiguresmlbook21x.png" alt=""  class="fbox" >
<!--l. 921--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can rewrite this using pattern matching:</span>
<a 
 id="dx1-15003"></a>
<a 
 id="dx1-15004"></a>
<!--l. 929--><p class="noindent" ><img 
src="pandocfiguresmlbook22x.png" alt=""  class="fbox" ><a 
 id="dx1-15005"></a><a 
 id="dx1-15006"></a>
<!--l. 941--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can read this as &#8220;See if </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">matches the pattern </span><span 
class="fvmr8t-x-x-81">1</span><span 
class="pplr8t-x-x-90">. If it does, just return </span><span 
class="fvmr8t-x-x-81">1</span><span 
class="pplr8t-x-x-90">. If not, see if it matches the pattern </span><span 
class="fvmr8t-x-x-81">_</span><span 
class="pplr8t-x-x-90">. If</span>
<span 
class="pplr8t-x-x-90">it does, the result is </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;(a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1)</span></span></span><span 
class="pplr8t-x-x-90">.&#8221; The pattern </span><span 
class="fvmr8t-x-x-81">_ </span><span 
class="pplr8t-x-x-90">is special &#8211; it matches anything. Remember our</span>
<span 
class="fvmr8t-x-x-81">isvowel </span><span 
class="pplr8t-x-x-90">function from the previous chapter?</span>
<!--l. 945--><p class="noindent" ><img 
src="pandocfiguresmlbook23x.png" alt=""  class="fbox" >
<!--l. 954--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is how to write it using pattern matching:</span>
<!--l. 958--><p class="noindent" ><img 
src="pandocfiguresmlbook24x.png" alt=""  class="fbox" >
<!--l. 973--><p class="noindent" ><span 
class="pplr8t-x-x-90">If we miss out one or more cases, OCaml will warn us:</span>
                                                                               
                                                                               
<!--l. 976--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;isvowel</span><span 
class="fvmr8t-x-x-81">&#x00A0;c</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span class="underline"><span 
class="fvmr8t-x-x-81">match c with</span></span><br 
class="newline" /><span class="underline"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">-> true</span></span><br 
class="newline" /><span class="underline"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">-> true</span></span><br 
class="newline" /><span class="underline"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">i</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">-> true</span></span><br 
class="newline" /><span class="underline"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">o</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">-> true</span></span><br 
class="newline" /><span class="underline"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">u</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">-> true;;</span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Warning 8:</span><span 
class="fvmr8t-x-x-81">&#x00A0;this pattern-matching is not exhaustive.</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Here is an example of a value that is not matched:</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">'b'</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val isvowel :</span><span 
class="fvmr8t-x-x-81">&#x00A0;char -> bool</span>
<!--l. 991--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml does not reject the program, because there may be legitimate reasons to miss cases out, but for now we</span>
<span 
class="pplr8t-x-x-90">will make sure all our pattern matches are complete. Notice that we had to repeat </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">five times. This would be</span>
<span 
class="pplr8t-x-x-90">awkward if the expression to be calculated was more complicated. We can combine patterns like</span>
<span 
class="pplr8t-x-x-90">this:</span>
<!--l. 995--><p class="noindent" ><img 
src="pandocfiguresmlbook25x.png" alt=""  class="fbox" >
<!--l. 1006--><p class="noindent" ><span 
class="pplr8t-x-x-90">Finally, let us rewrite Euclid&#8217;s Algorithm from the previous chapter:</span>
<!--l. 1010--><p class="noindent" ><img 
src="pandocfiguresmlbook26x.png" alt=""  class="fbox" >
<!--l. 1019--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now in pattern matching style:</span>
<!--l. 1023--><p class="noindent" ><img 
src="pandocfiguresmlbook27x.png" alt=""  class="fbox" >
<!--l. 1034--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type of a whole  </span><span 
class="fvmb8t-x-x-81">match </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0; </span><span 
class="fvmb8t-x-x-81">with</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;expression is determined by the types of the expressions on the right hand</span>
<span 
class="pplr8t-x-x-90">side of each </span><span 
class="fvmr8t-x-x-81">-> </span><span 
class="pplr8t-x-x-90">arrow, all of which must be alike:</span>
<!--l. 1037--><p class="indent" >
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook28x.png" alt="                  int              int
                 &#x25DC;&#x25DE;&#x25DF;&#x25DD;        &#x25DC;-----&#x25DE;&#x25DF;-----&#x25DD;
m&#x25DF;atch-b-with-0-->---a-&#x25DD;|&#x25DC;-_-->--gcd-b-(a mod-b)&#x25DE;
                    int   " class="math-display" ></center>
<!--l. 1040--><p class="noindent" ><span 
class="pplr8t-x-x-90">We use pattern matching whenever it is easier to read and understand than </span><span 
class="fvmb8t-x-x-81">if </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">then </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">else</span>
<span 
class="pplr8t-x-x-90">expressions.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-160003"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 1045--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-16002x1"><span 
class="pplr8t-x-x-90">Rewrite the </span><span 
class="fvmr8t-x-x-81">not </span><span 
class="pplr8t-x-x-90">function from the previous chapter in pattern matching style.</span>
     </li>
     <li 
  class="enumerate" id="x1-16004x2"><span 
class="pplr8t-x-x-90">Use pattern matching to write a recursive function which, given a positive integer </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">, returns the</span>
     <span 
class="pplr8t-x-x-90">sum of all the integers from </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">to </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-16006x3"><span 
class="pplr8t-x-x-90">Use pattern matching to write a function which, given two numbers </span><span 
class="zptmcm7m-x-x-90">x </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">, computes </span><span 
class="zptmcm7m-x-x-90">x</span><sup><span 
class="zptmcm7m-x-x-70">n</span></sup><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-16008x4"><span 
class="pplr8t-x-x-90">For each of the previous three questions, comment on whether you think it is easier to read the</span>
     <span 
class="pplr8t-x-x-90">function with or without pattern matching. How might you expect this to change if the functions</span>
     <span 
class="pplr8t-x-x-90">were much larger?</span>
     </li>
     <li 
  class="enumerate" id="x1-16010x5"><span 
class="pplr8t-x-x-90">What does  </span><span 
class="fvmb8t-x-x-81">match </span><span 
class="fvmr8t-x-x-81">1 + 1 </span><span 
class="fvmb8t-x-x-81">with </span><span 
class="fvmr8t-x-x-81">2 -> </span><span 
class="fvmb8t-x-x-81">match </span><span 
class="fvmr8t-x-x-81">2 + 2 </span><span 
class="fvmb8t-x-x-81">with </span><span 
class="fvmr8t-x-x-81">3 -> 4 | 4 -> 5 </span><span 
class="pplr8t-x-x-90">evaluate to?</span>
     </li>
     <li 
  class="enumerate" id="x1-16012x6"><span 
class="pplr8t-x-x-90">There is a special pattern </span><span 
class="fvmr8t-x-x-81">x..y </span><span 
class="pplr8t-x-x-90">to denote continuous ranges of characters, for example </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">..</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">'</span>
     <span 
class="pplr8t-x-x-90">will match all lowercase letters. Write functions </span><span 
class="fvmr8t-x-x-81">islower </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">isupper</span><span 
class="pplr8t-x-x-90">, each of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">,</span>
     <span 
class="pplr8t-x-x-90">to decide on the case of a given letter.</span></li></ol>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 1056--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-170003"></a></h2>
<!--l. 1057--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 1061--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 1061--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 1064--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 1064--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 1067--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 1067--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
                                                                               
                                                                               
<!--l. 1074--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;4</span></span><br /><a 
 id="x1-180004"></a><span 
class="pplr8t-x-x-90">Making Lists</span></h2>
<!--l. 1076--><p class="noindent" ><span 
class="pplr8t-x-x-90">A</span> <a 
 id="dx1-18001"></a><a 
 id="dx1-18002"></a><span 
class="pplri8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">is a collection of</span> <a 
 id="dx1-18003"></a><span 
class="pplr8t-x-x-90">elements. Here is a list of three integers:</span>
<a 
 id="dx1-18004"></a>
<!--l. 1080--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3]</span></span></span>
<!--l. 1083--><p class="noindent" ><span 
class="pplr8t-x-x-90">We write a list between square brackets </span><span 
class="fvmr8t-x-x-81">[ </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">]</span><span 
class="pplr8t-x-x-90">, separating the elements with semicolons. The list above</span>
<span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int list</span><span 
class="pplr8t-x-x-90">, because it is a list of integers. All elements of the list must have the same type.</span>
<span 
class="pplr8t-x-x-90">The elements in the list are ordered (in other words, </span><span 
class="fvmr8t-x-x-81">[1; 2; 3] </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">[2; 3; 1] </span><span 
class="pplr8t-x-x-90">are not the same</span>
<span 
class="pplr8t-x-x-90">list).</span>
<!--l. 1085--><p class="indent" >   <span 
class="pplr8t-x-x-90">The first element is called the</span> <a 
 id="dx1-18005"></a><span 
class="pplri8t-x-x-90">head</span><span 
class="pplr8t-x-x-90">, and the rest are collectively called the</span> <a 
 id="dx1-18006"></a><span 
class="pplri8t-x-x-90">tail</span><span 
class="pplr8t-x-x-90">. In our example, the head is the</span>
<span 
class="pplr8t-x-x-90">integer </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span> <span 
class="pplr8t-x-x-90">and the tail is the list </span><span 
class="fvmr8t-x-x-81">[2; 3]</span><span 
class="pplr8t-x-x-90">. So you can see that the tail has the same type as the whole list. Here is a</span>
<span 
class="pplr8t-x-x-90">list with no elements (called &#8220;the empty list&#8221; or sometimes &#8220;nil&#8221;):</span>
<!--l. 1088--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[]</span></span></span>
<!--l. 1091--><p class="noindent" ><span 
class="pplr8t-x-x-90">It has neither a head nor a tail. Here is a list with just a single element:</span>
<!--l. 1094--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[5]</span></span></span>
<!--l. 1097--><p class="noindent" ><span 
class="pplr8t-x-x-90">Its head is the integer </span><span 
class="fvmr8t-x-x-81">5 </span><span 
class="pplr8t-x-x-90">and its tail is the empty list </span><span 
class="fvmr8t-x-x-81">[]</span><span 
class="pplr8t-x-x-90">. So every non-empty list has both a head and a tail. Lists</span>
<span 
class="pplr8t-x-x-90">may contain elements of any type: integers, booleans, functions, even other lists. For example, here is a list</span>
<span 
class="pplr8t-x-x-90">containing elements of type </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 1100--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[false; true; false]</span><span 
class="pplr8t-x-x-90">&#x00A0;: </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">bool list</span>
<!--l. 1103--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml defines two operators for lists. The</span> <a 
 id="dx1-18007"></a><a 
 id="dx1-18008"></a><span 
class="fvmr8t-x-x-81">::</span><span 
class="pplr8t-x-x-90">&#x00A0;operator (pronounced &#8220;cons&#8221;) is used to add a single element to</span>
<span 
class="pplr8t-x-x-90">the front of an existing list: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook29x.png" alt="      false :: [true; false]
=&#x21D2;    [false; true; false]
" class="math-display" ></center>
</div>
<!--l. 1109--><p class="noindent" ><span 
class="pplr8t-x-x-90">The cons operation is completed in a constant amount of time, regardless of the length of the list. The</span> <a 
 id="dx1-18010"></a><a 
 id="dx1-18011"></a><span 
class="fvmr8t-x-x-81">@ </span><span 
class="pplr8t-x-x-90">operator</span>
<span 
class="pplr8t-x-x-90">(pronounced &#8220;append&#8221;) is used to combine two lists together: </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook30x.png" alt="       [1; 2] @ [3; 4; 5]
= &#x21D2;    [1; 2; 3; 4; 5]
" class="math-display" ></center>
</div>
<!--l. 1115--><p class="noindent" ><span 
class="pplr8t-x-x-90">This takes</span> <a 
 id="dx1-18013"></a><span 
class="pplr8t-x-x-90">time proportional to the length of the list on the left hand side of the </span><span 
class="fvmr8t-x-x-81">@ </span><span 
class="pplr8t-x-x-90">operator (that is, a list of length</span>
<span 
class="pplr8t-x-x-90">100 will take roughly twice as long as one of length 50). We will see why soon.</span>
<!--l. 1117--><p class="indent" >   <span 
class="pplr8t-x-x-90">Now, how do we write functions using lists? We can use pattern matching as usual, with some new types of</span>
<span 
class="pplr8t-x-x-90">pattern. For example, here&#8217;s a function which tells us if a list is empty:</span>
<!--l. 1121--><p class="noindent" ><img 
src="pandocfiguresmlbook31x.png" alt=""  class="fbox" >
<!--l. 1132--><p class="noindent" ><span 
class="pplr8t-x-x-90">The argument has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">(which OCaml prints on the screen as </span><span 
class="fvmr8t-x-x-81">'a list</span><span 
class="pplr8t-x-x-90">) because this function does not</span>
<span 
class="pplr8t-x-x-90">inspect the individual elements of the list, it just checks if the list is empty. And so, this function can operate over</span>
<span 
class="pplr8t-x-x-90">any type of list. The greek letters </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="pplr8t-x-x-90">etc. stand for any type. If two types are represented by the same greek</span>
<span 
class="pplr8t-x-x-90">letter they must have the same type. If they are not, they may have the same type, but do not have to. Functions</span>
<span 
class="pplr8t-x-x-90">like this are known as</span> <a 
 id="dx1-18014"></a><span 
class="pplri8t-x-x-90">polymorphic</span><span 
class="pplr8t-x-x-90">. We can also use </span><span 
class="fvmr8t-x-x-81">:: </span><span 
class="pplr8t-x-x-90">in our patterns, this time using it to deconstruct rather than</span>
<span 
class="pplr8t-x-x-90">construct the list:</span>
<!--l. 1136--><p class="noindent" ><img 
src="pandocfiguresmlbook32x.png" alt=""  class="fbox" >
<!--l. 1147--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is how the evaluation proceeds: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook33x.png" alt="      length [5; 5; 5]
=&#x21D2;    1 + length [5; 5]
          -------------
=&#x21D2;    1 + (1 + length-[5])
=&#x21D2;    1 + (1 + (1 + length-[]))    basecase
=&#x21D2;    1-+-(1-+-(1 +-0))
=*&#x21D2;    3                (=*&#x21D2; meanswearenotshowingallthe steps)
" class="math-display" ></center>
</div>
<!--l. 1157--><p class="noindent" ><span 
class="pplr8t-x-x-90">This works by</span> <a 
 id="dx1-18017"></a><span 
class="pplr8t-x-x-90">recursion over the list, then addition of all the resultant </span><span 
class="fvmr8t-x-x-81">1</span><span 
class="pplr8t-x-x-90">s. It takes time proportional to the length</span>
<span 
class="pplr8t-x-x-90">of the list. Can you see why? It also takes space proportional to the length of the list, because of</span>
<span 
class="pplr8t-x-x-90">the intermediate expression </span><span 
class="fvmr8t-x-x-81">1 + (1 + (1 + </span><span 
class="fvmr8t-x-x-81">&#x2026; </span><span 
class="pplr8t-x-x-90">which is built up before any of the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">operations are</span>
<span 
class="pplr8t-x-x-90">evaluated &#8211; this expression must be stored somewhere whilst it is being processed. Since </span><span 
class="fvmr8t-x-x-81">h </span><span 
class="pplr8t-x-x-90">is not</span>
<span 
class="pplr8t-x-x-90">used in the expression </span><span 
class="fvmr8t-x-x-81">1 + length t</span><span 
class="pplr8t-x-x-90">, this function is also polymorphic. Indeed we can replace </span><span 
class="fvmr8t-x-x-81">h</span>
<span 
class="pplr8t-x-x-90">in the pattern with </span><span 
class="fvmr8t-x-x-81">_ </span><span 
class="pplr8t-x-x-90">since there is no use giving a name to something we are not going to refer</span>
<span 
class="pplr8t-x-x-90">to:</span>
<!--l. 1161--><p class="noindent" ><img 
src="pandocfiguresmlbook34x.png" alt=""  class="fbox" >
<!--l. 1172--><p class="noindent" ><span 
class="pplr8t-x-x-90">A very similar function can be used to add a list of integers:</span>
<!--l. 1176--><p class="noindent" ><img 
src="pandocfiguresmlbook35x.png" alt=""  class="fbox" >
<!--l. 1187--><p class="noindent" ><span 
class="pplr8t-x-x-90">However, since we are actually using the individual list elements (by adding them up), this function is not</span>
<span 
class="pplr8t-x-x-90">polymorphic &#8211; it operates over lists of type </span><span 
class="pplb8t-x-x-90">int list </span><span 
class="pplr8t-x-x-90">only. If we accidentally miss out a</span> <a 
 id="dx1-18018"></a><span 
class="pplr8t-x-x-90">case, OCaml will alert us,</span>
<span 
class="pplr8t-x-x-90">and give an example pattern which is not matched:</span>
<!--l. 1191--><p class="noindent" ><img 
src="pandocfiguresmlbook36x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 1205--><p class="noindent" ><span 
class="pplr8t-x-x-90">There is a way to deal with the excessive space usage from the building up of a large intermediate expression </span><span 
class="fvmr8t-x-x-81">1 +</span>
<span 
class="fvmr8t-x-x-81">1 + 1 + </span><span 
class="fvmr8t-x-x-81">&#x2026; </span><span 
class="pplr8t-x-x-90">in our </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">function, at the cost of readability. We can &#8220;accumulate&#8221; the </span><span 
class="fvmr8t-x-x-81">1s </span><span 
class="pplr8t-x-x-90">as we go along in an</span>
<span 
class="pplr8t-x-x-90">extra argument. At each recursive step, the</span> <a 
 id="dx1-18019"></a><a 
 id="dx1-18020"></a> <span 
class="pplr8t-x-x-90">accumulating argument is increased by one. When we have finished,</span>
<span 
class="pplr8t-x-x-90">the total is returned:</span>
<!--l. 1209--><p class="noindent" ><img 
src="pandocfiguresmlbook37x.png" alt=""  class="fbox" >
<!--l. 1223--><p class="noindent" ><span 
class="pplr8t-x-x-90">We wrapped it up in another function to make sure we do not call it with a bad initial value for the accumulating</span>
<span 
class="pplr8t-x-x-90">argument. Here is an example evaluation: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook38x.png" alt="       length [5; 5; 5]
= &#x21D2;    length_inner [5; 5; 5] 0
= &#x21D2;    length_inner-[5;-5]-1---
       --------------------
= &#x21D2;    length_inner-[5]-2
= &#x21D2;    length_inner-[]-3           basecase
= &#x21D2;    3
" class="math-display" ></center>
</div>
<!--l. 1233--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, the space taken by the calculation does not relate in any way to the length of the list argument. Recursive</span>
<span 
class="pplr8t-x-x-90">functions which do not build up a growing intermediate expression are known as</span> <a 
 id="dx1-18022"></a><span 
class="pplri8t-x-x-90">tail recursive</span><span 
class="pplr8t-x-x-90">. Functions can, of</span>
<span 
class="pplr8t-x-x-90">course, return lists too. Here is a function to return the list consisting of the first, third, fifth and so on elements in</span>
<span 
class="pplr8t-x-x-90">a list:</span>
<!--l. 1237--><p class="noindent" ><img 
src="pandocfiguresmlbook39x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 1249--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the evaluation of </span><span 
class="fvmr8t-x-x-81">odd_elements [2; 4; 2; 4; 2]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook40x.png" alt="      odd_elements [2; 4; 2; 4; 2]
=&#x21D2;    2 :: odd_elements [2; 4; 2]
           ---------------------
=&#x21D2;    2 :: 2 :: odd_elements-[2]
=&#x21D2;    2-::-2-::-[2]
=*&#x21D2;    [2; 2; 2]
" class="math-display" ></center>
</div>
<!--l. 1258--><p class="noindent" ><span 
class="pplr8t-x-x-90">You might notice that the first two cases in the pattern match return exactly their argument. By reversing the</span>
<span 
class="pplr8t-x-x-90">order, we can reduce this function to just two cases:</span>
<!--l. 1262--><p class="noindent" ><img 
src="pandocfiguresmlbook41x.png" alt=""  class="fbox" >
<!--l. 1273--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have seen how to use the </span><span 
class="fvmr8t-x-x-81">@ </span><span 
class="pplr8t-x-x-90">(append) operator to concatenate two lists: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook42x.png" alt="       [1;-2]-@ [3;-4;-5]
= &#x21D2;    [1; 2; 3; 4; 5]
" class="math-display" ></center>
</div>
<!--l. 1279--><p class="noindent" ><span 
class="pplr8t-x-x-90">How might we implement list append ourselves, if it was not provided? Consider a function </span><span 
class="fvmr8t-x-x-81">append a b</span><span 
class="pplr8t-x-x-90">. If</span>
<span 
class="pplr8t-x-x-90">the list </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">is the empty list, the answer is simply </span><span 
class="fvmr8t-x-x-81">b</span><span 
class="pplr8t-x-x-90">. But what if </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">is not empty? Then it has a head </span><span 
class="fvmr8t-x-x-81">h</span>
<span 
class="pplr8t-x-x-90">and a tail </span><span 
class="fvmr8t-x-x-81">t</span><span 
class="pplr8t-x-x-90">. So we can start our result list with the head, and the rest of the result is just </span><span 
class="fvmr8t-x-x-81">append t</span>
<span 
class="fvmr8t-x-x-81">b</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 1283--><p class="noindent" ><img 
src="pandocfiguresmlbook43x.png" alt=""  class="fbox" >
<!--l. 1294--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the evaluation of </span><span 
class="fvmr8t-x-x-81">append [1; 2; 3] [4; 5; 6]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook44x.png" alt="       append-[1;-2;-3] [4;-5;-6]
=&#x21D2;     1 :: append-[2; 3]-[4;-5;-6]
=&#x21D2;     1 :: 2 :: append [3] [4; 5; 6]
                -------------------
=&#x21D2;     1 :: 2 :: 3 :: append-[]-[4;-5;-6]
=&#x21D2;     1 ::-2-::-3-::-[4;-5;-6]
=*&#x21D2;     [1; 2; 3; 4; 5; 6]
" class="math-display" ></center>
</div>
<!--l. 1304--><p class="noindent" ><span 
class="pplr8t-x-x-90">This takes time proportional to the length of the first list &#8211; the second list need not be processed at all. What</span>
<span 
class="pplr8t-x-x-90">about</span> <a 
 id="dx1-18026"></a><a 
 id="dx1-18027"></a><span 
class="pplr8t-x-x-90">reversing a list? For example, we want </span><span 
class="fvmr8t-x-x-81">rev [1; 2; 3; 4] </span><span 
class="pplr8t-x-x-90">to evaluate to </span><span 
class="fvmr8t-x-x-81">[4; 3; 2; 1]</span><span 
class="pplr8t-x-x-90">. One</span>
<span 
class="pplr8t-x-x-90">simple way is to reverse the tail of the list, and append the list just containing the head to the end of</span>
<span 
class="pplr8t-x-x-90">it:</span>
<!--l. 1308--><p class="noindent" ><img 
src="pandocfiguresmlbook45x.png" alt=""  class="fbox" >
<!--l. 1319--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here&#8217;s how the evaluation proceeds: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook46x.png" alt="      rev [1; 2; 3; 4]
=&#x21D2;    rev-[2;-3;-4]@-[1]
      -------------
=&#x21D2;    rev-[3;-4] @ [2] @ [1]
=&#x21D2;    rev-[4] @ [3] @ [2] @ [1]
=&#x21D2;    rev-[]-@-[4]-@ [3]-@-[2]-@-[1]
=&#x21D2;    []-@-[4]-@-[3] @-[2]-@-[1]
 *
=&#x21D2;    [4; 3; 2; 1]
" class="math-display" ></center>
</div>
<!--l. 1330--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is a simple definition, but not very efficient &#8211; can you see why?</span>
<!--l. 1332--><p class="indent" >   <span 
class="pplr8t-x-x-90">Two more useful functions for processing lists are </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">which, given a number and a list, either</span>
<a 
 id="dx1-18029"></a><span 
class="pplr8t-x-x-90">take or</span> <a 
 id="dx1-18030"></a><span 
class="pplr8t-x-x-90">drop that many elements from the list:</span>
<!--l. 1336--><p class="noindent" ><img 
src="pandocfiguresmlbook47x.png" alt=""  class="fbox" >
<!--l. 1353--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, here&#8217;s the evaluation for </span><span 
class="fvmr8t-x-x-81">take 2 [2; 4; 6; 8; 10]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook48x.png" alt="       take-2 [2;-4;-6;-8; 10]
=&#x21D2;     2 :: take-1-[4;-6;-8;-10]-
=&#x21D2;     2 :: 4 :: take-0-[6; 8;-10]
=&#x21D2;     2-::-4 ::-[]
=*&#x21D2;     [2; 4]
" class="math-display" ></center>
</div>
                                                                               
                                                                               
<!--l. 1362--><p class="noindent" ><span 
class="pplr8t-x-x-90">And for </span><span 
class="fvmr8t-x-x-81">drop 2 [2; 4; 6; 8; 10]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook49x.png" alt="       drop 2-[2;-4;-6;-8;-10]
       drop 1-[4;-6;-8;-10]
=&#x21D2;     drop 0 [6; 8; 10]
=&#x21D2;     [6; 8;-10]------
" class="math-display" ></center>
</div>
<!--l. 1370--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that these functions contain incomplete pattern matches &#8211; OCaml tells us so when we type them in. The</span>
<span 
class="pplr8t-x-x-90">function fails if the arguments are not sensible &#8211; that is, when we are asked to take or drop more elements than</span>
<span 
class="pplr8t-x-x-90">are in the argument list. Later on, we will see how to deal with that problem. Note also that for any sensible value</span>
<span 
class="pplr8t-x-x-90">of </span><span 
class="fvmr8t-x-x-81">n</span><span 
class="pplr8t-x-x-90">, including zero, </span><span 
class="fvmr8t-x-x-81">take n l </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop n l </span><span 
class="pplr8t-x-x-90">split the list into two parts with no gap. So </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">often</span>
<span 
class="pplr8t-x-x-90">appear in pairs.</span>
<!--l. 1372--><p class="indent" >   <span 
class="pplr8t-x-x-90">Lists can contain anything, so long as all elements are of the same type. So, of course, a list can contain lists.</span>
<span 
class="pplr8t-x-x-90">Here&#8217;s a list of lists of integers:</span>
<!--l. 1375--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[[1]; [2; 3]; [4; 5; 6]]</span><span 
class="pplr8t-x-x-90">&#x00A0;: </span><span 
class="pplr8t-x-x-90">&#x00A0;(</span><span 
class="pplb8t-x-x-90">int list</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list</span>
<!--l. 1377--><p class="noindent" ><span 
class="pplri8t-x-x-90">(We can also just write </span><span 
class="pplb8t-x-x-90">int list list</span><span 
class="pplbi8t-x-x-90">)</span><span 
class="pplr8t-x-x-90">. Each element of this list is of type </span><span 
class="pplb8t-x-x-90">int list</span><span 
class="pplr8t-x-x-90">. Within values of this type, it is</span>
<span 
class="pplr8t-x-x-90">important to distinguish the list of lists containing no elements</span>
<!--l. 1380--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[] :</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list</span>
<!--l. 1383--><p class="noindent" ><span 
class="pplr8t-x-x-90">from the</span> <a 
 id="dx1-18033"></a><span 
class="pplr8t-x-x-90">list of lists containing one element which is the empty list</span>
<!--l. 1386--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[[]] :</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-190004"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 1393--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-19002x1"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">evens </span><span 
class="pplr8t-x-x-90">which does the opposite to </span><span 
class="fvmr8t-x-x-81">odds</span><span 
class="pplr8t-x-x-90">, returning the even numbered elements</span>
     <span 
class="pplr8t-x-x-90">in  a  list.  For  example,  </span><span 
class="fvmr8t-x-x-81">evens [2; 4; 2; 4; 2] </span><span 
class="pplr8t-x-x-90">should  return  </span><span 
class="fvmr8t-x-x-81">[4; 4]</span><span 
class="pplr8t-x-x-90">.  What  is  the  type  of  your</span>
     <span 
class="pplr8t-x-x-90">function?</span>
     </li>
     <li 
  class="enumerate" id="x1-19004x2"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">count_true </span><span 
class="pplr8t-x-x-90">which counts the number of </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">elements in a list. For example,</span>
     <span 
class="fvmr8t-x-x-81">count_true [true; false; true] </span><span 
class="pplr8t-x-x-90">should return </span><span 
class="fvmr8t-x-x-81">2</span><span 
class="pplr8t-x-x-90">. What is the type of your function? Can you</span>
     <span 
class="pplr8t-x-x-90">write a tail recursive version?</span>
     </li>
     <li 
  class="enumerate" id="x1-19006x3"><span 
class="pplr8t-x-x-90">Write  a  function  which,  given  a  list,  builds  a  palindrome  from  it.  A  palindrome  is  a  list  which</span>
     <span 
class="pplr8t-x-x-90">equals its own reverse. You can assume the existence of </span><span 
class="fvmr8t-x-x-81">rev </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">@</span><span 
class="pplr8t-x-x-90">. Write another function which</span>
     <span 
class="pplr8t-x-x-90">determines if a list is a palindrome.</span>
     </li>
     <li 
  class="enumerate" id="x1-19008x4"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">drop_last </span><span 
class="pplr8t-x-x-90">which returns all but the last element of a list. If the list is empty, it</span>
     <span 
class="pplr8t-x-x-90">should return the empty list. So, for example, </span><span 
class="fvmr8t-x-x-81">drop_last [1; 2; 4; 8] </span><span 
class="pplr8t-x-x-90">should return </span><span 
class="fvmr8t-x-x-81">[1; 2; 4]</span><span 
class="pplr8t-x-x-90">.</span>
     <span 
class="pplr8t-x-x-90">What about a tail recursive version?</span>
     </li>
     <li 
  class="enumerate" id="x1-19010x5"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">which returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if an element exists in a list,</span>
     <span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">if not. For example, </span><span 
class="fvmr8t-x-x-81">member 2 [1; 2; 3] </span><span 
class="pplr8t-x-x-90">should evaluate to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">, but </span><span 
class="fvmr8t-x-x-81">member 3 [1; 2]</span>
     <span 
class="pplr8t-x-x-90">should evaluate to </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-19012x6"><span 
class="pplr8t-x-x-90">Use your </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">function to write a function </span><span 
class="fvmr8t-x-x-81">make_set </span><span 
class="pplr8t-x-x-90">which, given a list, returns a list which</span>
     <span 
class="pplr8t-x-x-90">contains all the elements of the original list, but has no duplicate elements. For example, </span><span 
class="fvmr8t-x-x-81">make_set</span>
     <span 
class="fvmr8t-x-x-81">[1; 2; 3; 3; 1] </span><span 
class="pplr8t-x-x-90">might return </span><span 
class="fvmr8t-x-x-81">[2; 3; 1]</span><span 
class="pplr8t-x-x-90">. What is the type of your function?</span>
     </li>
     <li 
  class="enumerate" id="x1-19014x7"><span 
class="pplr8t-x-x-90">Can you explain why the </span><span 
class="fvmr8t-x-x-81">rev </span><span 
class="pplr8t-x-x-90">function we defined is inefficient? How does the time it takes to run</span>
     <span 
class="pplr8t-x-x-90">relate to the size of its argument? Can you write a more efficient version using an accumulating</span>
     <span 
class="pplr8t-x-x-90">argument? What is its efficiency in terms of time taken and space used?</span></li></ol>
                                                                               
                                                                               
<!--l. 1403--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 1405--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-200004"></a></h2>
<!--l. 1406--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 1410--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 1410--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 1413--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 1413--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 1416--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 1416--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 1419--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 1419--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
                                                                               
                                                                               
<!--l. 1425--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-210004"></a><span 
class="pplr8t-x-x-90">Two Different Ways of Thinking</span></h2>
<a 
 id="Q1-1-23"></a>
<!--l. 1428--><p class="noindent" ><span 
class="pplr8t-x-x-90">Look again at our list appending function:</span>
<!--l. 1432--><p class="noindent" ><img 
src="pandocfiguresmlbook50x.png" alt=""  class="fbox" >
<!--l. 1443--><p class="noindent" ><span 
class="pplr8t-x-x-90">There are two ways to think about this computation. One way is to imagine the actions the computer might take</span>
<span 
class="pplr8t-x-x-90">to calculate the result:</span>
     <div class="quote">
     <!--l. 1446--><p class="noindent" ><span 
class="pplri8t-x-x-90">Look at the first list. If it is empty, return the second list. Otherwise, pull apart the first list, looking</span>
     <span 
class="pplri8t-x-x-90">at its head and tail. Make a recursive call to append the tail to the second list, and then cons the head</span>
     <span 
class="pplri8t-x-x-90">onto the result. Return this.</span></div>
<!--l. 1449--><p class="noindent" ><span 
class="pplr8t-x-x-90">Alternatively, we can consider each match case to be an independent statement of truth, thinking the same way</span>
<span 
class="pplr8t-x-x-90">about the whole function:</span>
     <div class="quote">
     <!--l. 1452--><p class="noindent" ><span 
class="pplri8t-x-x-90">The empty list appended to another list is that list. Otherwise, the first list is non-empty, so it has a</span>
     <span 
class="pplri8t-x-x-90">head and a tail. Call them </span><span 
class="fvmro8t-x-x-81">h </span><span 
class="pplri8t-x-x-90">and </span><span 
class="fvmro8t-x-x-81">t</span><span 
class="pplri8t-x-x-90">. Clearly </span><span 
class="fvmro8t-x-x-81">append (h ::</span><span 
class="fvmro8t-x-x-81">&#x00A0;t) b </span><span 
class="pplri8t-x-x-90">is equal to </span><span 
class="fvmro8t-x-x-81">h ::</span><span 
class="fvmro8t-x-x-81">&#x00A0;append t b</span><span 
class="pplri8t-x-x-90">. Since</span>
     <span 
class="pplri8t-x-x-90">this reduces the problem size, progress is made.</span></div>
<!--l. 1455--><p class="noindent" ><span 
class="pplr8t-x-x-90">It is very useful to be able to think in these two ways about functions you write, and to be able to swap between</span>
<span 
class="pplr8t-x-x-90">them in the mind with ease.</span>
                                                                               
                                                                               
<!--l. 1457--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;5</span></span><br /><a 
 id="x1-220005"></a><span 
class="pplr8t-x-x-90">Sorting Things</span></h2>
<!--l. 1460--><p class="noindent" ><span 
class="pplr8t-x-x-90">Lists often need to be in</span> <a 
 id="dx1-22001"></a><a 
 id="dx1-22002"></a><span 
class="pplr8t-x-x-90">sorted order. How might we write a function to sort a list of integers? Well, a list with</span>
<span 
class="pplr8t-x-x-90">zero elements is already sorted. If we do not have an empty list, we must have a head and a tail. What can we do</span>
<span 
class="pplr8t-x-x-90">with those? Well, we can sort the tail by a recursive call to our </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function. So, now we have the head, and an</span>
<span 
class="pplr8t-x-x-90">already sorted list. Now, we just need to write a function to insert the head in an already sorted list. We have</span>
<span 
class="pplr8t-x-x-90">reduced the problem to an easier one.</span>
<!--l. 1464--><p class="noindent" ><img 
src="pandocfiguresmlbook51x.png" alt=""  class="fbox" >
<!--l. 1475--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we just need to write the </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">function. This takes an element and an already-sorted list, and returns the</span>
<span 
class="pplr8t-x-x-90">list with the element inserted in the right place:</span>
<!--l. 1479--><p class="noindent" ><img 
src="pandocfiguresmlbook52x.png" alt=""  class="fbox" >
<!--l. 1493--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the evaluation of </span><span 
class="fvmr8t-x-x-81">insert 3 [1; 1; 2; 3; 5; 9]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook53x.png" alt="       insert 3 [1; 1; 2; 3; 5; 9]
       --------------------------
= &#x21D2;    1 :: insert-3-[1;-2;-3; 5;-9]
= &#x21D2;    1 :: 1 :: insert-3-[2; 3;-5;-9]
= &#x21D2;    1 :: 1 :: 2 :: insert-3 [3;-5;-9]
= &#x21D2;    1-::-1-:: 2-::-3-::-3-::-[5;-9]
  *
= &#x21D2;    [1; 1; 2; 3; 3; 5; 9]
" class="math-display" ></center>
</div>
<!--l. 1503--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is the whole evaluation of </span><span 
class="fvmr8t-x-x-81">sort [53; 9; 2; 6; 19]</span><span 
class="pplr8t-x-x-90">. We have missed out the detail of each </span><span 
class="fvmr8t-x-x-81">insert</span>
<span 
class="pplr8t-x-x-90">operation. </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook54x.png" alt="       sort-[53;-9;-2;-6;-19]-
=*&#x21D2;     insert 53 (sort-[9;-2;-6;-19])
=*&#x21D2;     insert 53 (insert 9 (sort [2; 6; 19]))
 *                       ----------------
=&#x21D2;     insert 53 (insert 9 (insert 2 (sort-[6;-19])))
=*&#x21D2;     insert 53 (insert 9 (insert 2 (insert 6 (sort [19]))))
 *
=&#x21D2;     insert 53 (insert 9 (insert 2 (insert 6 (insert 19 (sort-[])))))
=*&#x21D2;     insert 53 (insert 9 (insert 2 (insert 6 (insert-19-[]))))
=*&#x21D2;     insert 53 (insert 9 (insert 2 (insert 6 [19])))
 *                                 --------------
=&#x21D2;     insert 53 (insert 9 (insert-2-[6;-19]))
=*&#x21D2;     insert 53 (insert 9 [2; 6; 19])
 *              --------------------
=&#x21D2;     insert-53-[2;-6; 9;-19]
=*&#x21D2;     [2; 6; 9; 19; 53]
" class="math-display" ></center>
</div>
<!--l. 1519--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here&#8217;s the full program, known as</span> <a 
 id="dx1-22005"></a><span 
class="pplri8t-x-x-90">insertion sort</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 1523--><p class="noindent" ><img 
src="pandocfiguresmlbook55x.png" alt=""  class="fbox" >
<!--l. 1543--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that the type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">rather than </span><span 
class="pplb8t-x-x-90">int list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int list</span><span 
class="pplr8t-x-x-90">. This is because OCaml&#8217;s comparison functions</span>
<span 
class="pplr8t-x-x-90">like </span><span 
class="fvmr8t-x-x-81"><= </span><span 
class="pplr8t-x-x-90">(used inside </span><span 
class="fvmr8t-x-x-81">insert</span><span 
class="pplr8t-x-x-90">) work for types other than </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. For example, OCaml knows how to compare</span>
<span 
class="pplr8t-x-x-90">characters in alphabetical order: </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook56x.png" alt="      sort-['p'; 'i';-'m';-'c';-'s';-'h']
=*&#x21D2;    ['c'; 'h'; 'i'; 'm'; 'p'; 's']
" class="math-display" ></center>
</div>
<!--l. 1549--><p class="noindent" ><span 
class="pplr8t-x-x-90">How long does our sorting function take to run if the list to be sorted has </span><span 
class="zptmcm7m-x-x-90">n </span><span 
class="pplr8t-x-x-90">elements? Under the assumption that</span>
<span 
class="pplr8t-x-x-90">our argument list is arbitrarily ordered rather than sorted, each </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">operation takes time proportional to </span><span 
class="zptmcm7m-x-x-90">n</span>
<span 
class="pplr8t-x-x-90">(the element might need to be inserted anywhere). We must run the </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">function as many times as there</span>
<span 
class="pplr8t-x-x-90">are elements so, adding these all up, the </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function takes time proportional to </span><span 
class="zptmcm7m-x-x-90">n</span><sup><span 
class="zptmcm7t-x-x-70">2</span></sup><span 
class="pplr8t-x-x-90">. You might</span>
<span 
class="pplr8t-x-x-90">argue that the first </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">operations only have to work with a very small list, and that this fact</span>
<span 
class="pplr8t-x-x-90">should make the time less that </span><span 
class="zptmcm7m-x-x-90">n</span><sup><span 
class="zptmcm7t-x-x-70">2</span></sup><span 
class="pplr8t-x-x-90">. Can you see why that is not true? What happens if the list is sorted</span>
<span 
class="pplr8t-x-x-90">already?</span>
<!--l. 1551--><p class="indent" >   <span 
class="pplr8t-x-x-90">A more efficient algorithm can be found by considering a basic operation a little more complex than </span><span 
class="fvmr8t-x-x-81">insert</span><span 
class="pplr8t-x-x-90">,</span>
<span 
class="pplr8t-x-x-90">but which still operates in time proportional to the length of the argument list. Such a function is </span><span 
class="fvmr8t-x-x-81">merge</span><span 
class="pplr8t-x-x-90">, which</span>
<span 
class="pplr8t-x-x-90">takes two already sorted lists, and returns a single sorted list:</span>
<!--l. 1555--><p class="noindent" ><img 
src="pandocfiguresmlbook57x.png" alt=""  class="fbox" >
<!--l. 1570--><p class="noindent" ><span 
class="pplr8t-x-x-90">When </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">y </span><span 
class="pplr8t-x-x-90">are both the empty list, the first case is picked because </span><span 
class="fvmr8t-x-x-81">l </span><span 
class="pplr8t-x-x-90">matches the empty list. Here is how </span><span 
class="fvmr8t-x-x-81">merge</span>
<span 
class="pplr8t-x-x-90">proceeds: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook58x.png" alt="       merge [9; 53] [2; 6; 19]
=&#x21D2;     2-::-(merge-[9;-53]-[6;-19])
           ----------------------
=&#x21D2;     2 :: 6 :: (merge [9;-53]-[19])
=&#x21D2;     2 :: 6 :: 9 :: (merge-[53]-[19])-
=&#x21D2;     2 :: 6 :: 9 :: 19 :: (merge-[53]-[])
=&#x21D2;     2-::-6-::-9-::-19 ::-[53]
 *
=&#x21D2;     [2; 6; 9; 19; 53]
" class="math-display" ></center>
</div>
<!--l. 1581--><p class="noindent" ><span 
class="pplr8t-x-x-90">So merge can take two sorted lists, and produce a longer, sorted list, containing all the elements from both lists.</span>
<span 
class="pplr8t-x-x-90">So, how can we use this to sort a list from scratch? Well, we can use </span><span 
class="fvmr8t-x-x-81">length</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">take</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">from the previous</span>
<span 
class="pplr8t-x-x-90">chapter to split the list into two halves. Now, we must use a recursive call to sort each half, and then we can</span>
<span 
class="pplr8t-x-x-90">merge them. This is known as</span> <a 
 id="dx1-22008"></a><span 
class="pplri8t-x-x-90">merge sort</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 1585--><p class="noindent" ><img 
src="pandocfiguresmlbook59x.png" alt=""  class="fbox" >
<!--l. 1600--><p class="noindent" ><span 
class="pplr8t-x-x-90">The case for the single element is required because, if we split it into two halves, of length one and zero, the</span>
<span 
class="pplr8t-x-x-90">recursion would not end &#8211; we would not have reduced the size of the problem.</span>
<!--l. 1602--><p class="indent" >   <span 
class="pplr8t-x-x-90">How does </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">work? Consider the evaluation of </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">on the list </span><span 
class="fvmr8t-x-x-81">[53; 9; 2; 6; 19]</span><span 
class="pplr8t-x-x-90">. We will</span>
<span 
class="pplr8t-x-x-90">skip the evaluation of the </span><span 
class="fvmr8t-x-x-81">merge</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">drop</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">take</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">functions, concentrating just on </span><span 
class="fvmr8t-x-x-81">msort</span><span 
class="pplr8t-x-x-90">:</span>
<div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook60x.png" alt="      msort [53; 9; 2; 6 19]
 *    ---------------------
=&#x21D2;    merge (msort-[53;-9]) (msort [2; 6; 19])
=*&#x21D2;    merge (merge (msort-[53]) (msort [9])) (msort [2; 6; 19])
 *
=&#x21D2;*    merge (merge [53] (msort-[9])) (msort [2; 6; 19])
=&#x21D2;    merge (merge-[53]-[9]) (msort [2; 6; 19])
=*&#x21D2;    merge [9; 53] (msort [2; 6; 19])
 *                  ---------------
=&#x21D2;    merge [9; 53] (merge (msort [2]) (msort [6; 19])
=*&#x21D2;    merge [9; 53] (merge [2] (msort-[6;-19]))
=*&#x21D2;    merge [9; 53] (merge [2] (merge (msort [6]) (msort [19])))
 *                                   ---------
=&#x21D2;    merge [9; 53] (merge [2] (merge [6] (msort [19])))
=*&#x21D2;    merge [9; 53] (merge [2] (merge-[6]-[19]))
 *
=&#x21D2;    merge [9; 53] (merge-[2]-[6; 19])
=*&#x21D2;    merge-[9;-53] [2;-6;-19]
=*&#x21D2;    [2; 6; 9; 19; 53]
" class="math-display" ></center>
</div>
<!--l. 1620--><p class="noindent" ><span 
class="pplr8t-x-x-90">From now on we will not be showing these full evaluations all the time &#8211; but when you&#8217;re unsure of how or why</span>
<span 
class="pplr8t-x-x-90">a function works, you can always write them out on paper yourself.</span>
   <h3 class="likesectionHead"><a 
 id="x1-230005"></a><span 
class="pplr8t-x-x-90">How long does it take?</span></h3>
<!--l. 1624--><p class="noindent" ><span 
class="pplr8t-x-x-90">How long does merge sort take to run? We can visualize it with the following diagram, in which we have chosen</span>
<span 
class="pplr8t-x-x-90">a list of length eight (a power of two) for convenience.</span>
<!--l. 1627--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[6; 4; 5; 7; 2; 5; 3; 4]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[6; 4; 5; 7][2; 5; 3; 4]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[6; 4][5; 7][2; 5][3; 4]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[6][4][5][7][2][5][3][4]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[4; 6][5; 7][2; 5][3; 4]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[4; 5; 6; 7][2; 3; 4; 5]</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">[2; 3; 4; 4; 5; 5; 6; 7]</span>
<!--l. 1636--><p class="noindent" ><span 
class="pplr8t-x-x-90">In the top half of the diagram, the lists are being taken apart using </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop</span><span 
class="pplr8t-x-x-90">, until they are small enough to</span>
<span 
class="pplr8t-x-x-90">already be sorted. In the bottom half, they are being merged back together.</span>
<!--l. 1638--><p class="indent" >   <span 
class="pplr8t-x-x-90">How long does each row take? For the top half: to split a list into two halves takes time proportional to the</span>
<span 
class="pplr8t-x-x-90">length of the list. On the first line, we do this once on a list of length eight. On the second line, we do it twice on</span>
<span 
class="pplr8t-x-x-90">lists of length four, and so on. So each line takes the same time overall. For the bottom half, we have another</span>
<span 
class="pplr8t-x-x-90">function which takes time proportional to the length of its argument &#8211; </span><span 
class="fvmr8t-x-x-81">merge </span><span 
class="pplr8t-x-x-90">&#8211; so each line in the bottom half</span>
<span 
class="pplr8t-x-x-90">takes time proportional to the length too.</span>
<!--l. 1640--><p class="indent" >   <span 
class="pplr8t-x-x-90">So, how many lines do we have? Well, in the top half we have roughly</span> <span 
class="zptmcm7t-x-x-90">log</span><sub><span 
class="zptmcm7t-x-x-70">2</span></sub><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">, and the same for the bottom</span>
<span 
class="pplr8t-x-x-90">half. So, the total work done is </span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">log</span><sub><span 
class="zptmcm7t-x-x-70">2</span></sub><span 
class="zptmcm7m-x-x-90">n</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">, which is proportional to </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="zptmcm7t-x-x-90">log</span><sub><span 
class="zptmcm7t-x-x-70">2</span></sub><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-240005"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 1645--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-24002x1"><span 
class="pplr8t-x-x-90">In </span><span 
class="fvmr8t-x-x-81">msort</span><span 
class="pplr8t-x-x-90">, we calculate the value of the expression </span><span 
class="fvmr8t-x-x-81">length l / 2 </span><span 
class="pplr8t-x-x-90">twice. Modify </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">to remove</span>
     <span 
class="pplr8t-x-x-90">this inefficiency.</span>
     </li>
     <li 
  class="enumerate" id="x1-24004x2"><span 
class="pplr8t-x-x-90">We know that </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">can fail if called with incorrect arguments. Show that this is never the</span>
     <span 
class="pplr8t-x-x-90">case in </span><span 
class="fvmr8t-x-x-81">msort</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-24006x3"><span 
class="pplr8t-x-x-90">Write a version of insertion sort which sorts the argument list into reverse order.</span>
     </li>
     <li 
  class="enumerate" id="x1-24008x4"><span 
class="pplr8t-x-x-90">Write a function to detect if a list is already in sorted order.</span>
     </li>
     <li 
  class="enumerate" id="x1-24010x5"><span 
class="pplr8t-x-x-90">We  mentioned  that  the  comparison  functions  like   </span><span 
class="fvmr8t-x-x-81">< </span><span 
class="pplr8t-x-x-90">work  for  many  OCaml  types.  Can  you</span>
     <span 
class="pplr8t-x-x-90">determine, by experimentation, how they work for lists? For example, what is the result of </span><span 
class="fvmr8t-x-x-81">[1; 2]</span>
     <span 
class="fvmr8t-x-x-81">< [2; 3]</span><span 
class="pplr8t-x-x-90">? What happens when we sort the following list of type </span><span 
class="pplb8t-x-x-90">char list list</span><span 
class="pplr8t-x-x-90">? Why?</span>
     <!--l. 1653--><p class="noindent" >           <span 
class="fvmr8t-x-x-81">[[</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">o</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">n</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">]; [</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">t</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">w</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">o</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">]; [</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">t</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">h</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">r</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">]]</span>
     </li>
     <li 
  class="enumerate" id="x1-24012x6"><span 
class="pplr8t-x-x-90">Combine the </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">functions into a single </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function.</span></li></ol>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 1660--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-250005"></a></h2>
<!--l. 1661--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 1665--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 1665--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 1668--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 1668--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 1671--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 1671--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 1674--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 1674--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 1677--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 1677--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
                                                                               
                                                                               
<!--l. 1684--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-260005"></a><span 
class="pplr8t-x-x-90">Loading a Program from a File</span></h2>
<a 
 id="Q1-1-29"></a>
<a 
 id="dx1-26001"></a>
<!--l. 1687--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now that we are building larger functions, we might like to store them between sessions, rather than typing</span>
<span 
class="pplr8t-x-x-90">them in every time. For example, compose a file like this in a text editor:</span>
<!--l. 1691--><p class="noindent" ><img 
src="pandocfiguresmlbook61x.png" alt=""  class="fbox" >
<!--l. 1705--><p class="noindent" ><span 
class="pplr8t-x-x-90">Save the file in same directory (folder) as you enter OCaml from, under the name </span><span 
class="fvmr8t-x-x-81">lists.ml</span><span 
class="pplr8t-x-x-90">. We can then tell</span>
<span 
class="pplr8t-x-x-90">OCaml to use the contents of that file like this:</span>
<!--l. 1709--><p class="noindent" ><img 
src="pandocfiguresmlbook62x.png" alt=""  class="fbox" >
<!--l. 1719--><p class="noindent" ><a 
 id="dx1-26002"></a><span 
class="pplr8t-x-x-90">It is exactly the same as typing it in manually &#8211; the functions </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">append </span><span 
class="pplr8t-x-x-90">will now be available for use.</span>
<span 
class="pplr8t-x-x-90">Errors and warnings will be reported as usual. Note that the </span><span 
class="fvmr8t-x-x-81">#use </span><span 
class="pplr8t-x-x-90">command is not part of the OCaml language</span>
<span 
class="pplr8t-x-x-90">for expressions &#8211; it is just a command we are giving to OCaml.</span>
                                                                               
                                                                               
<!--l. 1721--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;6</span></span><br /><a 
 id="x1-270006"></a><span 
class="pplr8t-x-x-90">Functions upon Functions upon Functions</span></h2>
<!--l. 1724--><p class="noindent" ><span 
class="pplr8t-x-x-90">Often we need to apply a function to every element of a list. For example, doubling each of the numbers in a</span>
<span 
class="pplr8t-x-x-90">list of integers. We could do this with a simple recursive function, working over each element of a</span>
<span 
class="pplr8t-x-x-90">list:</span>
<!--l. 1728--><p class="noindent" ><img 
src="pandocfiguresmlbook63x.png" alt=""  class="fbox" >
<!--l. 1739--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook64x.png" alt="      double [1; 2; 4]
=&#x21D2;    2-::-double [2;-4]
           -------------
=&#x21D2;    2 :: 4 :: double-[4]-
=&#x21D2;    2 :: 4 :: 8 :: double-[]
=&#x21D2;    2-::-4-::-8 ::-[]
=*&#x21D2;    [2; 4; 8]
" class="math-display" ></center>
</div>
<!--l. 1749--><p class="noindent" ><span 
class="pplr8t-x-x-90">The result list does not need to have the same type as the argument list. We can write a function which, given a</span>
<span 
class="pplr8t-x-x-90">list of integers, returns the list containing a boolean for each: </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if the number is even, </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">if it is</span>
<span 
class="pplr8t-x-x-90">odd.</span>
<!--l. 1753--><p class="noindent" ><img 
src="pandocfiguresmlbook65x.png" alt=""  class="fbox" >
<!--l. 1764--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook66x.png" alt="       evens-[1; 2;-4]
= &#x21D2;    false :: evens-[2;-4]
= &#x21D2;    false :: true :: evens [4]
= &#x21D2;    false :: true :: true :: evens-[]
= &#x21D2;    false :: true :: true :: []
  *    --------------------------
= &#x21D2;    [false; true; true]
" class="math-display" ></center>
</div>
<!--l. 1774--><p class="noindent" ><span 
class="pplr8t-x-x-90">It would be tedious to write a similar function each time we wanted to apply a different operation to every</span>
<span 
class="pplr8t-x-x-90">element of a list &#8211; can we build one which works for any operation? We will use a function as an</span>
<span 
class="pplr8t-x-x-90">argument:</span>
<!--l. 1778--><p class="noindent" ><img 
src="pandocfiguresmlbook67x.png" alt=""  class="fbox" >
<!--l. 1789--><p class="noindent" ><span 
class="pplr8t-x-x-90">The</span> <a 
 id="dx1-27003"></a><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">function takes two arguments: a function which processes a single element, and a list. It returns a new</span>
<span 
class="pplr8t-x-x-90">list. We will discuss the type in a moment. For example, if we have a function </span><span 
class="fvmr8t-x-x-81">halve</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 1793--><p class="noindent" ><img 
src="pandocfiguresmlbook68x.png" alt=""  class="fbox" >
<!--l. 1801--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use map like this: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook69x.png" alt="       map halve [10; 20; 30]
=&#x21D2;     5-::-map-halve-[20;-30]
            -----------------
=&#x21D2;     5 :: 10 :: map-halve [30]
=&#x21D2;     5 :: 10 :: 15 :: map halve-[]
=&#x21D2;     5-::-10 ::-15-::-[]
=*&#x21D2;     [5; 10; 15]
" class="math-display" ></center>
</div>
<!--l. 1811--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, let us look at that type: (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. We can annotate the individual parts:</span>
<!--l. 1814--><p class="indent" >
   <center class="math-display" >
<img 
src="pandocfiguresmlbook70x.png" alt="fu&#x25DC;nc&#x25DE;tio&#x25DF;nf&#x25DD;   arg&#x25DC;ume&#x25DE;n&#x25DF;t &#x25DD;list  res&#x25DC;ul&#x25DE;t&#x25DF;lis&#x25DD;t
(&#x03B1; &#x2192; &#x03B2;) &#x2192; &#x03B1; list  &#x2192;  &#x03B2; list  " class="math-display" ></center>
<!--l. 1817--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have to put the function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">in parentheses, otherwise it would look like </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">had four arguments. It can have</span>
<span 
class="pplr8t-x-x-90">any type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">. That is to say, it can have any argument and result types, and they do not have to be the same as</span>
<span 
class="pplr8t-x-x-90">each other &#8211; though they may be. The argument has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">because each of its elements must be an</span>
<span 
class="pplr8t-x-x-90">appropriate argument for </span><span 
class="fvmr8t-x-x-81">f</span><span 
class="pplr8t-x-x-90">. In the same way, the result list has type </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">because each of its elements is a result</span>
<span 
class="pplr8t-x-x-90">from </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">(in our </span><span 
class="fvmr8t-x-x-81">halve </span><span 
class="pplr8t-x-x-90">example, </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplr8t-x-x-90">were both </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">). We can rewrite our </span><span 
class="fvmr8t-x-x-81">evens </span><span 
class="pplr8t-x-x-90">function to use</span>
<span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 1821--><p class="noindent" ><img 
src="pandocfiguresmlbook71x.png" alt=""  class="fbox" >
<!--l. 1834--><p class="noindent" ><span 
class="pplr8t-x-x-90">In this use of </span><span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">was </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplr8t-x-x-90">was </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. We can make </span><span 
class="fvmr8t-x-x-81">evens </span><span 
class="pplr8t-x-x-90">still shorter: when we are just using a function</span>
<span 
class="pplr8t-x-x-90">once, we can define it directly, without naming it:</span>
                                                                               
                                                                               
<!--l. 1838--><p class="noindent" ><img 
src="pandocfiguresmlbook72x.png" alt=""  class="fbox" >
<!--l. 1847--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is called an</span> <a 
 id="dx1-27005"></a><a 
 id="dx1-27006"></a><span 
class="pplri8t-x-x-90">anonymous function</span><span 
class="pplr8t-x-x-90">. It is defined using </span><span 
class="fvmb8t-x-x-81">fun</span><span 
class="pplr8t-x-x-90">, a named argument, the </span><span 
class="fvmr8t-x-x-81">-> </span><span 
class="pplr8t-x-x-90">arrow and the function</span>
<span 
class="pplr8t-x-x-90">definition (body) itself. For example, we can write our halving function like this:</span>
<a 
 id="dx1-27007"></a>
<!--l. 1851--><p class="indent" >   <span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">x -> x / 2</span>
<!--l. 1854--><p class="noindent" ><span 
class="pplr8t-x-x-90">and, thus, write: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook73x.png" alt="       map-(fun x-->-x-/-2)-[10;-20;-30]
= *&#x21D2;    [5; 10; 15]
" class="math-display" ></center>
</div>
<!--l. 1860--><p class="noindent" ><span 
class="pplr8t-x-x-90">We use anonymous functions when a function is only used in one place and is relatively short, to avoid defining</span>
<span 
class="pplr8t-x-x-90">it separately.</span>
<!--l. 1862--><p class="indent" >   <span 
class="pplr8t-x-x-90">In the preceding chapter we wrote a sorting function and, in one of the questions, you were asked to change</span>
<span 
class="pplr8t-x-x-90">the function to use a different comparison operator so that the function would sort elements into reverse order.</span>
<span 
class="pplr8t-x-x-90">Now, we know how to write a version of the </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">function which uses any comparison function we give it. A</span>
<span 
class="pplr8t-x-x-90">comparison function would have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. That is, it takes two elements of the same type, and</span>
<span 
class="pplr8t-x-x-90">returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if the first is &#8220;greater&#8221; than the second, for some definition of &#8220;greater&#8221; &#8211; or </span><span 
class="fvmr8t-x-x-81">false</span>
<span 
class="pplr8t-x-x-90">otherwise.</span>
<!--l. 1864--><p class="indent" >   <span 
class="pplr8t-x-x-90">So, let us alter our </span><span 
class="fvmr8t-x-x-81">merge </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">functions to take an extra argument &#8211; the comparison function. The</span>
<span 
class="pplr8t-x-x-90">result is shown in Figure </span><a 
href="#x1-270091"><span 
class="pplr8t-x-x-90">6.1</span><!--tex4ht:ref: msortcomp --></a><span 
class="pplr8t-x-x-90">. Now, if we make our own comparison operator:</span>
<!--l. 1866--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-270091"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 1867--><p class="noindent" >
<!--l. 1889--><p class="noindent" ><img 
src="pandocfiguresmlbook74x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;6.1: </span><span  
class="content"><span 
class="pplr8t-x-x-90">Adding an extra argument to merge sort</span></span></div><!--tex4ht:label?: x1-270091 -->
                                                                               
                                                                               
<!--l. 1893--><p class="indent" >   </div><hr class="endfigure">
<!--l. 1898--><p class="noindent" ><img 
src="pandocfiguresmlbook75x.png" alt=""  class="fbox" >
<!--l. 1907--><p class="noindent" ><span 
class="pplr8t-x-x-90">we can use it with our new version of the </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">function: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook76x.png" alt="       msort-greater-[5;-4; 6;-2;-1]
 *
=&#x21D2;     [6; 5; 4; 2; 1]
" class="math-display" ></center>
</div>
<!--l. 1913--><p class="noindent" ><span 
class="pplr8t-x-x-90">In fact, we can ask OCaml to make such a</span><a 
 id="dx1-27011"></a> <span 
class="pplr8t-x-x-90">function from an operator such as </span><span 
class="fvmr8t-x-x-81"><= </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">just by enclosing it in</span>
<span 
class="pplr8t-x-x-90">parentheses and spaces:</span>
<!--l. 1916--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;(</span><span 
class="fvmr8t-x-x-81">&#x00A0;<=</span><span 
class="fvmr8t-x-x-81">&#x00A0;)</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;(</span><span 
class="fvmr8t-x-x-81">&#x00A0;<=</span><span 
class="fvmr8t-x-x-81">&#x00A0;)</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;true</span></span></span>
<!--l. 1924--><p class="noindent" ><span 
class="pplr8t-x-x-90">So, for example: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook77x.png" alt="      msort-(-<-=-) [5;-4;-6;-2;-1]
 *
=&#x21D2;    [1; 2; 4; 5; 6]
" class="math-display" ></center>
</div>
<!--l. 1930--><p class="noindent" ><span 
class="pplr8t-x-x-90">and </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook78x.png" alt="      msort-(->-=-) [5;-4;-6;-2;-1]
=*&#x21D2;    [6; 5; 4; 2; 1]
" class="math-display" ></center>
</div>
<!--l. 1936--><p class="noindent" ><span 
class="pplr8t-x-x-90">The techniques we have seen in this chapter are forms of </span><span 
class="pplri8t-x-x-90">program reuse</span><span 
class="pplr8t-x-x-90">, which is fundamental to writing</span>
<span 
class="pplr8t-x-x-90">manageable large programs.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-280006"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 1941--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-28002x1"><span 
class="pplr8t-x-x-90">Write a simple recursive function </span><span 
class="fvmr8t-x-x-81">calm </span><span 
class="pplr8t-x-x-90">to replace exclamation marks in a </span><span 
class="pplb8t-x-x-90">char list </span><span 
class="pplr8t-x-x-90">with periods. For</span>
     <span 
class="pplr8t-x-x-90">example </span><span 
class="fvmr8t-x-x-81">calm [</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">H</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">l</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">p</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">!</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">' '</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">F</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">i</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">r</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">!</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">] </span><span 
class="pplr8t-x-x-90">should evaluate to</span>
     <span 
class="fvmr8t-x-x-81">calm [</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">H</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">l</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">p</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">.</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">' '</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">F</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">i</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">r</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">; </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">.</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">]</span><span 
class="pplr8t-x-x-90">. Now rewrite your function</span>
     <span 
class="pplr8t-x-x-90">to use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">instead of recursion. What are the types of your functions?</span>
     </li>
     <li 
  class="enumerate" id="x1-28004x2"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">clip </span><span 
class="pplr8t-x-x-90">which, given an integer, clips it to the range </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zptmcm7t-x-x-90">10 </span><span 
class="pplr8t-x-x-90">so that integers bigger than</span>
     <span 
class="pplr8t-x-x-90">10 round down to 10, and those smaller than 1 round up to 1. Write another function </span><span 
class="fvmr8t-x-x-81">cliplist</span>
     <span 
class="pplr8t-x-x-90">which uses this first function together with </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to apply this clipping to a whole list of integers.</span>
     </li>
     <li 
  class="enumerate" id="x1-28006x3"><span 
class="pplr8t-x-x-90">Express your function </span><span 
class="fvmr8t-x-x-81">cliplist </span><span 
class="pplr8t-x-x-90">again, this time using an anonymous function instead of </span><span 
class="fvmr8t-x-x-81">clip</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-28008x4"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">apply </span><span 
class="pplr8t-x-x-90">which, given another function, a number of times to apply it, and an initial</span>
     <span 
class="pplr8t-x-x-90">argument for the function, will return the cumulative effect of repeatedly applying the function.</span>
     <span 
class="pplr8t-x-x-90">For  instance,  </span><span 
class="fvmr8t-x-x-81">apply f 6 4 </span><span 
class="pplr8t-x-x-90">should  return  </span><span 
class="fvmr8t-x-x-81">f (f (f (f (f (f 4))))))</span><span 
class="pplr8t-x-x-90">.  What  is  the  type  of  your</span>
     <span 
class="pplr8t-x-x-90">function?</span>
     </li>
     <li 
  class="enumerate" id="x1-28010x5"><span 
class="pplr8t-x-x-90">Modify the insertion sort function from the preceding chapter to take a comparison function, in the</span>
     <span 
class="pplr8t-x-x-90">same way that we modified merge sort in this chapter. What is its type?</span>
     </li>
     <li 
  class="enumerate" id="x1-28012x6"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">filter </span><span 
class="pplr8t-x-x-90">which takes a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">and an </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">and returns a list of</span>
     <span 
class="pplr8t-x-x-90">just those elements of the argument list for which the given function returns </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-28014x7"><span 
class="pplr8t-x-x-90">Write the function </span><span 
class="fvmr8t-x-x-81">for_all </span><span 
class="pplr8t-x-x-90">which, given a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">and an argument list of type</span>
     <span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if and only if the function returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">for every element of the list. Give</span>
     <span 
class="pplr8t-x-x-90">examples of its use.</span>
     </li>
     <li 
  class="enumerate" id="x1-28016x8"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">mapl </span><span 
class="pplr8t-x-x-90">which maps a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplr8t-x-x-90">over a list of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="pplr8t-x-x-90">to produce</span>
     <span 
class="pplr8t-x-x-90">a list of type </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list</span><span 
class="pplr8t-x-x-90">.</span></li></ol>
                                                                               
                                                                               
<!--l. 1952--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 1954--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-290006"></a></h2>
<!--l. 1955--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 1959--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 1959--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 1962--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 1962--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 1965--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 1965--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 1968--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 1968--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 1971--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 1971--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 1974--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 1974--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
<!--l. 1980--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;7</span></span><br /><a 
 id="x1-300007"></a><span 
class="pplr8t-x-x-90">When Things Go Wrong</span></h2>
<!--l. 1984--><p class="noindent" ><span 
class="pplr8t-x-x-90">Some of the functions we have written so far have had a single, correct answer for each possible argument. For</span>
<span 
class="pplr8t-x-x-90">example, there&#8217;s no number we cannot halve. However, when we use more complicated types such as lists, there</span>
<span 
class="pplr8t-x-x-90">are plenty of functions which do not always have an answer &#8211; a list might not have a head or a tail, for example.</span>
<span 
class="pplr8t-x-x-90">Our </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">functions were unsatisfactory in case of invalid arguments. For example, </span><span 
class="fvmr8t-x-x-81">take 3</span>
<span 
class="fvmr8t-x-x-81">[</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">] </span><span 
class="pplr8t-x-x-90">would simply return </span><span 
class="fvmr8t-x-x-81">[]</span><span 
class="pplr8t-x-x-90">. This is bad practice &#8211; we are hiding errors rather than confronting</span>
<span 
class="pplr8t-x-x-90">them.</span>
<!--l. 1986--><p class="indent" >   <span 
class="pplr8t-x-x-90">OCaml has a mechanism for reporting such</span> <a 
 id="dx1-30001"></a><span 
class="pplri8t-x-x-90">run-time </span><span 
class="pplr8t-x-x-90">errors (these are quite different from the type errors</span>
<span 
class="pplr8t-x-x-90">OCaml reports when it refuses to accept a program at all). This mechanism is</span> <a 
 id="dx1-30002"></a><span 
class="pplri8t-x-x-90">exceptions</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 1988--><p class="indent" >   <span 
class="pplr8t-x-x-90">There are some built-in exceptions in OCaml. For example</span> <a 
 id="dx1-30003"></a><span 
class="fvmr8t-x-x-81">Division_by_zero</span><span 
class="pplr8t-x-x-90">, which is </span><span 
class="pplri8t-x-x-90">raised </span><span 
class="pplr8t-x-x-90">when a</span>
<span 
class="pplr8t-x-x-90">program tries to divide a number by zero:</span>
<!--l. 1991--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;10</span><span 
class="fvmr8t-x-x-81">&#x00A0;/</span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Division_by_zero.</span></span></span>
<!--l. 1998--><p class="noindent" ><span 
class="pplr8t-x-x-90">In order to signal bad arguments in functions like </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop</span><span 
class="pplr8t-x-x-90">, we can rewrite them using the built-in</span>
<span 
class="pplr8t-x-x-90">exception</span> <a 
 id="dx1-30004"></a><span 
class="fvmr8t-x-x-81">Invalid_argument</span><span 
class="pplr8t-x-x-90">, which also carries a message written between double quotation marks. Typically</span>
<span 
class="pplr8t-x-x-90">we use this to record the name of the function which failed. Figure </span><a 
href="#x1-300051"><span 
class="pplr8t-x-x-90">7.1</span><!--tex4ht:ref: takedrop --></a> <span 
class="pplr8t-x-x-90">shows </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">rewritten to use the</span>
<span 
class="fvmr8t-x-x-81">Invalid_argument </span><span 
class="pplr8t-x-x-90">exception using </span><span 
class="fvmb8t-x-x-81">raise</span><span 
class="pplr8t-x-x-90">. Note that these functions deal with two problems of our previous</span>
<span 
class="pplr8t-x-x-90">versions: a negative argument, and being asked to take or drop more than the number of elements in the</span>
<span 
class="pplr8t-x-x-90">list.</span>
<!--l. 2001--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-300051"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 2002--><p class="noindent" >
<!--l. 2026--><p class="noindent" ><img 
src="pandocfiguresmlbook79x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;7.1: </span><span  
class="content"><span 
class="pplr8t-x-x-90">Adding exceptions to </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop</span></span></div><!--tex4ht:label?: x1-300051 -->
                                                                               
                                                                               
<!--l. 2030--><p class="indent" >   </div><hr class="endfigure">
<!--l. 2033--><p class="indent" >   <span 
class="pplr8t-x-x-90">We can</span> <a 
 id="dx1-30006"></a><span 
class="pplr8t-x-x-90">define our own exceptions, using</span> <a 
 id="dx1-30007"></a><span 
class="fvmb8t-x-x-81">exception</span><span 
class="pplr8t-x-x-90">. They can carry information along with them, of a type</span>
<span 
class="pplr8t-x-x-90">we choose:</span>
<!--l. 2036--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;NotPrime</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;int;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;NotPrime</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span></span></span>
<!--l. 2044--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have defined two exceptions &#8211; </span><span 
class="fvmr8t-x-x-81">Problem</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">NotPrime </span><span 
class="pplr8t-x-x-90">which carries an integer along with it. Exceptions</span>
<span 
class="pplr8t-x-x-90">must start with a capital letter. The</span> <a 
 id="dx1-30008"></a><span 
class="fvmb8t-x-x-81">of </span><span 
class="pplr8t-x-x-90">construct can be used to introduce the type of information which</span>
<span 
class="pplr8t-x-x-90">travels along with an exception. Once they are defined we may use them in our own functions, using</span>
<a 
 id="dx1-30009"></a><a 
 id="dx1-30010"></a><a 
 id="dx1-30011"></a><span 
class="fvmb8t-x-x-81">raise</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 2047--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">exception</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;<</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;raise</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span><span 
class="fvmr8t-x-x-81">&#x00A0;100</span><span 
class="fvmr8t-x-x-81">&#x00A0;/</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;20</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># f (-1);;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Problem.</span></span></span>
<!--l. 2059--><p class="noindent" ><span 
class="pplr8t-x-x-90">Exceptions can be</span> <a 
 id="dx1-30012"></a><a 
 id="dx1-30013"></a><span 
class="pplri8t-x-x-90">handled </span><span 
class="pplr8t-x-x-90">as well as raised. An </span><span 
class="pplri8t-x-x-90">exception handler </span><span 
class="pplr8t-x-x-90">deals with an exception raised by an expression.</span>
<span 
class="pplr8t-x-x-90">Exception handlers are written using the</span> <a 
 id="dx1-30014"></a><span 
class="fvmb8t-x-x-81">try</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">with </span><span 
class="pplr8t-x-x-90">construct:</span>
<!--l. 2063--><p class="noindent" ><img 
src="pandocfiguresmlbook80x.png" alt=""  class="fbox" >
<!--l. 2073--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">safe_divide </span><span 
class="pplr8t-x-x-90">function tries to divide </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">by </span><span 
class="fvmr8t-x-x-81">y</span><span 
class="pplr8t-x-x-90">, but if the expression </span><span 
class="fvmr8t-x-x-81">x / y </span><span 
class="pplr8t-x-x-90">raises the built-in exception</span>
<span 
class="fvmr8t-x-x-81">Division_by_zero</span><span 
class="pplr8t-x-x-90">, instead we return zero. Thus, our </span><span 
class="fvmr8t-x-x-81">safe_divide </span><span 
class="pplr8t-x-x-90">function succeeds for every</span>
<span 
class="pplr8t-x-x-90">argument.</span>
<!--l. 2075--><p class="indent" >   <span 
class="pplr8t-x-x-90">How do the types work here? The expression </span><span 
class="fvmr8t-x-x-81">x / y </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">and so the expression we substitute in case</span>
<span 
class="pplr8t-x-x-90">of </span><span 
class="fvmr8t-x-x-81">Division_by_zero </span><span 
class="pplr8t-x-x-90">must have the same type: </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, which indeed it does. And so, our rule that</span>
<span 
class="pplr8t-x-x-90">each expression must have one and only one type is not violated &#8211; </span><span 
class="fvmr8t-x-x-81">safe_divide </span><span 
class="pplr8t-x-x-90">always returns an</span>
<span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 2078--><p class="indent" >
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook81x.png" alt="    &#x25DC;i &#x25DE;n&#x25DF;t&#x25DD;                        &#x25DC;in&#x25DE;t&#x25DF;&#x25DD;
try x / y with Division_by_zero ->   0
&#x25DF;----------------&#x25DD;i&#x25DC;nt---------------&#x25DE;   " class="math-display" ></center>
<!--l. 2081--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is another example. The function </span><span 
class="fvmr8t-x-x-81">last </span><span 
class="pplr8t-x-x-90">returns the last element of a list:</span>
<!--l. 2085--><p class="noindent" ><img 
src="pandocfiguresmlbook82x.png" alt=""  class="fbox" >
<!--l. 2096--><p class="noindent" ><span 
class="pplr8t-x-x-90">The pattern match is incomplete, so whilst OCaml accepts the program it can fail at run-time. We can tidy up the</span>
<span 
class="pplr8t-x-x-90">situation by raising the built-in exception</span> <a 
 id="dx1-30015"></a><span 
class="fvmr8t-x-x-81">Not_found</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 2100--><p class="noindent" ><img 
src="pandocfiguresmlbook83x.png" alt=""  class="fbox" >
<!--l. 2112--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type of a function gives no indication of what exceptions it might raise or handle; it is the responsibility of</span>
<span 
class="pplr8t-x-x-90">the programmer to ensure that exceptions which should be handled always are &#8211; this is an area in which the type</span>
<span 
class="pplr8t-x-x-90">system cannot help us. Later in this book, we will see some alternatives to exceptions for occasions when they are</span>
<span 
class="pplr8t-x-x-90">likely to be frequently raised, allowing the type system to make sure we have dealt with each possible</span>
<span 
class="pplr8t-x-x-90">circumstance.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-310007"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 2117--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-31002x1"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">smallest </span><span 
class="pplr8t-x-x-90">which returns the smallest positive element of a list of integers. If there</span>
     <span 
class="pplr8t-x-x-90">is no positive element, it should raise the built-in </span><span 
class="fvmr8t-x-x-81">Not_found </span><span 
class="pplr8t-x-x-90">exception.</span>
     </li>
     <li 
  class="enumerate" id="x1-31004x2"><span 
class="pplr8t-x-x-90">Write another function </span><span 
class="fvmr8t-x-x-81">smallest_or_zero </span><span 
class="pplr8t-x-x-90">which uses the </span><span 
class="fvmr8t-x-x-81">smallest </span><span 
class="pplr8t-x-x-90">function but if </span><span 
class="fvmr8t-x-x-81">Not_found </span><span 
class="pplr8t-x-x-90">is</span>
     <span 
class="pplr8t-x-x-90">raised, returns zero.</span>
     </li>
     <li 
  class="enumerate" id="x1-31006x3"><span 
class="pplr8t-x-x-90">Write an exception definition and a function which calculates the largest integer smaller than or</span>
     <span 
class="pplr8t-x-x-90">equal to the square root of a given integer. If the argument is negative, the exception should be</span>
     <span 
class="pplr8t-x-x-90">raised.</span>
     </li>
     <li 
  class="enumerate" id="x1-31008x4"><span 
class="pplr8t-x-x-90">Write another function which uses the previous one, but handles the exception, and simply returns</span>
     <span 
class="pplr8t-x-x-90">zero when a suitable integer cannot be found.</span>
     </li>
     <li 
  class="enumerate" id="x1-31010x5"><span 
class="pplr8t-x-x-90">Comment  on  the  merits  and  demerits  of  exceptions  as  a  method  for  dealing  with  exceptional</span>
     <span 
class="pplr8t-x-x-90">situations, in contrast to returning a special value to indicate an error (such as </span><span 
class="fvmr8t-x-x-81">-1 </span><span 
class="pplr8t-x-x-90">for a function</span>
     <span 
class="pplr8t-x-x-90">normally returning a positive number).</span>
     </li></ol>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 2132--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-320007"></a></h2>
<!--l. 2133--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 2137--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 2137--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 2140--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 2140--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2143--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 2143--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 2146--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 2146--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 2149--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 2149--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2152--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 2152--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2155--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 2155--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
                                                                               
                                                                               
<!--l. 2162--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;8</span></span><br /><a 
 id="x1-330008"></a><span 
class="pplr8t-x-x-90">Looking Things Up</span></h2>
<!--l. 2166--><p class="noindent" ><span 
class="pplr8t-x-x-90">Many programs make use of a structure known as a</span> <a 
 id="dx1-33001"></a><span 
class="pplri8t-x-x-90">dictionary</span><span 
class="pplr8t-x-x-90">. A real dictionary is used for associating</span>
<span 
class="pplr8t-x-x-90">definitions with words; we use &#8220;dictionary&#8221; more generally to mean associating some unique</span> <a 
 id="dx1-33002"></a><span 
class="pplri8t-x-x-90">keys </span><span 
class="pplr8t-x-x-90">(like words)</span>
<span 
class="pplr8t-x-x-90">with</span> <a 
 id="dx1-33003"></a><span 
class="pplri8t-x-x-90">values </span><span 
class="pplr8t-x-x-90">(like definitions). For example, we might like to store the following information about the number of</span>
<span 
class="pplr8t-x-x-90">people living in each house in a road:</span>
<!--l. 2169--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook84x.png" alt="-------------
House--People-
1      4
2      2
3      2
4      3

5      1
6------2-----  " ></div>
<!--l. 2180--><p class="noindent" ><span 
class="pplr8t-x-x-90">The house number is the key, the number of people living in the house is the value. The order of keys is</span>
<span 
class="pplr8t-x-x-90">unimportant &#8211; we just need to be able to associate each key with one (and only one) value. It would be very</span>
<span 
class="pplr8t-x-x-90">inconvenient to store two lists, one of house numbers and one of people. For one thing, we would have way of</span>
<span 
class="pplr8t-x-x-90">guaranteeing the two lists were of equal length. What we would like is a way of representing pairs like (1, 4) and</span>
<span 
class="pplr8t-x-x-90">then having a single list of those.</span> <a 
 id="dx1-33004"></a><a 
 id="dx1-33005"></a><span 
class="pplr8t-x-x-90">To make a pair in OCaml, just write it with parentheses and a</span>
<span 
class="pplr8t-x-x-90">comma:</span>
<!--l. 2184--><p class="noindent" ><img 
src="pandocfiguresmlbook85x.png" alt=""  class="fbox" >
<!--l. 2192--><p class="noindent" ><span 
class="pplr8t-x-x-90">It has the type</span> <a 
 id="dx1-33006"></a><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, which we pronounce as &#8220;int cross int&#8221;. When printed on the screen, </span><span 
class="fvmr8t-x-x-81">* </span><span 
class="pplr8t-x-x-90">is</span>
<span 
class="pplr8t-x-x-90">used instead of </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplr8t-x-x-90">just as with multiplication. The two parts of the pair need not have the same</span>
<span 
class="pplr8t-x-x-90">type:</span>
<!--l. 2196--><p class="noindent" ><img 
src="pandocfiguresmlbook86x.png" alt=""  class="fbox" >
<!--l. 2204--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can write simple functions to extract the first and second element using pattern matching:</span>
<!--l. 2208--><p class="noindent" ><img 
src="pandocfiguresmlbook87x.png" alt=""  class="fbox" >
<!--l. 2218--><p class="noindent" ><span 
class="pplr8t-x-x-90">In fact, since pairs can only take one form (unlike lists, which have two forms: empty or consisting of a head and</span>
<span 
class="pplr8t-x-x-90">a tail), OCaml lets us use the pattern directly in place of the argument:</span>
                                                                               
                                                                               
<!--l. 2222--><p class="noindent" ><img 
src="pandocfiguresmlbook88x.png" alt=""  class="fbox" >
<!--l. 2232--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, we can store a dictionary as a list of pairs:</span>
<!--l. 2236--><p class="noindent" ><img 
src="pandocfiguresmlbook89x.png" alt=""  class="fbox" >
<!--l. 2244--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice the parentheses around </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">in the type. Otherwise, it would be the type of a pair of an integer and an</span>
<span 
class="pplr8t-x-x-90">integer list:</span>
<!--l. 2248--><p class="noindent" ><img 
src="pandocfiguresmlbook90x.png" alt=""  class="fbox" >
<!--l. 2256--><p class="noindent" ><span 
class="pplr8t-x-x-90">What operations might we want on dictionaries? We certainly need to look up a value given a key:</span>
<!--l. 2260--><p class="noindent" ><img 
src="pandocfiguresmlbook91x.png" alt=""  class="fbox" >
<!--l. 2272--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, </span><span 
class="fvmr8t-x-x-81">lookup 4 census </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">3</span><span 
class="pplr8t-x-x-90">, whereas </span><span 
class="fvmr8t-x-x-81">lookup 9 census </span><span 
class="pplr8t-x-x-90">raises </span><span 
class="fvmr8t-x-x-81">Not_found</span><span 
class="pplr8t-x-x-90">. Another basic</span>
<span 
class="pplr8t-x-x-90">operation is to add an entry (we must replace it if it already exists, to maintain the property that each key appears</span>
<span 
class="pplr8t-x-x-90">at most once in a dictionary).</span>
<!--l. 2276--><p class="noindent" ><img 
src="pandocfiguresmlbook92x.png" alt=""  class="fbox" >
<!--l. 2290--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, </span><span 
class="fvmr8t-x-x-81">add 6 2 [(4, 5); (6, 3)] </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">[(4, 5); (6, 2)] </span><span 
class="pplr8t-x-x-90">(the value for key </span><span 
class="fvmr8t-x-x-81">6 </span><span 
class="pplr8t-x-x-90">is replaced),</span>
<span 
class="pplr8t-x-x-90">whereas </span><span 
class="fvmr8t-x-x-81">add 6 2 [(4, 5); (3, 6)] </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">[(4, 5); (3, 6); (6, 2)] </span><span 
class="pplr8t-x-x-90">(the new entry for key </span><span 
class="fvmr8t-x-x-81">6 </span><span 
class="pplr8t-x-x-90">is</span>
<span 
class="pplr8t-x-x-90">added). Removing an element is easy:</span>
                                                                               
                                                                               
<!--l. 2294--><p class="noindent" ><img 
src="pandocfiguresmlbook93x.png" alt=""  class="fbox" >
<!--l. 2308--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function always succeeds &#8211; even if the key was not found. We can use exception handling together with our</span>
<span 
class="pplr8t-x-x-90">lookup operation to build a function which checks if a key exists within a dictionary:</span>
<!--l. 2312--><p class="noindent" ><img 
src="pandocfiguresmlbook94x.png" alt=""  class="fbox" >
<!--l. 2324--><p class="noindent" ><span 
class="pplr8t-x-x-90">If </span><span 
class="fvmr8t-x-x-81">lookup k d </span><span 
class="pplr8t-x-x-90">succeeds, </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">will be returned. If not, an exception will be raised, which </span><span 
class="fvmr8t-x-x-81">key_exists </span><span 
class="pplr8t-x-x-90">will handle</span>
<span 
class="pplr8t-x-x-90">itself, and return </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">. Note that we did not give a name to the result of </span><span 
class="fvmr8t-x-x-81">lookup k l </span><span 
class="pplr8t-x-x-90">because we always return</span>
<span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if it succeeds.</span>
<!--l. 2326--><p class="indent" >   <span 
class="pplr8t-x-x-90">Pairs are just a particular instance of a more general construct &#8211; the </span><span 
class="pplri8t-x-x-90">tuple</span><span 
class="pplr8t-x-x-90">. A tuple may contain two or more</span>
<span 
class="pplr8t-x-x-90">things. For example, </span><span 
class="fvmr8t-x-x-81">(1, false, </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">) </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">char</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-340008"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 2331--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-34002x1"><span 
class="pplr8t-x-x-90">Write a function to determine the number of different keys in a dictionary.</span>
     </li>
     <li 
  class="enumerate" id="x1-34004x2"><span 
class="pplr8t-x-x-90">Define a function </span><span 
class="fvmr8t-x-x-81">replace </span><span 
class="pplr8t-x-x-90">which is like </span><span 
class="fvmr8t-x-x-81">add</span><span 
class="pplr8t-x-x-90">, but raises </span><span 
class="fvmr8t-x-x-81">Not_found </span><span 
class="pplr8t-x-x-90">if the key is not already there.</span>
     </li>
     <li 
  class="enumerate" id="x1-34006x3"><span 
class="pplr8t-x-x-90">Write a function to build a dictionary from two equal length lists, one containing keys and another</span>
     <span 
class="pplr8t-x-x-90">containing values. Raise the exception </span><span 
class="fvmr8t-x-x-81">Invalid_argument </span><span 
class="pplr8t-x-x-90">if the lists are not of equal length.</span>
     </li>
     <li 
  class="enumerate" id="x1-34008x4"><span 
class="pplr8t-x-x-90">Now write the inverse function: given a dictionary, return the pair of two lists &#8211; the first containing</span>
     <span 
class="pplr8t-x-x-90">all the keys, and the second containing all the values.</span>
     </li>
     <li 
  class="enumerate" id="x1-34010x5"><span 
class="pplr8t-x-x-90">Define a function to turn any list of pairs into a dictionary. If duplicate keys are found, the value</span>
     <span 
class="pplr8t-x-x-90">associated with the first occurrence of the key should be kept.</span>
     </li>
     <li 
  class="enumerate" id="x1-34012x6"><span 
class="pplr8t-x-x-90">Write  the  function  </span><span 
class="fvmr8t-x-x-81">union a b </span><span 
class="pplr8t-x-x-90">which  forms  the  union  of  two  dictionaries.  The  union  of  two</span>
     <span 
class="pplr8t-x-x-90">dictionaries is the dictionary containing all the entries in one or other or both. In the case that a key</span>
     <span 
class="pplr8t-x-x-90">is contained in both dictionaries, the value in the first should be preferred.</span>
     </li></ol>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 2349--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-350008"></a></h2>
<!--l. 2350--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 2354--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 2354--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 2357--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 2357--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2360--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 2360--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 2363--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 2363--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 2366--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 2366--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2369--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 2369--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2372--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 2372--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2375--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 2375--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
                                                                               
                                                                               
<!--l. 2383--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;9</span></span><br /><a 
 id="x1-360009"></a><span 
class="pplr8t-x-x-90">More with Functions</span></h2>
<!--l. 2387--><p class="noindent" ><span 
class="pplr8t-x-x-90">Look again at the type of a simple function with more than one argument:</span>
<!--l. 2391--><p class="noindent" ><img 
src="pandocfiguresmlbook95x.png" alt=""  class="fbox" >
<!--l. 2399--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have been considering functions like this as taking two arguments and returning a result. In fact, the truth is a</span>
<span 
class="pplr8t-x-x-90">little different. The type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">can also be written as </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">). OCaml lets us omit</span>
<span 
class="pplr8t-x-x-90">the parentheses because </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">is a right-associative operator in the language of types. This gives us a</span>
<span 
class="pplr8t-x-x-90">clue.</span>
     <div class="quote">
     <!--l. 2402--><p class="noindent" ><span 
class="pplri8t-x-x-90">In truth, the function </span><span 
class="fvmro8t-x-x-81">add </span><span 
class="pplri8t-x-x-90">is a function which, when you give it an integer, gives you a function</span>
     <span 
class="pplri8t-x-x-90">which, when you give it an integer, gives the sum.</span></div>
<!--l. 2405--><p class="noindent" ><span 
class="pplr8t-x-x-90">This would be of no particular interest to us, except for one thing: we can give a function with two arguments</span>
<span 
class="pplr8t-x-x-90">just one argument at a time, and it turns out to be rather useful. For example:</span>
<!--l. 2408--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;add</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;y</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;y</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val add :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int -> int -> int = <fun></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;add</span><span 
class="fvmr8t-x-x-81">&#x00A0;6</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;f</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;11</span></span></span>
<!--l. 2418--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here, we have defined a function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">by applying just one argument to </span><span 
class="fvmr8t-x-x-81">add</span><span 
class="pplr8t-x-x-90">. This gives a function of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span>
<span 
class="pplr8t-x-x-90">which adds six to any number. We then apply </span><span 
class="fvmr8t-x-x-81">5 </span><span 
class="pplr8t-x-x-90">to this function, giving </span><span 
class="fvmr8t-x-x-81">11</span><span 
class="pplr8t-x-x-90">. When defining </span><span 
class="fvmr8t-x-x-81">f</span><span 
class="pplr8t-x-x-90">, we used</span> <a 
 id="dx1-36001"></a><span 
class="pplri8t-x-x-90">partial</span>
<span 
class="pplri8t-x-x-90">application </span><span 
class="pplr8t-x-x-90">(we applied only some of the arguments). In fact, even when applying all the arguments at</span>
<span 
class="pplr8t-x-x-90">once, we could equally write </span><span 
class="fvmr8t-x-x-81">(add 6) 5 </span><span 
class="pplr8t-x-x-90">rather than </span><span 
class="fvmr8t-x-x-81">add 6 5</span><span 
class="pplr8t-x-x-90">. We can add six to every element in a</span>
<span 
class="pplr8t-x-x-90">list:</span>
<!--l. 2421--><p class="indent" >   <span 
class="fvmr8t-x-x-81">map (add 6) [10; 20; 30]</span>
<!--l. 2424--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here, </span><span 
class="fvmr8t-x-x-81">add 6 </span><span 
class="pplr8t-x-x-90">has the type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, which is an appropriate type to be the first argument to </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">when</span>
<span 
class="pplr8t-x-x-90">mapping over a list of integers. We can use partial application to simplify some examples from</span>
<span 
class="pplr8t-x-x-90">earlier in the book. We mentioned that you can write, for example, </span><span 
class="fvmr8t-x-x-81">( * ) </span><span 
class="pplr8t-x-x-90">to produce a function</span>
<span 
class="pplr8t-x-x-90">from an operator. It has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. We may partially apply this function, so instead of</span>
<span 
class="pplr8t-x-x-90">writing</span>
<!--l. 2427--><p class="indent" >   <span 
class="fvmr8t-x-x-81">map (</span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">x -> x * 2) [10; 20; 30]</span>
<!--l. 2430--><p class="noindent" ><span 
class="pplr8t-x-x-90">we may write</span>
<!--l. 2433--><p class="indent" >   <span 
class="fvmr8t-x-x-81">map (( * ) 2) [10; 20; 30]</span>
<!--l. 2436--><p class="noindent" ><span 
class="pplr8t-x-x-90">Recall the function to map something over a list of lists from the questions to Chapter </span><a 
href="#x1-270006"><span 
class="pplr8t-x-x-90">6</span><!--tex4ht:ref: functionsuponfunctions --></a><span 
class="pplr8t-x-x-90">:</span>
                                                                               
                                                                               
<!--l. 2440--><p class="noindent" ><img 
src="pandocfiguresmlbook96x.png" alt=""  class="fbox" >
<!--l. 2451--><p class="noindent" ><span 
class="pplr8t-x-x-90">With partial application, we can write</span>
<!--l. 2455--><p class="noindent" ><img 
src="pandocfiguresmlbook97x.png" alt=""  class="fbox" >
<!--l. 2463--><p class="noindent" ><span 
class="pplr8t-x-x-90">Can you see why? The partially applied function </span><span 
class="fvmr8t-x-x-81">map f </span><span 
class="pplr8t-x-x-90">is of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">, which is exactly</span>
<span 
class="pplr8t-x-x-90">the right type to pass to </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">when mapping over lists of lists. In fact, we can go even further and</span>
<span 
class="pplr8t-x-x-90">write:</span>
<!--l. 2467--><p class="noindent" ><img 
src="pandocfiguresmlbook98x.png" alt=""  class="fbox" >
<!--l. 2475--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here,  </span><span 
class="fvmr8t-x-x-81">map (map f) </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="pplr8t-x-x-90">so when an </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">is supplied to </span><span 
class="fvmr8t-x-x-81">mapl</span><span 
class="pplr8t-x-x-90">, a function is returned</span>
<span 
class="pplr8t-x-x-90">requiring just the list. This is partial application at work again.</span>
<!--l. 2477--><p class="indent" >   <span 
class="pplr8t-x-x-90">You can see the real structure of multiple-argument functions, by writing </span><span 
class="fvmr8t-x-x-81">add </span><span 
class="pplr8t-x-x-90">using anonymous</span>
<span 
class="pplr8t-x-x-90">functions:</span>
<!--l. 2481--><p class="noindent" ><img 
src="pandocfiguresmlbook99x.png" alt=""  class="fbox" >
<!--l. 2489--><p class="noindent" ><span 
class="pplr8t-x-x-90">This makes it more obvious that our two-argument </span><span 
class="fvmr8t-x-x-81">add </span><span 
class="pplr8t-x-x-90">function is really just composed of one-argument</span>
<span 
class="pplr8t-x-x-90">functions, but </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">add x y = x + y </span><span 
class="pplr8t-x-x-90">is much clearer! We can apply one or more arguments at a time, but they</span>
<span 
class="pplr8t-x-x-90">must be applied in order. Everything in this chapter also works for functions with more than two</span>
<span 
class="pplr8t-x-x-90">arguments.</span>
   <h3 class="likesectionHead"><a 
 id="x1-370009"></a><span 
class="pplrc8t-x-x-90">S<span 
class="small-caps">U</span><span 
class="small-caps">M</span><span 
class="small-caps">M</span><span 
class="small-caps">A</span><span 
class="small-caps">R</span><span 
class="small-caps">Y</span></span></h3>
<!--l. 2493--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">f x y </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="pplr8t-x-x-90">which can also be written </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B3;</span><span 
class="pplr8t-x-x-90">). Thus, it takes an argument of</span>
<span 
class="pplr8t-x-x-90">type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">and returns a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="pplr8t-x-x-90">which, when you give it an argument of type </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplr8t-x-x-90">returns something of</span>
<span 
class="pplr8t-x-x-90">type </span><span 
class="zptmcm7m-x-x-90">&#x03B3;</span><span 
class="pplr8t-x-x-90">. And so, we can apply just one argument to the function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">(which is called partial application), or apply</span>
<span 
class="pplr8t-x-x-90">both at once. When we write </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">f x y = </span><span 
class="fvmr8t-x-x-81">&#x2026; </span><span 
class="pplr8t-x-x-90">this is just shorthand for </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">f = </span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">x -> </span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">y -></span>
<span 
class="fvmr8t-x-x-81">&#x2026;</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-380009"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 2498--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-38002x1"><span 
class="pplr8t-x-x-90">Rewrite the summary paragraph at the end of this chapter for the three argument function </span><span 
class="fvmr8t-x-x-81">g a b</span>
     <span 
class="fvmr8t-x-x-81">c</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-38004x2"><span 
class="pplr8t-x-x-90">Recall the function </span><span 
class="fvmr8t-x-x-81">member x l </span><span 
class="pplr8t-x-x-90">which determines if an element </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is contained in a list </span><span 
class="fvmr8t-x-x-81">l</span><span 
class="pplr8t-x-x-90">. What is its</span>
     <span 
class="pplr8t-x-x-90">type? What is the type of </span><span 
class="fvmr8t-x-x-81">member x</span><span 
class="pplr8t-x-x-90">? Use partial application to write a function </span><span 
class="fvmr8t-x-x-81">member_all x ls</span>
     <span 
class="pplr8t-x-x-90">which determines if an element is a member of all the lists in the list of lists </span><span 
class="fvmr8t-x-x-81">ls</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-38006x3"><span 
class="pplr8t-x-x-90">Why can we not write a function to halve all the elements of a list like this: </span><span 
class="fvmr8t-x-x-81">map (( / ) 2) [10; 20;</span>
     <span 
class="fvmr8t-x-x-81">30]</span><span 
class="pplr8t-x-x-90">? Write a suitable division function which can be partially applied in the manner we require.</span>
     </li>
     <li 
  class="enumerate" id="x1-38008x4"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">mapll </span><span 
class="pplr8t-x-x-90">which maps a function over lists of lists of lists. You must not use the </span><span 
class="fvmb8t-x-x-81">let</span>
     <span 
class="fvmb8t-x-x-81">rec </span><span 
class="pplr8t-x-x-90">construct. Is it possible to write a function which works like </span><span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">mapl</span><span 
class="pplr8t-x-x-90">, or </span><span 
class="fvmr8t-x-x-81">mapll </span><span 
class="pplr8t-x-x-90">depending</span>
     <span 
class="pplr8t-x-x-90">upon the list given to it?</span>
     </li>
     <li 
  class="enumerate" id="x1-38010x5"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">truncate </span><span 
class="pplr8t-x-x-90">which takes an integer and a list of lists, and returns a list of lists, each</span>
     <span 
class="pplr8t-x-x-90">of  which  has  been  truncated  to  the  given  length.  If  a  list  is  shorter  than  the  given  length,  it  is</span>
     <span 
class="pplr8t-x-x-90">unchanged. Make use of partial application.</span>
     </li>
     <li 
  class="enumerate" id="x1-38012x6"><span 
class="pplr8t-x-x-90">Write a function which takes a list of lists of integers and returns the list composed of all the first</span>
     <span 
class="pplr8t-x-x-90">elements of the lists. If a list is empty, a given number should be used in place of its first element.</span></li></ol>
                                                                               
                                                                               
<!--l. 2507--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 2509--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-390009"></a></h2>
<!--l. 2510--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 2514--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 2514--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 2517--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 2517--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2520--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 2520--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 2523--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 2523--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 2526--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 2526--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2529--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 2529--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2532--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 2532--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2535--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 2535--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 2538--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 2538--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;10</span></span><br /><a 
 id="x1-4000010"></a><span 
class="pplr8t-x-x-90">New Kinds of Data</span></h2>
<!--l. 2549--><p class="noindent" ><span 
class="pplr8t-x-x-90">So far, we have considered the simple types </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">, </span><span 
class="pplb8t-x-x-90">char</span><span 
class="pplr8t-x-x-90">, the compound type </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">, and tuples. We have built</span>
<span 
class="pplr8t-x-x-90">functions from and to these types. It would be possible to encode anything we wanted as lists and tuples of these</span>
<span 
class="pplr8t-x-x-90">types, but it would lead to complex and error-strewn programs. It is time to make our own types. New types are</span>
<span 
class="pplr8t-x-x-90">introduced using</span> <a 
 id="dx1-40001"></a><span 
class="fvmb8t-x-x-81">type</span><span 
class="pplr8t-x-x-90">. Here&#8217;s a type for colours:</span>
<!--l. 2552--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;type</span><span 
class="fvmr8t-x-x-81">&#x00A0;colour</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Red</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Green</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Blue</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Yellow;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">type</span><span 
class="fvmr8t-x-x-81">&#x00A0;colour</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Red</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Green</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Blue</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Yellow</span></span></span>
<!--l. 2558--><p class="noindent" ><span 
class="pplr8t-x-x-90">The name of our new type is colour. It has four</span> <a 
 id="dx1-40002"></a><span 
class="pplri8t-x-x-90">constructors</span><span 
class="pplr8t-x-x-90">, written with an initial capital letter: </span><span 
class="fvmr8t-x-x-81">Red</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">Green</span><span 
class="pplr8t-x-x-90">,</span>
<span 
class="fvmr8t-x-x-81">Blue</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">Yellow</span><span 
class="pplr8t-x-x-90">. These are the possible forms a value of type colour may take. Now we can build values of type</span>
<span 
class="pplr8t-x-x-90">colour:</span>
<!--l. 2566--><p class="noindent" ><img 
src="pandocfiguresmlbook100x.png" alt=""  class="fbox" >
<!--l. 2580--><p class="noindent" ><span 
class="pplr8t-x-x-90">Let us extend our type to include any other colour which can be expressed in the RGB (Red, Green, Blue) colour</span>
<span 
class="pplr8t-x-x-90">system (each component ranges from 0 to 255 inclusive, a standard range giving about 16 million different</span>
<span 
class="pplr8t-x-x-90">colours).</span>
<!--l. 2584--><p class="noindent" ><img 
src="pandocfiguresmlbook101x.png" alt=""  class="fbox" >
<!--l. 2599--><p class="noindent" ><span 
class="pplr8t-x-x-90">We use </span><span 
class="fvmb8t-x-x-81">of </span><span 
class="pplr8t-x-x-90">in our new constructor, to carry information along with values built with it. Here, we are using</span>
<span 
class="pplr8t-x-x-90">something of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. Notice that the list </span><span 
class="fvmr8t-x-x-81">cols </span><span 
class="pplr8t-x-x-90">of type colour </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">contains varying things, but they</span>
<span 
class="pplr8t-x-x-90">are all of the same type, as required by a list. We can write functions by pattern matching over our new</span>
<span 
class="pplr8t-x-x-90">type:</span>
                                                                               
                                                                               
<!--l. 2603--><p class="noindent" ><img 
src="pandocfiguresmlbook102x.png" alt=""  class="fbox" >
<!--l. 2617--><p class="noindent" ><span 
class="pplr8t-x-x-90">Types may contain a</span> <a 
 id="dx1-40003"></a><span 
class="pplri8t-x-x-90">type variable </span><span 
class="pplr8t-x-x-90">like </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">to allow the type of part of the new type to vary &#8211; i.e. for the type</span>
<span 
class="pplr8t-x-x-90">to be polymorphic. For example, here is a type used to hold either nothing, or something of any</span>
<span 
class="pplr8t-x-x-90">type:</span>
<!--l. 2620--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;type</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;option</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;None</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Some</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">type</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;option</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;None</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Some</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span></span></span>
<!--l. 2626--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can read this as</span> <a 
 id="dx1-40004"></a><span 
class="pplr8t-x-x-90">&#8220;</span><span 
class="pplri8t-x-x-90">a value of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplri8t-x-x-90">option is either nothing, or something of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="pplr8t-x-x-90">&#8221;. For example:</span>
<!--l. 2630--><p class="noindent" ><img 
src="pandocfiguresmlbook103x.png" alt=""  class="fbox" >
<!--l. 2647--><p class="noindent" ><span 
class="pplr8t-x-x-90">The option type is useful as a more manageable alternative to exceptions where the lack of an answer is a</span>
<span 
class="pplr8t-x-x-90">common (rather than genuinely exceptional) occurrence. For example, here is a function to look up a value in a</span>
<span 
class="pplr8t-x-x-90">dictionary, returning </span><span 
class="fvmr8t-x-x-81">None </span><span 
class="pplr8t-x-x-90">instead of raising an exception if the value is not found:</span>
<!--l. 2651--><p class="noindent" ><img 
src="pandocfiguresmlbook104x.png" alt=""  class="fbox" >
<!--l. 2662--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, there is no need to worry about exception handling &#8211; we just pattern match on the result of the</span>
<span 
class="pplr8t-x-x-90">function.</span>
<!--l. 2664--><p class="indent" >   <span 
class="pplr8t-x-x-90">In addition to being polymorphic, new types may also be</span> <a 
 id="dx1-40005"></a><span 
class="pplr8t-x-x-90">recursively defined. We can use this</span>
<span 
class="pplr8t-x-x-90">functionality to define our own lists, just like the built-in lists in OCaml but without the special</span>
<span 
class="pplr8t-x-x-90">notation:</span>
                                                                               
                                                                               
<!--l. 2667--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;type</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;sequence</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Nil</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Cons</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;sequence;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">type</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;sequence</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Nil</span><span 
class="fvmr8t-x-x-81">&#x00A0;|</span><span 
class="fvmr8t-x-x-81">&#x00A0;Cons</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;sequence</span></span></span>
<!--l. 2673--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have called our type sequence to avoid confusion. It has two constructors: </span><span 
class="fvmr8t-x-x-81">Nil </span><span 
class="pplr8t-x-x-90">which is equivalent to </span><span 
class="fvmr8t-x-x-81">[]</span><span 
class="pplr8t-x-x-90">, and</span>
<span 
class="fvmr8t-x-x-81">Cons </span><span 
class="pplr8t-x-x-90">which is equivalent to the </span><span 
class="fvmr8t-x-x-81">:: </span><span 
class="pplr8t-x-x-90">operator. </span><span 
class="fvmr8t-x-x-81">Cons </span><span 
class="pplr8t-x-x-90">carries two pieces of data with it &#8211; one of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">(the head) and</span>
<span 
class="pplr8t-x-x-90">one of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">sequence (the tail). This is the recursive part of our definition. Now we can make our own lists</span>
<span 
class="pplr8t-x-x-90">equivalent to OCaml&#8217;s built-in ones:</span>
<!--l. 2676--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook105x.png" alt="----------------------------------------------------------------------------
Built- in-----------------Ours------------------------------------OurType------
[]                      Nil                                     &#x03B1; sequence

[1]                     Cons (1, Nil)                            intsequence
['a'; 'x'; 'e']         Cons ('a', Cons ('x', Cons ('e', Nil)))   charsequence
[Red;-RGB-(20, 20,-20)]-Cons-(Red, Cons-(RGB-(20,-20,-20),-Nil))--coloursequence-  " ></div>
<!--l. 2686--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now you can see why getting at the last element of a list in OCaml is harder than getting at the first element &#8211; it</span>
<span 
class="pplr8t-x-x-90">is deeper in the structure. Let us compare some functions on OCaml lists with the same ones on our new</span>
<span 
class="pplr8t-x-x-90">sequence type. First, the ones for built-in lists.</span>
<!--l. 2690--><p class="noindent" ><img 
src="pandocfiguresmlbook106x.png" alt=""  class="fbox" >
<!--l. 2707--><p class="noindent" ><span 
class="pplr8t-x-x-90">And now the same functions with our new sequence type:</span>
<!--l. 2711--><p class="noindent" ><img 
src="pandocfiguresmlbook107x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 2728--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice how all the conveniences of pattern matching such as completeness detection and the use of the</span>
<span 
class="pplr8t-x-x-90">underscore work for our own types too.</span>
   <h3 class="likesectionHead"><a 
 id="x1-4100010"></a><span 
class="pplr8t-x-x-90">A Type for Mathematical Expressions</span></h3>
<!--l. 2732--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our sequence was an example of a recursively-defined type, which can be processed naturally by recursive</span>
<span 
class="pplr8t-x-x-90">functions. Mathematical expressions can be modeled in the same way. For example, the expression </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">&#x00D7;</span><span 
class="zptmcm7t-x-x-90">3 </span><span 
class="pplr8t-x-x-90">could</span>
<span 
class="pplr8t-x-x-90">be drawn like this:</span>
<!--l. 2736--><p class="indent" >   <img 
src="kindlefig1.png" alt="PIC"  
>
<!--l. 2739--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that, in this representation, we never need parentheses &#8211; the diagram is unambiguous. We can evaluate</span>
<span 
class="pplr8t-x-x-90">the expression by reducing each part in turn:</span>
<!--l. 2743--><p class="indent" >   <img 
src="kindlefig2.png" alt="PIC"  
>
<!--l. 2746--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here&#8217;s a suitable type for such expressions:</span>
<!--l. 2750--><p class="noindent" ><img 
src="pandocfiguresmlbook108x.png" alt=""  class="fbox" >
<!--l. 2761--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, the expression </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">+</span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="zptmcm7y-x-x-90">*</span><span 
class="zptmcm7t-x-x-90">3 </span><span 
class="pplr8t-x-x-90">is represented in this data type as:</span>
<!--l. 2764--><p class="indent" >   <span 
class="fvmr8t-x-x-81">Add (Num 1, Mul (Num 2, Num 3))</span>
<!--l. 2767--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can now write a function to evaluate expressions:</span>
<!--l. 2771--><p class="noindent" ><img 
src="pandocfiguresmlbook109x.png" alt=""  class="fbox" >
<!--l. 2785--><p class="noindent" ><span 
class="pplr8t-x-x-90">Building our own types leads to clearer programs with more predictable behaviour, and helps us to</span>
<span 
class="pplr8t-x-x-90">think about a problem &#8211; often the functions are easy to write once we have decided on appropriate</span>
<span 
class="pplr8t-x-x-90">types.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-4200010"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 2790--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-42002x1"><span 
class="pplr8t-x-x-90">Design a new type rect for representing rectangles. Treat squares as a special case.</span>
     </li>
     <li 
  class="enumerate" id="x1-42004x2"><span 
class="pplr8t-x-x-90">Now write a function of type rect </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">to calculate the area of a given rect.</span>
     </li>
     <li 
  class="enumerate" id="x1-42006x3"><span 
class="pplr8t-x-x-90">Write a function which rotates a rect such that it is at least as tall as it is wide.</span>
     </li>
     <li 
  class="enumerate" id="x1-42008x4"><span 
class="pplr8t-x-x-90">Use  this  function  to  write  one  which,  given  a  rect  </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">,  returns  another  such  list  which  has  the</span>
     <span 
class="pplr8t-x-x-90">smallest total width and whose members are sorted narrowest first.</span>
     </li>
     <li 
  class="enumerate" id="x1-42010x5"><span 
class="pplr8t-x-x-90">Write </span><span 
class="fvmr8t-x-x-81">take</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">drop</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">functions for the sequence type.</span>
     </li>
     <li 
  class="enumerate" id="x1-42012x6"><span 
class="pplr8t-x-x-90">Extend the expr type and the </span><span 
class="fvmr8t-x-x-81">evaluate </span><span 
class="pplr8t-x-x-90">function to allow raising a number to a power.</span>
     </li>
     <li 
  class="enumerate" id="x1-42014x7"><span 
class="pplr8t-x-x-90">Use  the  option  type  to  deal  with  the  problem  that  </span><span 
class="fvmr8t-x-x-81">Division_by_zero </span><span 
class="pplr8t-x-x-90">may  be  raised  from  the</span>
     <span 
class="fvmr8t-x-x-81">evaluate </span><span 
class="pplr8t-x-x-90">function.</span></li></ol>
                                                                               
                                                                               
<!--l. 2802--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 2804--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-4300010"></a></h2>
<!--l. 2805--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 2809--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 2809--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 2812--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 2812--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2815--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 2815--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 2818--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 2818--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 2821--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 2821--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2824--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 2824--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 2827--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 2827--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 2830--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 2830--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 2833--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 2833--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 2836--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 2836--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;11</span></span><br /><a 
 id="x1-4400011"></a><span 
class="pplr8t-x-x-90">Growing Trees</span></h2>
<!--l. 2847--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have used lists to represent collections of elements of like type but varying length, and tuples to represent</span>
<span 
class="pplr8t-x-x-90">collections of things of any type but fixed length. Another common type is the</span> <a 
 id="dx1-44001"></a><a 
 id="dx1-44002"></a><span 
class="pplri8t-x-x-90">binary tree</span><span 
class="pplr8t-x-x-90">, which is used to</span>
<span 
class="pplr8t-x-x-90">represent structures which branch, such as the arithmetical expressions we constructed in the last</span>
<span 
class="pplr8t-x-x-90">chapter.</span>
<!--l. 2849--><p class="indent" >   <span 
class="pplr8t-x-x-90">How can we represent such trees using an OCaml type? When we built our version of the OCaml list type,</span>
<span 
class="pplr8t-x-x-90">we had two constructors &#8211; </span><span 
class="fvmr8t-x-x-81">Cons </span><span 
class="pplr8t-x-x-90">to hold a head and a tail, and </span><span 
class="fvmr8t-x-x-81">Nil </span><span 
class="pplr8t-x-x-90">to represent the end of the list. With a tree, we</span>
<span 
class="pplr8t-x-x-90">need a version of Cons which can hold two tails &#8211; the left and right, and we still need a version of</span>
<span 
class="fvmr8t-x-x-81">Nil</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 2853--><p class="noindent" ><img 
src="pandocfiguresmlbook110x.png" alt=""  class="fbox" >
<!--l. 2861--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our type is called tree, and is polymorphic (can hold any kind of data at the branches). There are two</span>
<span 
class="pplr8t-x-x-90">constructors: </span><span 
class="fvmr8t-x-x-81">Br </span><span 
class="pplr8t-x-x-90">for branches, which hold three things in a tuple: an element, the left sub-tree, and the right</span>
<span 
class="pplr8t-x-x-90">sub-tree. If it is not a </span><span 
class="fvmr8t-x-x-81">Br</span><span 
class="pplr8t-x-x-90">, it is a </span><span 
class="fvmr8t-x-x-81">Lf </span><span 
class="pplr8t-x-x-90">(leaf), which is used to signal that there is no left, or no right sub-tree. Here are</span>
<span 
class="pplr8t-x-x-90">some representations in our new type of integer trees:</span>
<!--l. 2865--><p class="indent" >   <img 
src="kindlefig3.png" alt="PIC"  
>
<!--l. 2878--><p class="noindent" ><span 
class="pplr8t-x-x-90">The empty tree is simply </span><span 
class="fvmr8t-x-x-81">Lf</span><span 
class="pplr8t-x-x-90">. You can see now why we used abbreviated constructor names &#8211; even</span>
<span 
class="pplr8t-x-x-90">small trees result in long textual representations. Let us write some simple functions on trees. To</span>
<span 
class="pplr8t-x-x-90">calculate the number of elements in the tree, we just count one for each branch, and zero for each</span>
<span 
class="pplr8t-x-x-90">leaf:</span>
<!--l. 2882--><p class="noindent" ><img 
src="pandocfiguresmlbook111x.png" alt=""  class="fbox" >
<!--l. 2893--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that the recursive function follows the shape of the recursive type. A similar function can be used to add</span>
<span 
class="pplr8t-x-x-90">up all the integers in an </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">tree:</span>
<!--l. 2897--><p class="noindent" ><img 
src="pandocfiguresmlbook112x.png" alt=""  class="fbox" >
<!--l. 2908--><p class="noindent" ><span 
class="pplr8t-x-x-90">How can we calculate the maximum depth of a tree? The depth is the longest path from the root (top) of the tree</span>
<span 
class="pplr8t-x-x-90">to a leaf.</span>
                                                                               
                                                                               
<!--l. 2912--><p class="noindent" ><img 
src="pandocfiguresmlbook113x.png" alt=""  class="fbox" >
<!--l. 2927--><p class="noindent" ><span 
class="pplr8t-x-x-90">We defined a function </span><span 
class="fvmr8t-x-x-81">max </span><span 
class="pplr8t-x-x-90">which returns the larger of two integers. Then, in our main function, we count a leaf</span>
<span 
class="pplr8t-x-x-90">as zero depth, and calculate the depth of a branch as one plus the maximum of the left and right</span>
<span 
class="pplr8t-x-x-90">sub-trees coming from that branch. Now consider extracting all of the elements from a tree into a</span>
<span 
class="pplr8t-x-x-90">list:</span>
<!--l. 2931--><p class="noindent" ><img 
src="pandocfiguresmlbook114x.png" alt=""  class="fbox" >
<!--l. 2942--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we chose to put all the elements on the left branch before the current element, and all the elements in</span>
<span 
class="pplr8t-x-x-90">the right branch after. This is arbitrary (it is clear that there are multiple answers to the question &#8220;How can I</span>
<span 
class="pplr8t-x-x-90">extract all the elements from a tree as a list?&#8221;). Before we consider real applications of trees, let us look at one</span>
<span 
class="pplr8t-x-x-90">more function. Here is how to map over trees:</span>
<!--l. 2946--><p class="noindent" ><img 
src="pandocfiguresmlbook115x.png" alt=""  class="fbox" >
<!--l. 2957--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice the similarity to our </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">function for lists, both in the type and the definition.</span>
   <h3 class="likesectionHead"><a 
 id="x1-4500011"></a><span 
class="pplr8t-x-x-90">Using trees to build better dictionaries</span></h3>
<a 
 id="dx1-45001"></a>
<!--l. 2961--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have seen that arithmetic expressions can be drawn as trees on paper, and we have designed an OCaml data</span>
<span 
class="pplr8t-x-x-90">type for binary trees to hold any kind of element. Now it is time to introduce the most important application of</span>
<span 
class="pplr8t-x-x-90">trees: the</span> <a 
 id="dx1-45002"></a><a 
 id="dx1-45003"></a><span 
class="pplri8t-x-x-90">binary search tree</span><span 
class="pplr8t-x-x-90">, which is another way of implementing the dictionary</span> <a 
 id="dx1-45004"></a><span 
class="pplri8t-x-x-90">data structure </span><span 
class="pplr8t-x-x-90">we described in</span>
<span 
class="pplr8t-x-x-90">Chapter </span><a 
href="#x1-330008"><span 
class="pplr8t-x-x-90">8</span><!--tex4ht:ref: lookingthingsup --></a><span 
class="pplr8t-x-x-90">.</span>
<!--l. 2963--><p class="indent" >   <span 
class="pplr8t-x-x-90">The most important advantage of a tree is that it is often very much easier to reach a given element. When</span>
<span 
class="pplr8t-x-x-90">searching in a dictionary defined as a list, it took on average time proportional to the number of items in</span>
<span 
class="pplr8t-x-x-90">the dictionary to find a value for a key (the position of the required entry is, on average, halfway</span>
<span 
class="pplr8t-x-x-90">along the list). If we use a binary tree, and if it is reasonably nicely balanced in shape, that time</span>
<span 
class="pplr8t-x-x-90">can be reduced to the logarithm base two of the number of elements in the dictionary. Can you see</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">why?</span>
<!--l. 2965--><p class="indent" >   <span 
class="pplr8t-x-x-90">We can use our existing tree type. In the case of a dictionary, it will have type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) tree, in other words a</span>
<span 
class="pplr8t-x-x-90">tree of key-value pairs where the keys have some type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">and the values some type </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">. For this example, we are</span>
<span 
class="pplr8t-x-x-90">going to be using another built-in type, </span><span 
class="pplb8t-x-x-90">string</span><span 
class="pplr8t-x-x-90">. A</span> <a 
 id="dx1-45005"></a><a 
 id="dx1-45006"></a><span 
class="pplr8t-x-x-90">string is a sequence of characters written between double</span>
<span 
class="pplr8t-x-x-90">quotation marks. We have seen these as messages attached to exceptions, but they are a basic OCaml type</span>
<span 
class="pplr8t-x-x-90">too.</span>
<!--l. 2967--><p class="indent" >   <span 
class="pplr8t-x-x-90">So, our tree representing a dictionary mapping integers like </span><span 
class="fvmr8t-x-x-81">1 </span><span 
class="pplr8t-x-x-90">to their spellings like </span><span 
class="fvmr8t-x-x-81"> one  </span><span 
class="pplr8t-x-x-90">would have type</span>
<span 
class="pplr8t-x-x-90">(</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">string</span><span 
class="pplr8t-x-x-90">) tree:</span>
<!--l. 2971--><p class="indent" >   <img 
src="kindlefig4.png" alt="PIC"  
>
<!--l. 2974--><p class="noindent" ><span 
class="pplr8t-x-x-90">which would be written as</span>
<!--l. 2978--><p class="indent" >   <span 
class="fvmr8t-x-x-72">Br ((3, "three"), Br ((1, "one"), Lf, Br ((2, "two"), Lf, Lf)), Br ((4, "four"), Lf, Lf))</span>
<!--l. 2981--><p class="noindent" ><span 
class="pplr8t-x-x-90">If we arrange the tree such that, at each branch, everything to the left has a key less than the key at the</span>
<span 
class="pplr8t-x-x-90">branch, and everything to the right has a key greater than that at the branch, we have a </span><span 
class="pplri8t-x-x-90">binary search</span>
<span 
class="pplri8t-x-x-90">tree</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 2983--><p class="indent" >   <span 
class="pplr8t-x-x-90">Lookup is simple: start at the top, and if we have not found the key we are looking for, go left or right</span>
<span 
class="pplr8t-x-x-90">depending upon whether the required key is smaller or larger than the value at the current branch. If we reach a</span>
<span 
class="pplr8t-x-x-90">leaf, the key was not in the tree (assuming the tree is a well-formed binary search tree), and we raise an</span>
<span 
class="pplr8t-x-x-90">exception.</span>
<!--l. 2987--><p class="noindent" ><img 
src="pandocfiguresmlbook116x.png" alt=""  class="fbox" >
<!--l. 3001--><p class="noindent" ><span 
class="pplr8t-x-x-90">Alternatively, we may use the option type to avoid exceptions:</span>
<!--l. 3005--><p class="noindent" ><img 
src="pandocfiguresmlbook117x.png" alt=""  class="fbox" >
<!--l. 3019--><p class="noindent" ><span 
class="pplr8t-x-x-90">How can we insert a new key-value pair into an existing tree? We can find the position to insert by using the</span>
<span 
class="pplr8t-x-x-90">same procedure as the lookup function &#8211; going left or right at each branch as appropriate. If we find an equal key,</span>
<span 
class="pplr8t-x-x-90">we put our new value there instead. Otherwise, we will end up at a leaf, and this is the insertion point &#8211;</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">thus, if the key is not in the dictionary when </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">is used, it will be added in place of an existing</span>
<span 
class="pplr8t-x-x-90">leaf.</span>
<!--l. 3023--><p class="noindent" ><img 
src="pandocfiguresmlbook118x.png" alt=""  class="fbox" >
<!--l. 3037--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, if we wish to insert the value </span><span 
class="fvmr8t-x-x-81">"zero" </span><span 
class="pplr8t-x-x-90">for the key </span><span 
class="fvmr8t-x-x-81">0 </span><span 
class="pplr8t-x-x-90">in the tree drawn above, we would</span>
<span 
class="pplr8t-x-x-90">obtain</span>
<!--l. 3041--><p class="indent" >   <img 
src="kindlefig5.png" alt="PIC"  
>
<!--l. 3044--><p class="noindent" ><span 
class="pplr8t-x-x-90">The shape of the tree is dependent upon the order of insertions into the tree &#8211; if they are in order (or reverse</span>
<span 
class="pplr8t-x-x-90">order), we obtain a rather inefficient tree &#8211; no better a dictionary than a list in fact. However, on average, we</span>
<span 
class="pplr8t-x-x-90">obtain a reasonably balanced tree, and logarithmic lookup and insertion times.</span>
<!--l. 3046--><p class="indent" >   <span 
class="pplr8t-x-x-90">Lists and trees are examples of data structures. The design of an algorithm and its data structures are</span>
<span 
class="pplr8t-x-x-90">intimately connected.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-4600011"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 3051--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-46002x1"><span 
class="pplr8t-x-x-90">Write a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">to determine if a given element is in a tree.</span>
     </li>
     <li 
  class="enumerate" id="x1-46004x2"><span 
class="pplr8t-x-x-90">Write a function which flips a tree left to right such that, if it were drawn on paper, it would appear</span>
     <span 
class="pplr8t-x-x-90">to be a mirror image.</span>
     </li>
     <li 
  class="enumerate" id="x1-46006x3"><span 
class="pplr8t-x-x-90">Write a function to determine if two trees have the same shape, irrespective of the actual values of</span>
     <span 
class="pplr8t-x-x-90">the elements.</span>
     </li>
     <li 
  class="enumerate" id="x1-46008x4"><span 
class="pplr8t-x-x-90">Write  a  function  </span><span 
class="fvmr8t-x-x-81">tree_of_list </span><span 
class="pplr8t-x-x-90">which  builds  a  tree  representation  of  a  dictionary  from  a  list</span>
     <span 
class="pplr8t-x-x-90">representation of a dictionary.</span>
     </li>
     <li 
  class="enumerate" id="x1-46010x5"><span 
class="pplr8t-x-x-90">Write a function to combine two dictionaries represented as trees into one. In the case of clashing</span>
     <span 
class="pplr8t-x-x-90">keys, prefer the value from the first dictionary.</span>
     </li>
     <li 
  class="enumerate" id="x1-46012x6"><span 
class="pplr8t-x-x-90">Can you define a type for trees which, instead of branching exactly two ways each time, can branch</span>
     <span 
class="pplr8t-x-x-90">zero or more ways, possibly different at each branch? Write simple functions like </span><span 
class="fvmr8t-x-x-81">size</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">total</span><span 
class="pplr8t-x-x-90">, and</span>
     <span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">using your new type of tree.</span></li></ol>
                                                                               
                                                                               
<!--l. 3060--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 3062--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-4700011"></a></h2>
<!--l. 3063--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 3067--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 3067--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 3070--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 3070--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 3073--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 3073--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 3076--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 3076--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 3079--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 3079--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 3082--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 3082--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 3085--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 3085--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 3088--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 3088--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 3091--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 3091--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 3094--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 3094--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 3097--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 3097--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;12</span></span><br /><a 
 id="x1-4800012"></a><span 
class="pplr8t-x-x-90">In and Out</span></h2>
<!--l. 3108--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have considered a function (and indeed, a whole program composed of many functions) to take a chunk of</span>
<span 
class="pplr8t-x-x-90">data, do some calculations, and then produce a result. This assumption has allowed us to write neat, easily</span>
<span 
class="pplr8t-x-x-90">understood programs.</span>
<!--l. 3110--><p class="indent" >   <span 
class="pplr8t-x-x-90">However, some computer programs do not have all data available at the beginning of the program (or even</span>
<span 
class="pplr8t-x-x-90">the beginning of a given function). The user might provide new data interactively, or the program might</span>
<span 
class="pplr8t-x-x-90">fetch data from the internet, or two or more programs might communicate with one another in real</span>
<span 
class="pplr8t-x-x-90">time.</span>
<!--l. 3112--><p class="indent" >   <span 
class="pplr8t-x-x-90">We must learn how to write such programs, whilst understanding the utility of restricting such complications</span>
<span 
class="pplr8t-x-x-90">to as small a part of the program as possible &#8211; interactivity turns out to be surprisingly hard to reason about,</span>
<span 
class="pplr8t-x-x-90">since the result of a function may no longer depend only on its initial argument.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-4900012"></a><span 
class="pplr8t-x-x-90">Writing to the screen</span></h4>
<!--l. 3116--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml has a built-in function </span><span 
class="fvmr8t-x-x-81">print_int </span><span 
class="pplr8t-x-x-90">which prints an integer to the screen:</span>
<!--l. 3119--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_int</span><span 
class="fvmr8t-x-x-81">&#x00A0;100;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">100-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3125--><p class="noindent" ><a 
 id="dx1-49001"></a><span 
class="pplr8t-x-x-90">What is the type of this function? Well, it is a function, and it takes an integer as its argument. It prints the integer</span>
<span 
class="pplr8t-x-x-90">to the screen, and then returns</span><span 
class="pplr8t-x-x-90">&#x2026;what? Nothing! OCaml has a special type to represent nothing, called </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">. There</span>
<span 
class="pplr8t-x-x-90">is exactly one thing of type</span> <a 
 id="dx1-49002"></a><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">which is written </span><span 
class="fvmr8t-x-x-81">() </span><span 
class="pplr8t-x-x-90">and is called &#8220;unit&#8221;. So, the function </span><span 
class="fvmr8t-x-x-81">print_int </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int</span>
<span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3127--><p class="indent" >   <span 
class="pplr8t-x-x-90">There is another built-in function </span><span 
class="fvmr8t-x-x-81">print_string </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="pplb8t-x-x-90">string </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">to print a string, and another</span>
<span 
class="fvmr8t-x-x-81">print_newline </span><span 
class="pplr8t-x-x-90">to move to the next line. This function has type </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">because it requires no substantive</span>
<span 
class="pplr8t-x-x-90">argument and produces no useful result.</span> <a 
 id="dx1-49003"></a><span 
class="pplr8t-x-x-90">It is only wanted for its &#8220;side-effect&#8221;.</span>
<!--l. 3129--><p class="indent" >   <span 
class="pplr8t-x-x-90">We can produce several side-effects, one after another, using the</span> <a 
 id="dx1-49004"></a><span 
class="fvmr8t-x-x-81">; </span><span 
class="pplr8t-x-x-90">symbol. This evaluates the expression on</span>
<span 
class="pplr8t-x-x-90">its left hand side, throws away the result (which will normally be </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">anyway), and then evaluates the</span>
<span 
class="pplr8t-x-x-90">expression to its right hand side, returning the result (which is often </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">too). The type of the expression </span><span 
class="zptmcm7m-x-x-90">x </span><span 
class="fvmr8t-x-x-81">; </span><span 
class="zptmcm7m-x-x-90">y </span><span 
class="pplr8t-x-x-90">is</span>
<span 
class="pplr8t-x-x-90">thus the type of </span><span 
class="zptmcm7m-x-x-90">y</span><span 
class="pplr8t-x-x-90">. For example, we can write a function to write to the screen an </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">string </span><span 
class="pplr8t-x-x-90">pair as an integer on</span>
<span 
class="pplr8t-x-x-90">one line, followed by a string on another:</span>
<!--l. 3133--><p class="noindent" ><img 
src="pandocfiguresmlbook119x.png" alt=""  class="fbox" >
<!--l. 3142--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice we have added a second call to </span><span 
class="fvmr8t-x-x-81">print_newline</span><span 
class="pplr8t-x-x-90">, so that our function can be called several times in a row</span>
<span 
class="pplr8t-x-x-90">without intervening calls to </span><span 
class="fvmr8t-x-x-81">print_newline</span><span 
class="pplr8t-x-x-90">. We wrote the function applications all on one line to emphasize</span>
<span 
class="pplr8t-x-x-90">that </span><span 
class="fvmr8t-x-x-81">; </span><span 
class="pplr8t-x-x-90">behaves a little like an operator. However, for convenience, we would normally write it like</span>
<span 
class="pplr8t-x-x-90">this:</span>
                                                                               
                                                                               
<!--l. 3146--><p class="noindent" ><img 
src="pandocfiguresmlbook120x.png" alt=""  class="fbox" >
<!--l. 3158--><p class="noindent" ><span 
class="pplr8t-x-x-90">This makes it look rather like </span><span 
class="fvmr8t-x-x-81">; </span><span 
class="pplr8t-x-x-90">is used to end each expression, but just remember that </span><span 
class="fvmr8t-x-x-81">; </span><span 
class="pplr8t-x-x-90">is a bit like an operator &#8211;</span>
<span 
class="pplr8t-x-x-90">notice that there is no </span><span 
class="fvmr8t-x-x-81">; </span><span 
class="pplr8t-x-x-90">after the last </span><span 
class="fvmr8t-x-x-81">print_newline ()</span><span 
class="pplr8t-x-x-90">. Let us see how </span><span 
class="fvmr8t-x-x-81">print_dict_entry </span><span 
class="pplr8t-x-x-90">is used in</span>
<span 
class="pplr8t-x-x-90">practice:</span>
<!--l. 3161--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_dict_entry</span><span 
class="fvmr8t-x-x-81">&#x00A0;(1,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"one");;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">one</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3170--><p class="noindent" ><span 
class="pplr8t-x-x-90">How might we print a whole dictionary (represented as a list of entries) this way? Well, we could write our own</span>
<span 
class="pplr8t-x-x-90">function to iterate over all the entries:</span>
<!--l. 3174--><p class="noindent" ><img 
src="pandocfiguresmlbook121x.png" alt=""  class="fbox" >
<!--l. 3185--><p class="noindent" ><span 
class="pplr8t-x-x-90">Better, we can extract this method into a more general one, for doing an action on each element of a</span>
<span 
class="pplr8t-x-x-90">list:</span>
<!--l. 3189--><p class="noindent" ><img 
src="pandocfiguresmlbook122x.png" alt=""  class="fbox" >
<!--l. 3200--><p class="noindent" ><span 
class="pplr8t-x-x-90">Normally </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplr8t-x-x-90">will be </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">. Now we can redefine </span><span 
class="fvmr8t-x-x-81">print_dict </span><span 
class="pplr8t-x-x-90">using </span><span 
class="fvmr8t-x-x-81">iter</span><span 
class="pplr8t-x-x-90">:</span>
                                                                               
                                                                               
<!--l. 3204--><p class="noindent" ><img 
src="pandocfiguresmlbook123x.png" alt=""  class="fbox" >
<!--l. 3218--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example:</span>
<!--l. 3221--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_dict</span><span 
class="fvmr8t-x-x-81">&#x00A0;[(1,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"one");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(2,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"two");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(3,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"three")];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">one</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">two</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">three</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3232--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-5000012"></a><span 
class="pplr8t-x-x-90">Reading from the keyboard</span></h4>
<a 
 id="dx1-50001"></a>
<!--l. 3234--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we should like to write a function to read a dictionary as an (</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">string</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. We will use two built-in</span>
<span 
class="pplr8t-x-x-90">OCaml functions. The function </span><span 
class="fvmr8t-x-x-81">read_int </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">waits for the user to type in an integer and press the</span>
<span 
class="pplr8t-x-x-90">Enter key. The integer is then returned. The function </span><span 
class="fvmr8t-x-x-81">read_line </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">string </span><span 
class="pplr8t-x-x-90">waits for the user to type</span>
<span 
class="pplr8t-x-x-90">any string and press the enter key, returning the string.</span>
<!--l. 3236--><p class="indent" >   <span 
class="pplr8t-x-x-90">We want the user to enter a series of keys and values (integers and strings), one per line. They will enter zero</span>
<span 
class="pplr8t-x-x-90">for the integer to indicate no more input. Our function will take no argument, and return a dictionary of integers</span>
<span 
class="pplr8t-x-x-90">and strings, so its type will be </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">string</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3240--><p class="noindent" ><img 
src="pandocfiguresmlbook124x.png" alt=""  class="fbox" >
<!--l. 3252--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can run this function and type in some suitable values:</span>
<!--l. 3254--><p class="indent" >
                                                                               
                                                                               
<!--l. 3257--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;read_dict</span><span 
class="fvmr8t-x-x-81">&#x00A0;();;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">oak</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">ash</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">elm</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">0</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;(int</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;string)</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[(1,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"oak");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(2,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"ash");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(3,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"elm")]</span></span></span>
<!--l. 3271--><p class="noindent" ><span 
class="pplr8t-x-x-90">But there is a problem. What happens if we type in something which is not an integer when an integer is</span>
<span 
class="pplr8t-x-x-90">expected?</span>
<!--l. 3274--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;read_dict</span><span 
class="fvmr8t-x-x-81">&#x00A0;();;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">oak</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">ash</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Failure</span><span 
class="fvmr8t-x-x-81">&#x00A0;"int_of_string".</span></span></span>
<!--l. 3283--><p class="noindent" ><span 
class="pplr8t-x-x-90">We must handle this exception, and ask the user to try again. Here&#8217;s a revised function:</span>
<!--l. 3287--><p class="noindent" ><img 
src="pandocfiguresmlbook125x.png" alt=""  class="fbox" >
<!--l. 3305--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, typing mistakes can be fixed interactively:</span>
<!--l. 3308--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;read_dict</span><span 
class="fvmr8t-x-x-81">&#x00A0;();;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">oak</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">ash</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">This</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;valid</span><span 
class="fvmr8t-x-x-81">&#x00A0;integer.</span><span 
class="fvmr8t-x-x-81">&#x00A0;Please</span><span 
class="fvmr8t-x-x-81">&#x00A0;try</span><span 
class="fvmr8t-x-x-81">&#x00A0;again.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">ash</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">elm</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">0</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;(int</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;string)</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[(1,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"oak");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(2,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"ash");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(3,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"elm")]</span></span></span>
   <h4 class="likesubsectionHead"><a 
 id="x1-5100012"></a><span 
class="pplr8t-x-x-90">Using files</span></h4>
<!--l. 3325--><p class="noindent" ><span 
class="pplr8t-x-x-90">It is inconvenient to have to type new data sets in each time, so we will write functions to store a dictionary to a</span>
<span 
class="pplr8t-x-x-90">file, and then to read it back out again.</span>
<a 
 id="dx1-51001"></a>
<a 
 id="dx1-51002"></a>
<!--l. 3327--><p class="indent" >   <span 
class="pplr8t-x-x-90">OCaml has some basic functions to help us read and write from places data can be stored, such as files. Places</span>
<span 
class="pplr8t-x-x-90">we can read from have type </span><span 
class="pplb8t-x-x-90">in</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel </span><span 
class="pplr8t-x-x-90">and places we can write to have type </span><span 
class="pplb8t-x-x-90">out</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel</span><span 
class="pplr8t-x-x-90">. Here are functions</span>
<span 
class="pplr8t-x-x-90">for writing a dictionary of type (</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">string</span><span 
class="pplr8t-x-x-90">) to a channel:</span>
<!--l. 3331--><p class="noindent" ><img 
src="pandocfiguresmlbook126x.png" alt=""  class="fbox" >
<!--l. 3347--><p class="noindent" ><span 
class="pplr8t-x-x-90">We are using the functions </span><span 
class="fvmr8t-x-x-81">output_string </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">output_char </span><span 
class="pplr8t-x-x-90">to write the data in the same format we used to</span>
<span 
class="pplr8t-x-x-90">print it to the screen. There is no </span><span 
class="fvmr8t-x-x-81">output_int </span><span 
class="pplr8t-x-x-90">function, so we have used the built-in </span><span 
class="fvmr8t-x-x-81">string_of_int </span><span 
class="pplr8t-x-x-90">function to</span>
<span 
class="pplr8t-x-x-90">build a string from the integer. The character </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">\n</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">is a special one, representing moving to the next line (there is</span>
<span 
class="pplr8t-x-x-90">no </span><span 
class="fvmr8t-x-x-81">output_newline </span><span 
class="pplr8t-x-x-90">function).</span>
<!--l. 3349--><p class="indent" >   <span 
class="pplr8t-x-x-90">How do we obtain such a channel? The function </span><span 
class="fvmr8t-x-x-81">open_out </span><span 
class="pplr8t-x-x-90">gives an output channel for filename given as a</span>
<span 
class="pplr8t-x-x-90">string. It has type </span><span 
class="pplb8t-x-x-90">string </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">out</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel</span><span 
class="pplr8t-x-x-90">. After we have written the contents to the file, we must call </span><span 
class="fvmr8t-x-x-81">close_out</span>
<span 
class="pplr8t-x-x-90">(which has type </span><span 
class="pplb8t-x-x-90">out</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">) to properly</span> <a 
 id="dx1-51003"></a><span 
class="pplr8t-x-x-90">close the file.</span>
<!--l. 3354--><p class="noindent" ><img 
src="pandocfiguresmlbook127x.png" alt=""  class="fbox" >
<!--l. 3365--><p class="noindent" ><span 
class="pplr8t-x-x-90">After running this function, you should find a file of the chosen name on your computer in the same folder from</span>
<span 
class="pplr8t-x-x-90">which you are running OCaml. If you are not sure where the file is being put, consult the documentation for your</span>
<span 
class="pplr8t-x-x-90">OCaml implementation, or use a full file path such as </span><span 
class="fvmr8t-x-x-81">"C:/file.txt" </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">"/home/yourname/file.txt"</span><span 
class="pplr8t-x-x-90">, again</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">depending on your system. In the following example, we are reading a dictionary from the user and writing it to</span>
<span 
class="pplr8t-x-x-90">file as </span><span 
class="fvmr8t-x-x-81">file.txt</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 3368--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;dictionary_to_file</span><span 
class="fvmr8t-x-x-81">&#x00A0;"file.txt"</span><span 
class="fvmr8t-x-x-81">&#x00A0;(read_dict</span><span 
class="fvmr8t-x-x-81">&#x00A0;());;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">oak</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">ash</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">elm</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">0</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span></span></span>
<!--l. 3381--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we have written a file, we can read it back in:</span>
<!--l. 3385--><p class="noindent" ><img 
src="pandocfiguresmlbook128x.png" alt=""  class="fbox" >
<!--l. 3404--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have written a function </span><span 
class="fvmr8t-x-x-81">entry_of_channel </span><span 
class="pplr8t-x-x-90">to read a single integer and string (one element of our dictionary)</span>
<span 
class="pplr8t-x-x-90">from an input channel using the built-in functions </span><span 
class="fvmr8t-x-x-81">input_line </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">int_of_string</span><span 
class="pplr8t-x-x-90">, and a function</span>
<span 
class="fvmr8t-x-x-81">dictionary_of_channel </span><span 
class="pplr8t-x-x-90">to read all of them as a dictionary. It makes use of the built-in exception</span> <a 
 id="dx1-51004"></a><span 
class="fvmr8t-x-x-81">End_of_file</span>
<span 
class="pplr8t-x-x-90">to detect when there is no more in the file. Now, we can build the main function to read our dictionary from the</span>
<span 
class="pplr8t-x-x-90">file:</span>
<!--l. 3408--><p class="noindent" ><img 
src="pandocfiguresmlbook129x.png" alt=""  class="fbox" >
<!--l. 3421--><p class="noindent" ><span 
class="pplr8t-x-x-90">The process is the same as for </span><span 
class="fvmr8t-x-x-81">dictionary_to_file </span><span 
class="pplr8t-x-x-90">but we use </span><span 
class="fvmr8t-x-x-81">open_in </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">close_in </span><span 
class="pplr8t-x-x-90">instead of </span><span 
class="fvmr8t-x-x-81">open_out </span><span 
class="pplr8t-x-x-90">and</span>
<span 
class="fvmr8t-x-x-81">close_out</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 3425--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;dictionary_of_file</span><span 
class="fvmr8t-x-x-81">&#x00A0;"file.txt";;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;(int</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;string)</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[(1,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"oak");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(2,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"ash");</span><span 
class="fvmr8t-x-x-81">&#x00A0;(3,</span><span 
class="fvmr8t-x-x-81">&#x00A0;"elm")]</span></span></span>
<!--l. 3431--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-5200012"></a><span 
class="pplr8t-x-x-90">Summary of functions</span></h4>
<!--l. 3433--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have introduced the types </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">, </span><span 
class="pplb8t-x-x-90">in</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="pplb8t-x-x-90">out</span><span 
class="pplb8t-x-x-90">_</span><span 
class="pplb8t-x-x-90">channel</span><span 
class="pplr8t-x-x-90">, and the exception </span><span 
class="fvmr8t-x-x-81">End_of_file</span><span 
class="pplr8t-x-x-90">. Here are the</span>
<span 
class="pplr8t-x-x-90">functions we have used:</span>
<!--l. 3438--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook130x.png" alt="----------------------------------------------------------------------------
Function        Type                     Description
----------------------------------------------------------------------------
print_int      int &#x2192; unit                 Printanintegertothe screen.
print_string   string &#x2192; unit              Printastringtothescreen.
print_newline  unit&#x2192; unit                Print a newline character to the screen, moving
                                       to thebeginning ofthenextline.
read_line      unit&#x2192; string               Read a string from the user. The user indicates
                                       they have finishedbypressingtheEnterkey.
read_int       unit&#x2192; int                 Read an integer from the user. The user indi-
                                       cates they have finished by pressing the Enter
                                       key. Raises Failure "int_of_string" if the
                                       usertypessomethingotherthan aninteger.
int_of_string  string &#x2192; int               Make an integer from a string. Raises Failure
                                       "int_of_string" if the string does not repre-
                                       senta valid integer.
string_of_int  int &#x2192; string                Makesastringrepresentation ofan integer.
open_out       string &#x2192; out_channel        Given a filename, open a channel for output.
                                       Raisestheexception Sys_errorifthefile could
                                       notbeopened.
close_out      out_channel&#x2192; unit         Closean outputchannel.
open_in        string &#x2192; in_channel         Given a filename, open a channel for input.
                                       Raisestheexception Sys_errorifthefile could
                                       notbeopened.
close_in       in_channel&#x2192; unit          Closean inputchannel.
output_string  out_channel&#x2192; string&#x2192; unit  Writea stringtoan outputchannel.
output_char----out_channel&#x2192;-char&#x2192;-unit---Writea-charactertoanoutputchannel.-------
" ></div>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-5300012"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 3459--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-53002x1"><span 
class="pplr8t-x-x-90">Write a function to print a list of integers to the screen in the same format OCaml uses &#8211; i.e. with</span>
     <span 
class="pplr8t-x-x-90">square brackets and semicolons.</span>
     </li>
     <li 
  class="enumerate" id="x1-53004x2"><span 
class="pplr8t-x-x-90">Write a function to read three integers from the user, and return them as a tuple. What exceptions</span>
     <span 
class="pplr8t-x-x-90">could be raised in the process? Handle them appropriately.</span>
     </li>
     <li 
  class="enumerate" id="x1-53006x3"><span 
class="pplr8t-x-x-90">In  our  </span><span 
class="fvmr8t-x-x-81">read_dict </span><span 
class="pplr8t-x-x-90">function,  we  waited  for  the  user  to  type  </span><span 
class="fvmr8t-x-x-81">0 </span><span 
class="pplr8t-x-x-90">to  indicate  no  more  data.  This  is</span>
     <span 
class="pplr8t-x-x-90">clumsy. Implement a new </span><span 
class="fvmr8t-x-x-81">read_dict </span><span 
class="pplr8t-x-x-90">function with a nicer system. Be careful to deal with possible</span>
     <span 
class="pplr8t-x-x-90">exceptions which may be raised.</span>
     </li>
     <li 
  class="enumerate" id="x1-53008x4"><span 
class="pplr8t-x-x-90">Write a function which, given a number </span><span 
class="zptmcm7m-x-x-90">x</span><span 
class="pplr8t-x-x-90">, prints the </span><span 
class="zptmcm7m-x-x-90">x</span><span 
class="pplr8t-x-x-90">-times table to a given file name. For example,</span>
     <span 
class="fvmr8t-x-x-81">table "table.txt" 5 </span><span 
class="pplr8t-x-x-90">should produce a file </span><span 
class="fvmr8t-x-x-81">table.txt </span><span 
class="pplr8t-x-x-90">containing the following:</span><br 
class="newline" /><br 
class="newline" />
<div class="pic-tabular">
     <img 
src="pandocfiguresmlbook131x.png" alt="1      2        3        4        5
2      4        6        8        10
3      6        9        12       15
4      8        12       16       20
5      10       15       20       25 " ></div>
     <!--l. 3477--><p class="noindent" ><span 
class="pplr8t-x-x-90">Adding the special tabulation character </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">\t</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">after each number will line up the columns.</span>
     </li>
     <li 
  class="enumerate" id="x1-53010x5"><span 
class="pplr8t-x-x-90">Write a function to count the number of lines in a given file.</span>
     </li>
     <li 
  class="enumerate" id="x1-53012x6"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">copy_file </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="pplb8t-x-x-90">string </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">string </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">which copies a file line by line. For example,</span>
     <span 
class="fvmr8t-x-x-81">copy_file "a.txt" "b.txt" </span><span 
class="pplr8t-x-x-90">should produce a file </span><span 
class="fvmr8t-x-x-81">b.txt </span><span 
class="pplr8t-x-x-90">identical to </span><span 
class="fvmr8t-x-x-81">a.txt</span><span 
class="pplr8t-x-x-90">. Make sure you deal</span>
     <span 
class="pplr8t-x-x-90">with the case where the file </span><span 
class="fvmr8t-x-x-81">a.txt </span><span 
class="pplr8t-x-x-90">cannot be found, or where </span><span 
class="fvmr8t-x-x-81">b.txt </span><span 
class="pplr8t-x-x-90">cannot be created or</span>
     <span 
class="pplr8t-x-x-90">filled.</span></li></ol>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 3484--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-5400012"></a></h2>
<!--l. 3485--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 3489--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 3489--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 3492--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 3492--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 3495--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 3495--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 3498--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 3498--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 3501--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 3501--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 3504--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 3504--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 3507--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 3507--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 3510--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 3510--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 3513--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 3513--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 3516--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 3516--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 3519--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 3519--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 3522--><p class="noindent" ><span 
class="pplr8t-x-x-80">12</span>
<!--l. 3522--><p class="noindent" ><span 
class="pplr8t-x-x-80">The value </span><span 
class="fvmr8t-x-x-72">() </span><span 
class="pplr8t-x-x-80">and its type </span><span 
class="pplb8t-x-x-80">unit</span><span 
class="pplr8t-x-x-80">. Input channels of type </span><span 
class="pplb8t-x-x-80">in</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel </span><span 
class="pplr8t-x-x-80">and output channels of type </span><span 
class="pplb8t-x-x-80">out</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel</span><span 
class="pplr8t-x-x-80">. Built-in functions</span>
<span 
class="pplr8t-x-x-80">for reading from and writing to them respectively.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;13</span></span><br /><a 
 id="x1-5500013"></a><span 
class="pplr8t-x-x-90">Putting Things in Boxes</span></h2>
<!--l. 3533--><p class="noindent" ><span 
class="pplr8t-x-x-90">So far, we have considered &#8220;pure&#8221; functions which have no side-effects, and functions which have the side-effect</span>
<span 
class="pplr8t-x-x-90">of reading or writing information to and from, for example, files. When we assigned a value to a name, that value</span>
<span 
class="pplr8t-x-x-90">could never change. Sometimes, it is convenient to allow the value of a name to be changed &#8211; some algorithms</span>
<span 
class="pplr8t-x-x-90">are more naturally expressed in this way.</span>
<!--l. 3535--><p class="indent" >   <span 
class="pplr8t-x-x-90">OCaml provides a construct known as a</span> <a 
 id="dx1-55001"></a><a 
 id="dx1-55002"></a><a 
 id="dx1-55003"></a><span 
class="pplri8t-x-x-90">reference </span><span 
class="pplr8t-x-x-90">which is a box in which we can store a value. We build a</span>
<span 
class="pplr8t-x-x-90">reference using the built-in function </span><span 
class="fvmr8t-x-x-81">ref </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">ref</span><span 
class="pplr8t-x-x-90">. For example, let us build a reference with initial</span>
<span 
class="pplr8t-x-x-90">contents </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">. It will have type </span><span 
class="pplb8t-x-x-90">int ref</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3538--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;ref</span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;ref</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;{contents</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0}</span></span></span>
<!--l. 3544--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml tells us that </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is a reference of type </span><span 
class="pplb8t-x-x-90">int ref </span><span 
class="pplr8t-x-x-90">which currently has contents </span><span 
class="fvmr8t-x-x-81">0</span><span 
class="pplr8t-x-x-90">. We can extract the current</span>
<span 
class="pplr8t-x-x-90">contents of a reference using the </span><span 
class="fvmr8t-x-x-81">!</span><span 
class="pplr8t-x-x-90">operator, which has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">ref </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="pplr8t-x-x-90">.</span>
<a 
 id="dx1-55004"></a>
<!--l. 3548--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;p</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;!x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;p</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span></span></span>
<!--l. 3552--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can update the contents of the reference using the </span><span 
class="fvmr8t-x-x-81">:= </span><span 
class="pplr8t-x-x-90">operator:</span>
<a 
 id="dx1-55005"></a>
<!--l. 3556--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;:=</span><span 
class="fvmr8t-x-x-81">&#x00A0;50;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3560--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">:= </span><span 
class="pplr8t-x-x-90">operator has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">ref </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">, since it takes a reference and a new value to put in it, puts the value</span>
<span 
class="pplr8t-x-x-90">in, and returns nothing. It is only useful for its side-effect. Now, we can get the contents with </span><span 
class="fvmr8t-x-x-81">!</span>
<span 
class="pplr8t-x-x-90">again.</span>
<!--l. 3563--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;q</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;!x;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;q</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;50</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;p;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span></span></span>
<!--l. 3569--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that </span><span 
class="fvmr8t-x-x-81">p </span><span 
class="pplr8t-x-x-90">is unchanged. Here&#8217;s a function to swap the contents of two references:</span>
<!--l. 3573--><p class="noindent" ><img 
src="pandocfiguresmlbook132x.png" alt=""  class="fbox" >
<!--l. 3583--><p class="noindent" ><span 
class="pplr8t-x-x-90">We needed to use a temporary name </span><span 
class="fvmr8t-x-x-81">t </span><span 
class="pplr8t-x-x-90">to store the contents of </span><span 
class="fvmr8t-x-x-81">a</span><span 
class="pplr8t-x-x-90">. Can you see why?</span>
<!--l. 3585--><p class="indent" >   <span 
class="pplr8t-x-x-90">This type of programming, which consists of issuing a number of commands, in order, about which</span>
<span 
class="pplr8t-x-x-90">references are to be altered and how, is known as</span> <a 
 id="dx1-55006"></a><span 
class="pplri8t-x-x-90">imperative programming</span><span 
class="pplr8t-x-x-90">. OCaml provides some useful structures</span>
<span 
class="pplr8t-x-x-90">for imperative programming with references. We will look at these quickly now, and in a moment build a bigger</span>
<span 
class="pplr8t-x-x-90">example program to show why they are useful.</span>
                                                                               
                                                                               
<!--l. 3587--><p class="indent" >   <span 
class="pplr8t-x-x-90">For readability, OCaml lets us miss out the </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">part of the </span><span 
class="fvmb8t-x-x-81">if</span><span 
class="fvmb8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;then</span><span 
class="fvmb8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;else</span><span 
class="fvmb8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;construct if it would just be</span>
<span 
class="fvmr8t-x-x-81">()</span><span 
class="pplr8t-x-x-90">, which is if we are doing nothing in the </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">case, so</span>
<!--l. 3590--><p class="indent" >   <span 
class="fvmb8t-x-x-81">if </span><span 
class="fvmr8t-x-x-81">x = 0 </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="fvmr8t-x-x-81">a := 0 </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="fvmr8t-x-x-81">()</span>
<!--l. 3593--><p class="noindent" ><span 
class="pplr8t-x-x-90">can be written as</span>
<!--l. 3596--><p class="indent" >   <span 
class="fvmb8t-x-x-81">if </span><span 
class="fvmr8t-x-x-81">x = 0 </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="fvmr8t-x-x-81">a := 0</span>
<!--l. 3599--><p class="noindent" ><span 
class="pplr8t-x-x-90">and if </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is not zero, the expression will just evaluate to </span><span 
class="fvmr8t-x-x-81">()</span><span 
class="pplr8t-x-x-90">. Due to this, when putting imperative code inside </span><span 
class="fvmb8t-x-x-81">if</span>
<span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;then </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;else </span><span 
class="fvmb8t-x-x-81">&#x2026; </span><span 
class="pplr8t-x-x-90">constructs, we need to surround the inner imperative expressions with parentheses so the</span>
<span 
class="pplr8t-x-x-90">meaning is unambiguous:</span>
<!--l. 3603--><p class="noindent" ><img 
src="pandocfiguresmlbook133x.png" alt=""  class="fbox" >
<!--l. 3613--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml allows us to use</span> <a 
 id="dx1-55007"></a><a 
 id="dx1-55008"></a><span 
class="fvmb8t-x-x-81">begin </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmb8t-x-x-81">end </span><span 
class="pplr8t-x-x-90">instead, for readability:</span>
<!--l. 3617--><p class="noindent" ><img 
src="pandocfiguresmlbook134x.png" alt=""  class="fbox" >
   <h3 class="likesectionHead"><a 
 id="x1-5600013"></a><span 
class="pplr8t-x-x-90">Doing it again and again</span></h3>
<!--l. 3630--><p class="noindent" ><span 
class="pplr8t-x-x-90">There are two ways to repeat an action. To perform an action a fixed number of times, we use the</span> <a 
 id="dx1-56001"></a><a 
 id="dx1-56002"></a><a 
 id="dx1-56003"></a><a 
 id="dx1-56004"></a><span 
class="fvmb8t-x-x-81">for </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;= </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;to</span>
<span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;do </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;done </span><span 
class="pplr8t-x-x-90">construct. For example,</span>
<!--l. 3633--><p class="indent" >   <span 
class="fvmb8t-x-x-81">for </span><span 
class="fvmr8t-x-x-81">x = 1 </span><span 
class="fvmb8t-x-x-81">to </span><span 
class="fvmr8t-x-x-81">5 </span><span 
class="fvmb8t-x-x-81">do </span><span 
class="fvmr8t-x-x-81">print_int x; print_newline () </span><span 
class="fvmb8t-x-x-81">done</span>
<!--l. 3636--><p class="noindent" ><span 
class="pplr8t-x-x-90">evaluates the expression </span><span 
class="fvmr8t-x-x-81">print_int x; print_newline () </span><span 
class="pplr8t-x-x-90">five times: once where </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is 1, once where </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is 2 etc, so</span>
<span 
class="pplr8t-x-x-90">the result is:</span>
<!--l. 3639--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;for</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;to</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span><span 
class="fvmr8t-x-x-81">&#x00A0;do</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_int</span><span 
class="fvmr8t-x-x-81">&#x00A0;x;</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_newline</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span><span 
class="fvmr8t-x-x-81">&#x00A0;done;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">4</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3648--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is known as a</span> <a 
 id="dx1-56005"></a><a 
 id="dx1-56006"></a><span 
class="pplr8t-x-x-90">&#8220;for loop&#8221;. Note that the type of the whole </span><span 
class="fvmb8t-x-x-81">for </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">= </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">to </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">do </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">done</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;expression is </span><span 
class="pplb8t-x-x-90">unit</span>
<span 
class="pplr8t-x-x-90">irrespective of the type of the expression(s) inside it.</span>
                                                                               
                                                                               
<!--l. 3650--><p class="indent" >   <span 
class="pplr8t-x-x-90">There is another looping construct &#8211; this time for evaluating an expression repeatedly until some condition is</span>
<span 
class="pplr8t-x-x-90">true. This is the </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><a 
 id="dx1-56007"></a><a 
 id="dx1-56008"></a><a 
 id="dx1-56009"></a><span 
class="fvmb8t-x-x-81">while </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">do </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">done</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;construct. It takes a boolean condition, and evaluates a given expression</span>
<span 
class="pplr8t-x-x-90">repeatedly, zero or more times, until the boolean condition is </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">. For example, here is a function which, given</span>
<span 
class="pplr8t-x-x-90">a positive integer, calculates the lowest power of two greater than or equal to that number (i.e. for the argument</span>
<span 
class="pplr8t-x-x-90">37, the result will be 64).</span>
<!--l. 3659--><p class="noindent" ><img 
src="pandocfiguresmlbook135x.png" alt=""  class="fbox" >
<!--l. 3672--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmb8t-x-x-81">while </span><span 
class="pplr8t-x-x-90">loop continues until the contents of the reference </span><span 
class="fvmr8t-x-x-81">t </span><span 
class="pplr8t-x-x-90">is greater than or equal to </span><span 
class="fvmr8t-x-x-81">x</span><span 
class="pplr8t-x-x-90">. At that point, it ends,</span>
<span 
class="pplr8t-x-x-90">and the contents of </span><span 
class="fvmr8t-x-x-81">t </span><span 
class="pplr8t-x-x-90">is returned from the function. Again, note that the type of the whole  </span><span 
class="fvmb8t-x-x-81">while </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">do </span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">done</span><span 
class="pplr8t-x-x-90">&#x00A0;</span>
<span 
class="pplr8t-x-x-90">construct is </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3676--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-5700013"></a><span 
class="pplr8t-x-x-90">Example: text file statistics</span></h3>
<!--l. 3678--><p class="noindent" ><span 
class="pplr8t-x-x-90">We are going to write a program to count the number of words, sentences and lines in a text file. We shall</span>
<span 
class="pplr8t-x-x-90">consider the opening paragraph of Kafka&#8217;s &#8220;Metamorphosis&#8221;.</span>
<!--l. 3680--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook136x.png" alt="One morning, when Gregor Samsa woke from troubled dreams, he found
himself transformed in his bed into a horrible vermin. He lay on

his armour-like back, and if he lifted his head a little he could
see his brown belly, slightly domed and divided by arches into stiff
sections.  The bedding was hardly able to cover it and seemed ready
to slide off any moment. His many legs, pitifully thin compared
with the size of the rest of him, waved about helplessly as he
looked.
" ></div>
<!--l. 3691--><p class="noindent" ><span 
class="pplr8t-x-x-90">There are newline characters at the end of each line, save for the last. You can cut and paste or type this into a text</span>
<span 
class="pplr8t-x-x-90">file to try these examples out. Here, it is saved as </span><span 
class="fvmr8t-x-x-81">gregor.txt</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3693--><p class="indent" >   <span 
class="pplr8t-x-x-90">We will just count lines first. To this, we will write a function </span><span 
class="fvmr8t-x-x-81">channel_statistics </span><span 
class="pplr8t-x-x-90">to gather the statistics by</span>
<span 
class="pplr8t-x-x-90">reading an input channel and printing them. Then we will have a function to open a named file, call our first</span>
<span 
class="pplr8t-x-x-90">function, and close it again.</span>
                                                                               
                                                                               
<!--l. 3697--><p class="noindent" ><img 
src="pandocfiguresmlbook137x.png" alt=""  class="fbox" >
<!--l. 3726--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice the use of </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">as the condition for the </span><span 
class="fvmb8t-x-x-81">while </span><span 
class="pplr8t-x-x-90">construct. This means the computation would carry on</span>
<span 
class="pplr8t-x-x-90">forever, except that the </span><span 
class="fvmr8t-x-x-81">End_of_file </span><span 
class="pplr8t-x-x-90">exception must eventually be raised. Note also that OCaml emits a warning</span>
<span 
class="pplr8t-x-x-90">when reading the </span><span 
class="fvmr8t-x-x-81">channel_statistics </span><span 
class="pplr8t-x-x-90">function:</span>
<!--l. 3729--><p class="indent" >   <span 
class="fvmr8t-x-x-81">Warning 26:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unused variable line.</span>
<!--l. 3732--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is an example of a warning we can ignore &#8211; we are not using the actual value </span><span 
class="fvmr8t-x-x-81">line </span><span 
class="pplr8t-x-x-90">yet, since we are just</span>
<span 
class="pplr8t-x-x-90">counting lines without looking at their content. Running our program on the example file gives</span>
<span 
class="pplr8t-x-x-90">this:</span>
<!--l. 3735--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;file_statistics</span><span 
class="fvmr8t-x-x-81">&#x00A0;"gregor.txt";;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">There</span><span 
class="fvmr8t-x-x-81">&#x00A0;were</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><span 
class="fvmr8t-x-x-81">&#x00A0;lines.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3742--><p class="noindent" ><span 
class="pplr8t-x-x-90">Let us update the program to count the number of words, characters, and sentences. We will do this</span>
<span 
class="pplr8t-x-x-90">simplistically, assuming that the number of words can be counted by counting the number of spaces, and that the</span>
<span 
class="pplr8t-x-x-90">sentences can be counted by noting instances of </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">.</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">!</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">?</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">. We can extend the </span><span 
class="fvmr8t-x-x-81">channel_statistics</span>
<span 
class="pplr8t-x-x-90">function appropriately &#8211; </span><span 
class="fvmr8t-x-x-81">file_statistics </span><span 
class="pplr8t-x-x-90">need not change:</span>
                                                                               
                                                                               
<!--l. 3746--><p class="noindent" ><img 
src="pandocfiguresmlbook138x.png" alt=""  class="fbox" >
<!--l. 3783--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have used the built-in function </span><span 
class="fvmr8t-x-x-81">String.iter </span><span 
class="pplr8t-x-x-90">of type (</span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">string </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">which calls a function we</span>
<span 
class="pplr8t-x-x-90">supply on each character of a string.</span>
<!--l. 3785--><p class="indent" >   <span 
class="pplr8t-x-x-90">Substituting this version of </span><span 
class="fvmr8t-x-x-81">channel_statistics </span><span 
class="pplr8t-x-x-90">(if you are cutting and pasting into OCaml, be sure to also</span>
<span 
class="pplr8t-x-x-90">paste </span><span 
class="fvmr8t-x-x-81">file_statistics </span><span 
class="pplr8t-x-x-90">in again afterwards, so it uses the new </span><span 
class="fvmr8t-x-x-81">channel_statistics</span><span 
class="pplr8t-x-x-90">), gives the following result</span>
<span 
class="pplr8t-x-x-90">on our example text:</span>
<!--l. 3788--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;file_statistics</span><span 
class="fvmr8t-x-x-81">&#x00A0;"gregor.txt";;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">There</span><span 
class="fvmr8t-x-x-81">&#x00A0;were</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><span 
class="fvmr8t-x-x-81">&#x00A0;lines,</span><span 
class="fvmr8t-x-x-81">&#x00A0;making</span><span 
class="fvmr8t-x-x-81">&#x00A0;up</span><span 
class="fvmr8t-x-x-81">&#x00A0;464</span><span 
class="fvmr8t-x-x-81">&#x00A0;characters</span><span 
class="fvmr8t-x-x-81">&#x00A0;with</span><span 
class="fvmr8t-x-x-81">&#x00A0;80</span><span 
class="fvmr8t-x-x-81">&#x00A0;words</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;sentences.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3795--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-5800013"></a><span 
class="pplr8t-x-x-90">Adding character counts</span></h4>
                                                                               
                                                                               
<!--l. 3797--><p class="noindent" ><span 
class="pplr8t-x-x-90">We should like to build a histogram, counting the number of times each letter of the alphabet or other character</span>
<span 
class="pplr8t-x-x-90">occurs. It would be tedious and unwieldy to hold a hundred or so references, and then pattern match on each</span>
<span 
class="pplr8t-x-x-90">possible character to increment the right one. OCaml provides a data type called </span><span 
class="pplb8t-x-x-90">array </span><span 
class="pplr8t-x-x-90">for situations like</span>
<span 
class="pplr8t-x-x-90">this.</span>
<!--l. 3799--><p class="indent" >   <span 
class="pplr8t-x-x-90">An</span> <a 
 id="dx1-58001"></a><a 
 id="dx1-58002"></a><span 
class="pplr8t-x-x-90">array is a place for storing a fixed number of elements of like type. We can introduce arrays by using </span><span 
class="fvmr8t-x-x-81">[|</span>
<span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">|]</span><span 
class="pplr8t-x-x-90">, with semicolons to separate the elements:</span>
<!--l. 3802--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[|1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3;</span><span 
class="fvmr8t-x-x-81">&#x00A0;4;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5|];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[|1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3;</span><span 
class="fvmr8t-x-x-81">&#x00A0;4;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5|]</span></span></span>
<!--l. 3808--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can access an element inside our array in constant time by giving the position of the element (known as the</span>
<a 
 id="dx1-58003"></a><span 
class="pplri8t-x-x-90">subscript</span><span 
class="pplr8t-x-x-90">) in parentheses, after the array name and a period:</span>
<!--l. 3811--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;a.(0);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span></span></span>
<!--l. 3815--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that the first element has subscript </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, not </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">. We can update any of the values in the array, also in constant</span>
<span 
class="pplr8t-x-x-90">time, like this:</span>
<a 
 id="dx1-58004"></a>
<!--l. 3819--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;a.(4)</span><span 
class="fvmr8t-x-x-81">&#x00A0;<-</span><span 
class="fvmr8t-x-x-81">&#x00A0;100;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;a;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[|1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3;</span><span 
class="fvmr8t-x-x-81">&#x00A0;4;</span><span 
class="fvmr8t-x-x-81">&#x00A0;100|]</span></span></span>
<!--l. 3825--><p class="noindent" ><span 
class="pplr8t-x-x-90">If we try to access or update an element which is not within range, an exception is raised:</span>
<!--l. 3828--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;a.(5);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Invalid_argument</span><span 
class="fvmr8t-x-x-81">&#x00A0;"index</span><span 
class="fvmr8t-x-x-81">&#x00A0;out</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;bounds".</span></span></span>
<!--l. 3832--><p class="noindent" ><span 
class="pplr8t-x-x-90">There are some useful built-in functions for dealing with arrays. The function </span><span 
class="fvmr8t-x-x-81">Array.length </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">array </span><span 
class="zptmcm7y-x-x-90">&#x2192;</span>
<span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">returns the length of an array:</span>
<!--l. 3835--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;Array.length</span><span 
class="fvmr8t-x-x-81">&#x00A0;a;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span>
<!--l. 3839--><p class="noindent" ><span 
class="pplr8t-x-x-90">In contrast to finding the length of a list, the time taken by </span><span 
class="fvmr8t-x-x-81">Array.length </span><span 
class="pplr8t-x-x-90">is constant, since it was fixed when the</span>
<span 
class="pplr8t-x-x-90">array was created. The </span><span 
class="fvmr8t-x-x-81">Array.make </span><span 
class="pplr8t-x-x-90">function is used for building an array of a given length, initialized with given</span>
<span 
class="pplr8t-x-x-90">values. It takes two arguments &#8211; the length, and the initial value to be given to every element. It has type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span>
<span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">array</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 3842--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;Array.make</span><span 
class="fvmr8t-x-x-81">&#x00A0;6</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[|true;</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;</span><span 
class="fvmr8t-x-x-81">&#x00A0;true;</span><span 
class="fvmr8t-x-x-81">&#x00A0;true|]</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;Array.make</span><span 
class="fvmr8t-x-x-81">&#x00A0;10</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;char</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[|</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">|]</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;Array.make</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span><span 
class="fvmr8t-x-x-81">&#x00A0;(Array.make</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span><span 
class="fvmr8t-x-x-81">&#x00A0;5);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;array</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[|[|5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5|];</span><span 
class="fvmr8t-x-x-81">&#x00A0;[|5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5|];</span><span 
class="fvmr8t-x-x-81">&#x00A0;[|5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5|]|]</span></span></span>
<!--l. 3853--><p class="noindent" ><span 
class="pplr8t-x-x-90">Back to our original problem. We want to store a count for each possible character. We cannot subscript our</span>
<span 
class="pplr8t-x-x-90">arrays with characters directly, but each character has a special integer code (its so-called</span> <a 
 id="dx1-58005"></a><span 
class="pplr8t-x-x-90">&#8220;ASCII code&#8221;, a</span>
<span 
class="pplr8t-x-x-90">common encoding of characters as integers in use since the 1960s), and we can convert to and from these using</span>
<span 
class="pplr8t-x-x-90">the built-in functions </span><span 
class="fvmr8t-x-x-81">int_of_char </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">char_of_int</span><span 
class="pplr8t-x-x-90">. For example:</span>
<!--l. 3856--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;int_of_char</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">C</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;67</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;char_of_int</span><span 
class="fvmr8t-x-x-81">&#x00A0;67;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;char</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">C</span><span 
class="fvmr8c-x-x-81">'</span></span></span>
<!--l. 3864--><p class="noindent" ><span 
class="pplr8t-x-x-90">The numbers go from 0 to 255 inclusive (they do not all represent printable characters, for example the</span>
<span 
class="pplr8t-x-x-90">newline character </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">\n</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">has code 10). So, we can store our histogram as an integer array of length</span>
<span 
class="pplr8t-x-x-90">256.</span>
<!--l. 3866--><p class="indent" >   <span 
class="pplr8t-x-x-90">Our main function is getting rather long, so we will write a separate one which, given the completed array</span>
<span 
class="pplr8t-x-x-90">prints out the frequencies. If there were no instances of a particular character, no line is printed for that</span>
<span 
class="pplr8t-x-x-90">character.</span>
<!--l. 3870--><p class="noindent" ><img 
src="pandocfiguresmlbook139x.png" alt=""  class="fbox" >
<!--l. 3893--><p class="noindent" ><span 
class="pplr8t-x-x-90">This prints lines like:</span>
<!--l. 3896--><p class="indent" >   <span 
class="fvmr8t-x-x-81">For character </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">d</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">(character number 100) the count is 6.</span>
<!--l. 3899--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, we can alter our </span><span 
class="fvmr8t-x-x-81">channel_statistics </span><span 
class="pplr8t-x-x-90">to create an appropriate array, and update it, once again using</span>
<span 
class="fvmr8t-x-x-81">String.iter</span><span 
class="pplr8t-x-x-90">:</span>
                                                                               
                                                                               
<!--l. 3903--><p class="noindent" ><img 
src="pandocfiguresmlbook140x.png" alt=""  class="fbox" >
<!--l. 3947--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here is the output on our text:</span>
<!--l. 3950--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;file_statistics</span><span 
class="fvmr8t-x-x-81">&#x00A0;"gregor.txt";;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">There</span><span 
class="fvmr8t-x-x-81">&#x00A0;were</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><span 
class="fvmr8t-x-x-81">&#x00A0;lines,</span><span 
class="fvmr8t-x-x-81">&#x00A0;making</span><span 
class="fvmr8t-x-x-81">&#x00A0;up</span><span 
class="fvmr8t-x-x-81">&#x00A0;464</span><span 
class="fvmr8t-x-x-81">&#x00A0;characters</span><span 
class="fvmr8t-x-x-81">&#x00A0;with</span><span 
class="fvmr8t-x-x-81">&#x00A0;80</span><span 
class="fvmr8t-x-x-81">&#x00A0;words</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;sentences.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Character</span><span 
class="fvmr8t-x-x-81">&#x00A0;frequencies:</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;32)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;80.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">,</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;44)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;45)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">.</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;46)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;4.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">G</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;71)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">H</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;72)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;2.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">O</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;79)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">S</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;83)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">T</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;84)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;97)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;24.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">b</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;98)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;10.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">c</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;99)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">d</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;100)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;25.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;101)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;47.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">f</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;102)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;13.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">g</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;103)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;5.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">h</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;104)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;22.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">i</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;105)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;30.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">k</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;107)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;4.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">l</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;108)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;23.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">m</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;109)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;15.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">n</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;110)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;21.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">o</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;111)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;27.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">p</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;112)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;3.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">r</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;114)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;20.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">s</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;115)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;24.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">t</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;116)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;21.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">u</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;117)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">v</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;118)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;4.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">w</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;119)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">y</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;121)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;10.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">For</span><span 
class="fvmr8t-x-x-81">&#x00A0;character</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">&#x00A0;(character</span><span 
class="fvmr8t-x-x-81">&#x00A0;number</span><span 
class="fvmr8t-x-x-81">&#x00A0;122)</span><span 
class="fvmr8t-x-x-81">&#x00A0;the</span><span 
class="fvmr8t-x-x-81">&#x00A0;count</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 3990--><p class="noindent" ><span 
class="pplr8t-x-x-90">The most common character is the space. The most common alphabetic character is </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">e</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-5900013"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 3995--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-59002x1"><span 
class="pplr8t-x-x-90">Consider the expression</span>
     <!--l. 3998--><p class="noindent" ><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = ref 1 </span><span 
class="fvmb8t-x-x-81">in let </span><span 
class="fvmr8t-x-x-81">y = ref 2 </span><span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">x := !x + !x; y := !x + !y; !x + !y</span>
     <!--l. 4000--><p class="noindent" ><span 
class="pplr8t-x-x-90">What references have been created? What are their initial and final values after this expression has</span>
     <span 
class="pplr8t-x-x-90">been evaluated? What is the type of this expression?</span>
     </li>
     <li 
  class="enumerate" id="x1-59004x2"><span 
class="pplr8t-x-x-90">What is the difference between </span><span 
class="fvmr8t-x-x-81">[ref 5; ref 5] </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = ref 5 </span><span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">[x; x]</span><span 
class="pplr8t-x-x-90">?</span>
     </li>
     <li 
  class="enumerate" id="x1-59006x3"><span 
class="pplr8t-x-x-90">Imagine  that  the  </span><span 
class="fvmb8t-x-x-81">for</span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;to </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;do </span><span 
class="fvmb8t-x-x-81">&#x2026;</span><span 
class="fvmb8t-x-x-81">&#x00A0;done </span><span 
class="pplr8t-x-x-90">construct  did  not  exist.  How  might  we  create  the  same</span>
     <span 
class="pplr8t-x-x-90">behaviour?</span>
     </li>
     <li 
  class="enumerate" id="x1-59008x4"><span 
class="pplr8t-x-x-90">What are the types of these expressions?</span>
     <!--l. 4007--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|]</span>
     <!--l. 4009--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|true; false; true|]</span>
     <!--l. 4011--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|[|1|]|]</span>
     <!--l. 4013--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|[1; 2; 3]; [4; 5; 6]|]</span>
     <!--l. 4015--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|].(2)</span>
     <!--l. 4017--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|].(2) <- 4</span>
     </li>
     <li 
  class="enumerate" id="x1-59010x5"><span 
class="pplr8t-x-x-90">Write a function to compute the sum of the elements in an integer array.</span>
     </li>
     <li 
  class="enumerate" id="x1-59012x6"><span 
class="pplr8t-x-x-90">Write a function to reverse the elements of an array in place (i.e. do not create a new array).</span>
     </li>
     <li 
  class="enumerate" id="x1-59014x7"><span 
class="pplr8t-x-x-90">Write  a  function  </span><span 
class="fvmr8t-x-x-81">table </span><span 
class="pplr8t-x-x-90">which,  given  an  integer,  builds  the  </span><span 
class="pplb8t-x-x-90">int  array  array  </span><span 
class="pplr8t-x-x-90">representing  the</span>
     <span 
class="pplr8t-x-x-90">multiplication table up to that number. For example, </span><span 
class="fvmr8t-x-x-81">table 5 </span><span 
class="pplr8t-x-x-90">should yield:</span>
     <!--l. 4026--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook141x.png" alt="1   2   3   4   5
2   4   6   8   10
3   6   9   12  15
4   8   12  16  20
5   10  15  20  25 " ></div>
     <!--l. 4035--><p class="noindent" ><span 
class="pplr8t-x-x-90">There is more than one way to represent this as an array of arrays; you may choose.</span>
     </li>
     <li 
  class="enumerate" id="x1-59016x8"><span 
class="pplr8t-x-x-90">The ASCII codes for the lower case letters </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">are 97</span><span 
class="pplr8t-x-x-90">&#x2026;122, and for the upper case letters</span>
     <span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">Z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">they are 65</span><span 
class="pplr8t-x-x-90">&#x2026;90. Use the built-in functions </span><span 
class="fvmr8t-x-x-81">int_of_char </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">char_of_int </span><span 
class="pplr8t-x-x-90">to write</span>
     <span 
class="pplr8t-x-x-90">functions to uppercase and lowercase a character. Non-alphabetic characters should remain</span>
     <span 
class="pplr8t-x-x-90">unaltered.</span>
     </li>
     <li 
  class="enumerate" id="x1-59018x9"><span 
class="pplr8t-x-x-90">Comment on the accuracy of our character, word, line, and sentence statistics in the case of our example</span>
     <span 
class="pplr8t-x-x-90">paragraph. What about in general?</span>
                                                                               
                                                                               
     </li>
     <li 
  class="enumerate" id="x1-59020x10"><span 
class="pplr8t-x-x-90">Choose one of the problems you have identified, and modify our program to fix it.</span>
     </li></ol>
                                                                               
                                                                               
<!--l. 4043--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4045--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-6000013"></a></h2>
<!--l. 4046--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 4050--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 4050--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 4053--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 4053--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4056--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 4056--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 4059--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 4059--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 4062--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 4062--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4065--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 4065--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4068--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 4068--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4071--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 4071--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4074--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 4074--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 4077--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 4077--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 4080--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 4080--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4083--><p class="noindent" ><span 
class="pplr8t-x-x-80">12</span>
<!--l. 4083--><p class="noindent" ><span 
class="pplr8t-x-x-80">The value </span><span 
class="fvmr8t-x-x-72">() </span><span 
class="pplr8t-x-x-80">and its type </span><span 
class="pplb8t-x-x-80">unit</span><span 
class="pplr8t-x-x-80">. Input channels of type </span><span 
class="pplb8t-x-x-80">in</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel </span><span 
class="pplr8t-x-x-80">and output channels of type </span><span 
class="pplb8t-x-x-80">out</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel</span><span 
class="pplr8t-x-x-80">. Built-in functions</span>
<span 
class="pplr8t-x-x-80">for reading from and writing to them respectively.</span>
<!--l. 4086--><p class="noindent" ><span 
class="pplr8t-x-x-80">13</span>
<!--l. 4086--><p class="noindent" ><span 
class="pplr8t-x-x-80">References of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">ref</span><span 
class="pplr8t-x-x-80">. Building them using </span><span 
class="fvmr8t-x-x-72">ref</span><span 
class="pplr8t-x-x-80">, accessing their contents using </span><span 
class="fvmr8t-x-x-72">! </span><span 
class="pplr8t-x-x-80">and updating them using the </span><span 
class="fvmr8t-x-x-72">:= </span><span 
class="pplr8t-x-x-80">operator.</span>
<span 
class="pplr8t-x-x-80">Bracketing expressions together with </span><span 
class="fvmb8t-x-x-72">begin </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmb8t-x-x-72">end </span><span 
class="pplr8t-x-x-80">instead of parentheses for readability. Performing an action many times</span>
<span 
class="pplr8t-x-x-80">based on a boolean condition with the </span><span 
class="fvmb8t-x-x-72">while </span><span 
class="pplri8t-x-x-80">boolean expression </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done </span><span 
class="pplr8t-x-x-80">construct. Performing an</span>
<span 
class="pplr8t-x-x-80">action a fixed number of times with a varying parameter using the </span><span 
class="fvmb8t-x-x-72">for </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">start </span><span 
class="fvmb8t-x-x-72">to </span><span 
class="pplri8t-x-x-80">end </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done</span>
<span 
class="pplr8t-x-x-80">construct. Arrays of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">array</span><span 
class="pplr8t-x-x-80">. Creating an array with the built-in function </span><span 
class="fvmr8t-x-x-72">Array.make</span><span 
class="pplr8t-x-x-80">, finding its length with</span>
<span 
class="fvmr8t-x-x-72">Array.length</span><span 
class="pplr8t-x-x-80">, accessing an element with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">)</span><span 
class="pplr8t-x-x-80">. Updating with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">) <- </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. The built-in function</span>
<span 
class="fvmr8t-x-x-72">String.iter</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;14</span></span><br /><a 
 id="x1-6100014"></a><span 
class="pplr8t-x-x-90">The Other Numbers</span></h2>
<!--l. 4097--><p class="noindent" ><span 
class="pplr8t-x-x-90">The only numbers we have considered until now have been the integers. For a lot of programming tasks, they are</span>
<span 
class="pplr8t-x-x-90">sufficient. And, except for their limited range and the possibility of division by zero, they are easy to understand</span>
<span 
class="pplr8t-x-x-90">and use. However, we must now consider the</span> <a 
 id="dx1-61001"></a><span 
class="pplr8t-x-x-90">real numbers.</span>
<!--l. 4099--><p class="indent" >   <span 
class="pplr8t-x-x-90">It is clearly not possible to represent all numbers exactly &#8211; they might be irrational like </span><span 
class="zptmcm7m-x-x-90">&#x03C0; </span><span 
class="pplr8t-x-x-90">or </span><span 
class="zptmcm7m-x-x-90">e </span><span 
class="pplr8t-x-x-90">and have no</span>
<span 
class="pplr8t-x-x-90">finite representation. For most uses, a representation called</span> <a 
 id="dx1-61002"></a><span 
class="pplri8t-x-x-90">floating-point </span><span 
class="pplr8t-x-x-90">is suitable, and this is how OCaml&#8217;s real</span>
<span 
class="pplr8t-x-x-90">numbers are stored. Not all numbers can be represented exactly, but arithmetic operations are very</span>
<span 
class="pplr8t-x-x-90">quick.</span>
<!--l. 4101--><p class="indent" >   <span 
class="pplr8t-x-x-90">Floating-point numbers have type </span><span 
class="pplb8t-x-x-90">float</span><span 
class="pplr8t-x-x-90">. We can write a floating-point number by including a decimal point</span>
<span 
class="pplr8t-x-x-90">somewhere in it. For example </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1.6</span></span></span> <span 
class="pplr8t-x-x-90">or </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2.</span></span></span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;or </span><span 
class="fvmr8t-x-x-81">386.54123</span><span 
class="pplr8t-x-x-90">. Negative floating-point numbers are preceded by the </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-.</span></span></span>
<span 
class="pplr8t-x-x-90">characters just like negative integers are preceded by the </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span></span></span> <span 
class="pplr8t-x-x-90">character. Similarly, we write</span> <a 
 id="dx1-61003"></a><a 
 id="dx1-61004"></a><a 
 id="dx1-61005"></a><a 
 id="dx1-61006"></a><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">+.</span></span></span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-.</span></span></span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">*.</span></span></span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">/.</span></span></span> <span 
class="pplr8t-x-x-90">for the</span>
<span 
class="pplr8t-x-x-90">standard arithmetic operators on floating-point numbers. Exponentiation is written with the </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">**</span></span></span>
<span 
class="pplr8t-x-x-90">operator.</span>
<!--l. 4104--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.5;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;6.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;-.2.3456;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;-2.3456</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.0</span><span 
class="fvmr8t-x-x-81">&#x00A0;+.</span><span 
class="fvmr8t-x-x-81">&#x00A0;2.5</span><span 
class="fvmr8t-x-x-81">&#x00A0;*.</span><span 
class="fvmr8t-x-x-81">&#x00A0;3.0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8.5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.0</span><span 
class="fvmr8t-x-x-81">&#x00A0;/.</span><span 
class="fvmr8t-x-x-81">&#x00A0;1000.0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0.001</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.</span><span 
class="fvmr8t-x-x-81">&#x00A0;/.</span><span 
class="fvmr8t-x-x-81">&#x00A0;100000.;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1e-05</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;3000.</span><span 
class="fvmr8t-x-x-81">&#x00A0;**</span><span 
class="fvmr8t-x-x-81">&#x00A0;10.;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;5.9049e+34</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;3.123</span><span 
class="fvmr8t-x-x-81">&#x00A0;-.</span><span 
class="fvmr8t-x-x-81">&#x00A0;3.;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0.12300000000000022</span></span></span>
<!--l. 4124--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice an example of the limits of precision in floating-point operations in the final lines. Note also that very</span>
<span 
class="pplr8t-x-x-90">small or very large numbers are written using scientific notation (such as </span><span 
class="fvmr8t-x-x-81">5.9049e+34 </span><span 
class="pplr8t-x-x-90">above). We can find out the</span>
<span 
class="pplr8t-x-x-90">range of numbers available:</span>
<!--l. 4127--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;max_float;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1.79769313486231571e+308</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;min_float;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;float</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;2.22507385850720138e-308</span></span></span>
<!--l. 4135--><p class="noindent" ><span 
class="pplr8t-x-x-90">Working with floating-point numbers requires care, and a comprehensive discussion is outside the scope of this</span>
<span 
class="pplr8t-x-x-90">book. These challenges exist in any programming language using the floating-point system. For example,</span>
<span 
class="pplr8t-x-x-90">evaluating </span><span 
class="fvmr8t-x-x-81">1./.0.</span><span 
class="pplr8t-x-x-90">gives the special value </span><span 
class="fvmr8t-x-x-81">infinity </span><span 
class="pplr8t-x-x-90">(there is no </span><span 
class="fvmr8t-x-x-81">Division_by_zero </span><span 
class="pplr8t-x-x-90">exception for floating-point</span>
<span 
class="pplr8t-x-x-90">operations). There are other special values such as </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">neg_infinity</span></span></span> <span 
class="pplr8t-x-x-90">and </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">nan</span></span></span> <span 
class="pplr8t-x-x-90">(&#8220;not a number&#8221;). We will leave these</span>
<span 
class="pplr8t-x-x-90">complications for now &#8211; just be aware that they are lurking and must be confronted when writing robust</span>
<span 
class="pplr8t-x-x-90">numerical programs.</span>
                                                                               
                                                                               
<!--l. 4137--><p class="indent" >   <span 
class="pplr8t-x-x-90">A number of standard functions are provided, both for operating on floating-point numbers and for</span>
<span 
class="pplr8t-x-x-90">converting to and from them, some of which are listed here:</span>
<!--l. 4142--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook142x.png" alt="-------------------------------------------------------------------------
Function          Type         Description
-------------------------------------------------------------------------
sqrt             float&#x2192; float   Squarerootofanumber.
log              float&#x2192; float   Naturallogarithm.
log10            float&#x2192; float   Logarithm baseten.
sin              float&#x2192; float   Sineofanangle,giveninradians.
cos              float&#x2192; float   Cosineofanangle,giveninradians.
tan              float&#x2192; float   Tangentofanangle,givenin radians.
atan             float&#x2192; float   Arctangentofan angle,giveninradians.
ceil             float&#x2192; float   Calculate the nearest whole number at least as big as a
                             floating- pointnumber.
floor            float&#x2192; float   Thenearestwholenumber atleastas smallasa floating-
                             pointnumber.
float_of_int     int&#x2192;  float     Convertanintegertoafloating-pointnumber.
int_of_float     float&#x2192; int     Build an integer from a floating-point number, ignoring
                             thenon-integerpart.

print_float      float&#x2192; unit    Printafloating-pointnumbertothescreen.
string_of_float  float&#x2192; string   Buildastringfrom a floating- pointnumber.
float_of_string  string &#x2192; float  Build a floating-point number from a string. Raises
-----------------------------Failure-"float_of_string"ona-bad-argument.------  " ></div>
<!--l. 4162--><p class="noindent" ><span 
class="pplr8t-x-x-90">Let us write some functions with floating-point numbers. We will write some simple operations on vectors in two</span>
<span 
class="pplr8t-x-x-90">dimensions. We will represent a point as a pair of floating-point numbers of type </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">float </span><span 
class="pplr8t-x-x-90">such as </span><span 
class="fvmr8t-x-x-81">(2.0,</span>
<span 
class="fvmr8t-x-x-81">3.0)</span><span 
class="pplr8t-x-x-90">. We will represent a vector as a pair of floating-point numbers too. Now we can write a function to build a</span>
<span 
class="pplr8t-x-x-90">vector from one point to another, one to find the length of a vector, one to offset a point by a vector, and one to</span>
<span 
class="pplr8t-x-x-90">scale a vector to a given length:</span>
                                                                               
                                                                               
<!--l. 4166--><p class="noindent" ><img 
src="pandocfiguresmlbook143x.png" alt=""  class="fbox" >
<!--l. 4190--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we have to be careful about division by zero, just as with integers. We have used tuples for the points</span>
<span 
class="pplr8t-x-x-90">because it is easier to read this way &#8211; we could have passed each floating-point number as a separate argument</span>
<span 
class="pplr8t-x-x-90">instead, of course.</span>
<!--l. 4192--><p class="indent" >   <span 
class="pplr8t-x-x-90">Floating-point numbers are often essential, but must be used with caution. You will discover this when</span>
<span 
class="pplr8t-x-x-90">answering the questions for this chapter. Some of these questions require using the built-in functions listed in the</span>
<span 
class="pplr8t-x-x-90">table above.</span>
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-6200014"></a><span 
class="pplr8t-x-x-90">Questions</span></h4>
<!--l. 4196--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-62002x1"><span 
class="pplr8t-x-x-90">Give  a  function  which  rounds  a  positive  floating-point  number  to  the  nearest  whole  number,</span>
     <span 
class="pplr8t-x-x-90">returning another floating-point number.</span>
     </li>
     <li 
  class="enumerate" id="x1-62004x2"><span 
class="pplr8t-x-x-90">Write a function to find the point equidistant from two given points in two dimensions.</span>
     </li>
     <li 
  class="enumerate" id="x1-62006x3"><span 
class="pplr8t-x-x-90">Write a function to separate a floating-point number into its integer and whole parts. Return them</span>
     <span 
class="pplr8t-x-x-90">as a tuple of type </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">float</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-62008x4"><span 
class="pplr8t-x-x-90">Write a function </span><span 
class="fvmr8t-x-x-81">star </span><span 
class="pplr8t-x-x-90">of type </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">which, given a floating-point number between zero and</span>
     <span 
class="pplr8t-x-x-90">one, draws an asterisk to indicate the position. An argument of zero will result in an asterisk in</span>
     <span 
class="pplr8t-x-x-90">column one, and an argument of one an asterisk in column fifty.</span>
     </li>
     <li 
  class="enumerate" id="x1-62010x5"><span 
class="pplr8t-x-x-90">Now write a function </span><span 
class="fvmr8t-x-x-81">plot </span><span 
class="pplr8t-x-x-90">which, given a function of type </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">float</span><span 
class="pplr8t-x-x-90">, a range, and a step size,</span>
     <span 
class="pplr8t-x-x-90">uses </span><span 
class="fvmr8t-x-x-81">star </span><span 
class="pplr8t-x-x-90">to draw a graph. For example, assuming the existence of the name </span><span 
class="fvmr8t-x-x-81">pi </span><span 
class="pplr8t-x-x-90">for </span><span 
class="zptmcm7m-x-x-90">&#x03C0;</span><span 
class="pplr8t-x-x-90">, we might</span>
     <span 
class="pplr8t-x-x-90">see:</span>
     <!--l. 4207--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook144x.png" alt="       OCaml

# plot sin 0. pi (pi /. 20.);;
*
     *
             *
                   *
                          *
                               *

                                    *
                                        *
                                          *
                                            *
                                            *
                                            *
                                          *
                                        *
                                    *
                               *

                          *
                   *
             *
     *
*
     " ></div>
                                                                               
                                                                               
     <!--l. 4235--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here, we have plotted the sine function on the range </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zptmcm7m-x-x-90">&#x03C0; </span><span 
class="pplr8t-x-x-90">in steps of size </span><span 
class="zptmcm7m-x-x-90">&#x03C0;</span><span 
class="zplmr7t-x-x-90">/</span><span 
class="zptmcm7t-x-x-90">20</span><span 
class="pplr8t-x-x-90">. You can define </span><span 
class="zptmcm7m-x-x-90">pi </span><span 
class="pplr8t-x-x-90">by</span>
     <span 
class="pplr8t-x-x-90">calculating </span><span 
class="fvmr8t-x-x-81">4.0 *.</span><span 
class="fvmr8t-x-x-81">&#x00A0;atan 1.0</span><span 
class="pplr8t-x-x-90">.</span></li></ol>
                                                                               
                                                                               
<!--l. 4239--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4241--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-6300014"></a></h2>
<!--l. 4242--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 4246--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 4246--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 4249--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 4249--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4252--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 4252--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 4255--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 4255--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 4258--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 4258--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4261--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 4261--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4264--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 4264--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4267--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 4267--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4270--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 4270--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 4273--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 4273--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 4276--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 4276--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4279--><p class="noindent" ><span 
class="pplr8t-x-x-80">12</span>
<!--l. 4279--><p class="noindent" ><span 
class="pplr8t-x-x-80">The value </span><span 
class="fvmr8t-x-x-72">() </span><span 
class="pplr8t-x-x-80">and its type </span><span 
class="pplb8t-x-x-80">unit</span><span 
class="pplr8t-x-x-80">. Input channels of type </span><span 
class="pplb8t-x-x-80">in</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel </span><span 
class="pplr8t-x-x-80">and output channels of type </span><span 
class="pplb8t-x-x-80">out</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel</span><span 
class="pplr8t-x-x-80">. Built-in functions</span>
<span 
class="pplr8t-x-x-80">for reading from and writing to them respectively.</span>
<!--l. 4282--><p class="noindent" ><span 
class="pplr8t-x-x-80">13</span>
<!--l. 4282--><p class="noindent" ><span 
class="pplr8t-x-x-80">References of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">ref</span><span 
class="pplr8t-x-x-80">. Building them using </span><span 
class="fvmr8t-x-x-72">ref</span><span 
class="pplr8t-x-x-80">, accessing their contents using </span><span 
class="fvmr8t-x-x-72">! </span><span 
class="pplr8t-x-x-80">and updating them using the </span><span 
class="fvmr8t-x-x-72">:= </span><span 
class="pplr8t-x-x-80">operator.</span>
<span 
class="pplr8t-x-x-80">Bracketing expressions together with </span><span 
class="fvmb8t-x-x-72">begin </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmb8t-x-x-72">end </span><span 
class="pplr8t-x-x-80">instead of parentheses for readability. Performing an action many times</span>
<span 
class="pplr8t-x-x-80">based on a boolean condition with the </span><span 
class="fvmb8t-x-x-72">while </span><span 
class="pplri8t-x-x-80">boolean expression </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done </span><span 
class="pplr8t-x-x-80">construct. Performing an</span>
<span 
class="pplr8t-x-x-80">action a fixed number of times with a varying parameter using the </span><span 
class="fvmb8t-x-x-72">for </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">start </span><span 
class="fvmb8t-x-x-72">to </span><span 
class="pplri8t-x-x-80">end </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done</span>
<span 
class="pplr8t-x-x-80">construct. Arrays of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">array</span><span 
class="pplr8t-x-x-80">. Creating an array with the built-in function </span><span 
class="fvmr8t-x-x-72">Array.make</span><span 
class="pplr8t-x-x-80">, finding its length with</span>
<span 
class="fvmr8t-x-x-72">Array.length</span><span 
class="pplr8t-x-x-80">, accessing an element with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">)</span><span 
class="pplr8t-x-x-80">. Updating with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">) <- </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. The built-in function</span>
<span 
class="fvmr8t-x-x-72">String.iter</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4285--><p class="noindent" ><span 
class="pplr8t-x-x-80">14</span>
<!--l. 4285--><p class="noindent" ><span 
class="pplr8t-x-x-80">Floating-point numbers </span><span 
class="fvmr8t-x-x-72">min_float</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_float </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">float</span><span 
class="pplr8t-x-x-80">. Floating-point operators </span><span 
class="fvmr8t-x-x-72">+.*.-./.** </span><span 
class="pplr8t-x-x-80">and built-in functions</span>
<span 
class="fvmr8t-x-x-72">sqrtlog </span><span 
class="pplr8t-x-x-80">etc.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;15</span></span><br /><a 
 id="x1-6400015"></a><span 
class="pplr8t-x-x-90">The OCaml Standard Library</span></h2>
<!--l. 4297--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml is provided with a wide range of useful built-in functions, in addition to the ones we have already seen,</span>
<span 
class="pplr8t-x-x-90">called the</span> <a 
 id="dx1-64001"></a><span 
class="pplri8t-x-x-90">OCaml Standard Library</span><span 
class="pplr8t-x-x-90">. These functions are divided into</span> <a 
 id="dx1-64002"></a><span 
class="pplri8t-x-x-90">modules</span><span 
class="pplr8t-x-x-90">, one for each area of functionality (in</span>
<span 
class="pplr8t-x-x-90">the next chapter, we will learn how to write our own modules). Here are a few examples of modules in the</span>
<span 
class="pplr8t-x-x-90">standard library:</span>
<!--l. 4303--><p class="noindent" ><div class="pic-tabular"><img 
src="pandocfiguresmlbook145x.png" alt="--------------------------------------------------------
List    The Listmoduleprovidesmany functionsoverlists, some of
       which wehavealreadywrittenourselvesin earlierchapters. It
       also providesasimpleimplementationofdictionaries,andlist
       sortingand searchingfunctions.
Array   Functionsforcreatingandmodifying arrays,conversiontoand
       fromlists,and arraysorting. Functionstoiterateoverarrays.
Char    Operationson characters,including conversionsbetween char-
       actersand their integerequivalents.
String  Functionstobuildand modify strings,togetherwithsearching,
       mapping,anditerationfunctions.
Random  Generating pseudo-random integers and floating-point num-
       bers.
Buffer  Buffers are used for building strings up from sub- strings or
       characters,withoutthecostofrepeated stringconcatenation.
Printf  Functions for printing with &#8220;format strings&#8221;, which are more
       flexible and concise than repeated use of print_int and
       print_stringetc.
--------------------------------------------------------  " ></div>
<!--l. 4316--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will take the </span><span 
class="fvmr8t-x-x-81">List </span><span 
class="pplr8t-x-x-90">module as an example. You can find the documentation for the OCaml Standard Library</span>
<span 
class="pplr8t-x-x-90">installed with your copy of OCaml, or on the internet.</span>
<!--l. 4318--><p class="indent" >   <span 
class="pplr8t-x-x-90">The functions from a module can be used by putting a period (full stop) between the module name and the</span>
<span 
class="pplr8t-x-x-90">function. For example the </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">function in the </span><span 
class="fvmr8t-x-x-81">List </span><span 
class="pplr8t-x-x-90">module can be used like this:</span>
<!--l. 4321--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># List.length [1; 2; 3; 4; 5];;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span>
<!--l. 4327--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can look at the type too by writing just the name of the function:</span>
<!--l. 4330--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># List.length;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4336--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here&#8217;s the documentation for </span><span 
class="fvmr8t-x-x-81">List.length</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 4340--><p class="noindent" ><img 
src="pandocfiguresmlbook146x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 4348--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will talk about </span><span 
class="fvmb8t-x-x-81">val </span><span 
class="pplr8t-x-x-90">in the next chapter. Sometimes, more information is required:</span>
<!--l. 4352--><p class="noindent" ><img 
src="pandocfiguresmlbook147x.png" alt=""  class="fbox" >
<!--l. 4360--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example,</span>
<!--l. 4363--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># List.nth [1; 2; 4; 8; 16] 3;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span></span></span>
<!--l. 4369--><p class="noindent" ><span 
class="pplr8t-x-x-90">In the documentation, we are told what the function does for each argument, and what exceptions may be</span>
<span 
class="pplr8t-x-x-90">raised. Functions which are not tail-recursive and so may fail on huge arguments are marked as</span>
<span 
class="pplr8t-x-x-90">such.</span>
<!--l. 4371--><p class="indent" >   <span 
class="pplr8t-x-x-90">The questions for this chapter use functions from the standard library, so you will need to have a copy of the</span>
<span 
class="pplr8t-x-x-90">documentation to hand.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-6500015"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 4376--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-65002x1"><span 
class="pplr8t-x-x-90">Write your own version of the function </span><span 
class="fvmr8t-x-x-81">List.concat</span><span 
class="pplr8t-x-x-90">. The implementation OCaml provides is not</span>
     <span 
class="pplr8t-x-x-90">tail-recursive. Can you write one which is?</span>
     </li>
     <li 
  class="enumerate" id="x1-65004x2"><span 
class="pplr8t-x-x-90">Use </span><span 
class="fvmr8t-x-x-81">List.mem </span><span 
class="pplr8t-x-x-90">to write a function which returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">only if every list in a </span><span 
class="pplb8t-x-x-90">bool list list </span><span 
class="pplr8t-x-x-90">contains</span>
     <span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">somewhere in it.</span>
     </li>
     <li 
  class="enumerate" id="x1-65006x3"><span 
class="pplr8t-x-x-90">Write a function to count the number of exclamation marks in a string, using one or more functions</span>
     <span 
class="pplr8t-x-x-90">from the </span><span 
class="fvmr8t-x-x-81">String </span><span 
class="pplr8t-x-x-90">module.</span>
     </li>
     <li 
  class="enumerate" id="x1-65008x4"><span 
class="pplr8t-x-x-90">Use  the  </span><span 
class="fvmr8t-x-x-81">String.map </span><span 
class="pplr8t-x-x-90">function  to  write  a  function  to  return  a  new  copy  of  a  string  with  all</span>
     <span 
class="pplr8t-x-x-90">exclamation marks replaced with periods (full stops).</span>
     </li>
     <li 
  class="enumerate" id="x1-65010x5"><span 
class="pplr8t-x-x-90">Use the </span><span 
class="fvmr8t-x-x-81">String </span><span 
class="pplr8t-x-x-90">module to write a function which concatenates a list of strings together.</span>
     </li>
     <li 
  class="enumerate" id="x1-65012x6"><span 
class="pplr8t-x-x-90">Do the same with the </span><span 
class="fvmr8t-x-x-81">Buffer </span><span 
class="pplr8t-x-x-90">module. This will be faster.</span>
     </li>
     <li 
  class="enumerate" id="x1-65014x7"><span 
class="pplr8t-x-x-90">Use the </span><span 
class="fvmr8t-x-x-81">String </span><span 
class="pplr8t-x-x-90">module to count the number of occurrences of the string </span><span 
class="fvmr8t-x-x-81">"OCaml" </span><span 
class="pplr8t-x-x-90">within a given</span>
     <span 
class="pplr8t-x-x-90">string.</span></li></ol>
                                                                               
                                                                               
<!--l. 4386--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4388--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-6600015"></a></h2>
<!--l. 4389--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 4393--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 4393--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 4396--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 4396--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4399--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 4399--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 4402--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 4402--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 4405--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 4405--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4408--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 4408--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4411--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 4411--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4414--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 4414--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4417--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 4417--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 4420--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 4420--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 4423--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 4423--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4426--><p class="noindent" ><span 
class="pplr8t-x-x-80">12</span>
<!--l. 4426--><p class="noindent" ><span 
class="pplr8t-x-x-80">The value </span><span 
class="fvmr8t-x-x-72">() </span><span 
class="pplr8t-x-x-80">and its type </span><span 
class="pplb8t-x-x-80">unit</span><span 
class="pplr8t-x-x-80">. Input channels of type </span><span 
class="pplb8t-x-x-80">in</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel </span><span 
class="pplr8t-x-x-80">and output channels of type </span><span 
class="pplb8t-x-x-80">out</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel</span><span 
class="pplr8t-x-x-80">. Built-in functions</span>
<span 
class="pplr8t-x-x-80">for reading from and writing to them respectively.</span>
<!--l. 4429--><p class="noindent" ><span 
class="pplr8t-x-x-80">13</span>
<!--l. 4429--><p class="noindent" ><span 
class="pplr8t-x-x-80">References of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">ref</span><span 
class="pplr8t-x-x-80">. Building them using </span><span 
class="fvmr8t-x-x-72">ref</span><span 
class="pplr8t-x-x-80">, accessing their contents using </span><span 
class="fvmr8t-x-x-72">! </span><span 
class="pplr8t-x-x-80">and updating them using the </span><span 
class="fvmr8t-x-x-72">:= </span><span 
class="pplr8t-x-x-80">operator.</span>
<span 
class="pplr8t-x-x-80">Bracketing expressions together with </span><span 
class="fvmb8t-x-x-72">begin </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmb8t-x-x-72">end </span><span 
class="pplr8t-x-x-80">instead of parentheses for readability. Performing an action many times</span>
<span 
class="pplr8t-x-x-80">based on a boolean condition with the </span><span 
class="fvmb8t-x-x-72">while </span><span 
class="pplri8t-x-x-80">boolean expression </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done </span><span 
class="pplr8t-x-x-80">construct. Performing an</span>
<span 
class="pplr8t-x-x-80">action a fixed number of times with a varying parameter using the </span><span 
class="fvmb8t-x-x-72">for </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">start </span><span 
class="fvmb8t-x-x-72">to </span><span 
class="pplri8t-x-x-80">end </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done</span>
<span 
class="pplr8t-x-x-80">construct. Arrays of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">array</span><span 
class="pplr8t-x-x-80">. Creating an array with the built-in function </span><span 
class="fvmr8t-x-x-72">Array.make</span><span 
class="pplr8t-x-x-80">, finding its length with</span>
<span 
class="fvmr8t-x-x-72">Array.length</span><span 
class="pplr8t-x-x-80">, accessing an element with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">)</span><span 
class="pplr8t-x-x-80">. Updating with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">) <- </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. The built-in function</span>
<span 
class="fvmr8t-x-x-72">String.iter</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4432--><p class="noindent" ><span 
class="pplr8t-x-x-80">14</span>
<!--l. 4432--><p class="noindent" ><span 
class="pplr8t-x-x-80">Floating-point numbers </span><span 
class="fvmr8t-x-x-72">min_float</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_float </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">float</span><span 
class="pplr8t-x-x-80">. Floating-point operators </span><span 
class="fvmr8t-x-x-72">+.*.-./.** </span><span 
class="pplr8t-x-x-80">and built-in functions</span>
<span 
class="fvmr8t-x-x-72">sqrtlog </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4435--><p class="noindent" ><span 
class="pplr8t-x-x-80">15</span>
<!--l. 4435--><p class="noindent" ><span 
class="pplr8t-x-x-80">Using functions from the OCaml Standard Library with the form </span><span 
class="pplri8t-x-x-80">Module</span><span 
class="fvmr8t-x-x-72">.</span><span 
class="pplri8t-x-x-80">function</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
   <h2 class="chapterHead"><span class="titlemark"><span 
class="pplr8t-x-x-90">Chapter</span><span 
class="pplr8t-x-x-90">&#x00A0;16</span></span><br /><a 
 id="x1-6700016"></a><span 
class="pplr8t-x-x-90">Building Bigger Programs</span></h2>
<!--l. 4446--><p class="noindent" ><span 
class="pplr8t-x-x-90">So far we have been writing little programs and testing them interactively in OCaml. However, to conquer the</span>
<span 
class="pplr8t-x-x-90">complexity of the task of writing larger programs, tools are needed to split them into well-defined</span> <a 
 id="dx1-67001"></a><span 
class="pplri8t-x-x-90">modules</span><span 
class="pplr8t-x-x-90">, each</span>
<span 
class="pplr8t-x-x-90">with a given set of types and functions. We can then build big systems without worrying that some internal</span>
<span 
class="pplr8t-x-x-90">change to a single module will affect the whole program. This process of modularization is known as</span>
<a 
 id="dx1-67002"></a><span 
class="pplri8t-x-x-90">abstraction</span><span 
class="pplr8t-x-x-90">, and is fundamental to writing large programs, a discipline sometimes called</span> <a 
 id="dx1-67003"></a><span 
class="pplri8t-x-x-90">software</span>
<span 
class="pplri8t-x-x-90">engineering</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4448--><p class="indent" >   <span 
class="pplr8t-x-x-90">In this chapter, you will have to create text files and type commands into the command prompt of your</span>
<span 
class="pplr8t-x-x-90">computer. If you&#8217;re not sure how to do this, or the examples in this chapter do not work for you, ask a friend</span>
<span 
class="pplr8t-x-x-90">or teacher. In particular, if using Microsoft Windows, some of the commands may have different</span>
<span 
class="pplr8t-x-x-90">names.</span>
   <h3 class="likesectionHead"><a 
 id="x1-6800016"></a><span 
class="pplr8t-x-x-90">Making a module</span></h3>
<!--l. 4452--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will be building a modular version of our text statistics program from Chapter </span><a 
href="#x1-5500013"><span 
class="pplr8t-x-x-90">13</span><!--tex4ht:ref: puttingthingsinboxes --></a><span 
class="pplr8t-x-x-90">. First, write the text file</span>
<span 
class="pplr8t-x-x-90">shown in Figure </span><a 
href="#x1-680011"><span 
class="pplr8t-x-x-90">16.1</span><!--tex4ht:ref: textstat.ml --></a> <span 
class="pplr8t-x-x-90">(but not the italic annotations) and save it as </span><span 
class="fvmr8t-x-x-81">textstat.ml </span><span 
class="pplr8t-x-x-90">(OCaml programs live in files</span>
<span 
class="pplr8t-x-x-90">with lowercase names ending in </span><span 
class="fvmr8t-x-x-81">.ml</span><span 
class="pplr8t-x-x-90">).</span>
<!--l. 4454--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-680011"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 4455--><p class="noindent" >
<!--l. 4469--><p class="noindent" ><img 
src="pandocfiguresmlbook148x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16.1: </span><span  
class="content"><span 
class="fvmr8t-x-x-81">textstat.ml</span></span></div><!--tex4ht:label?: x1-680011 -->
                                                                               
                                                                               
<!--l. 4473--><p class="indent" >   </div><hr class="endfigure">
<!--l. 4475--><p class="indent" >   <span 
class="pplr8t-x-x-90">The first line is a</span> <a 
 id="dx1-68002"></a><span 
class="pplr8t-x-x-90">comment. Comments in OCaml are written between </span><span 
class="fvmr8t-x-x-81">(* </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">*)</span><span 
class="pplr8t-x-x-90">. We use comments in large</span>
<span 
class="pplr8t-x-x-90">programs to help the reader (who might be someone else, or ourselves some time later) to understand the</span>
<span 
class="pplr8t-x-x-90">program.</span>
<!--l. 4477--><p class="indent" >   <span 
class="pplr8t-x-x-90">We have then introduced a type for our statistics. This will hold the number of words, characters, and</span>
<span 
class="pplr8t-x-x-90">sentences. We have then written a function </span><span 
class="fvmr8t-x-x-81">stats_from_channel </span><span 
class="pplr8t-x-x-90">which for now just returns zeros for all the</span>
<span 
class="pplr8t-x-x-90">statistics.</span>
<!--l. 4479--><p class="indent" >   <span 
class="pplr8t-x-x-90">Now, we can issue a command to turn this program into a pre-processed OCaml module. This</span> <a 
 id="dx1-68003"></a><span 
class="pplri8t-x-x-90">compiles </span><span 
class="pplr8t-x-x-90">the</span>
<span 
class="pplr8t-x-x-90">program into an</span> <a 
 id="dx1-68004"></a><span 
class="pplri8t-x-x-90">executable</span><span 
class="pplr8t-x-x-90">. The module can then be loaded into interactive OCaml, or used to build standalone</span>
<span 
class="pplr8t-x-x-90">programs. Execute the following command:</span>
<!--l. 4482--><p class="indent" >   <span 
class="fvmr8t-x-x-81">ocamlc textstat.ml</span>
<!--l. 4485--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can see that the name of the OCaml compiler is </span><span 
class="fvmr8t-x-x-81">ocamlc</span><span 
class="pplr8t-x-x-90">. If there are errors in </span><span 
class="fvmr8t-x-x-81">textstat.ml </span><span 
class="pplr8t-x-x-90">they will be</span>
<span 
class="pplr8t-x-x-90">printed out, including the line and character number of the problem. You must fix these, and try the command</span>
<span 
class="pplr8t-x-x-90">again. If compilation succeeds, you will see the file </span><span 
class="fvmr8t-x-x-81">textstat.cmo </span><span 
class="pplr8t-x-x-90">in the current directory. There will</span>
<span 
class="pplr8t-x-x-90">be other files, but we are not worried about those yet. Let us load our pre-compiled module into</span>
<span 
class="pplr8t-x-x-90">OCaml:</span>
<!--l. 4488--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># #load "textstat.cmo";;</span>                                                   <span 
class="pplri8t-x-x-90">load the</span>
<span 
class="pplri8t-x-x-90">module</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;Textstat.stats_from_file "gregor.txt";;</span>                                     <span 
class="pplri8t-x-x-90">use a</span>
<span 
class="pplri8t-x-x-90">function</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int * int * int * int = (0, 0, 0, 0)</span>
<!--l. 4495--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that</span> <a 
 id="dx1-68005"></a><span 
class="fvmr8t-x-x-81">#load </span><span 
class="pplr8t-x-x-90">is different from our earlier </span><span 
class="fvmr8t-x-x-81">#use </span><span 
class="pplr8t-x-x-90">command &#8211; that was just reading a file as if it had been cut and</span>
<span 
class="pplr8t-x-x-90">pasted &#8211; we are really loading the compiled module here.</span>
   <h3 class="likesectionHead"><a 
 id="x1-6900016"></a><span 
class="pplr8t-x-x-90">Filling out the module</span></h3>
<!--l. 4499--><p class="noindent" ><span 
class="pplr8t-x-x-90">Let us add a real </span><span 
class="fvmr8t-x-x-81">stats_from_channel </span><span 
class="pplr8t-x-x-90">function, to produce a working text statistics module. We will also add</span>
<span 
class="pplr8t-x-x-90">utility functions for retrieving individual statistics from the </span><span 
class="fvmr8t-x-x-81">stats </span><span 
class="pplr8t-x-x-90">type. This is shown in Figure </span><a 
href="#x1-690012"><span 
class="pplr8t-x-x-90">16.2</span><!--tex4ht:ref: textstat2.ml --></a><span 
class="pplr8t-x-x-90">. We can</span>
<span 
class="pplr8t-x-x-90">compile it in the same way, and try it with our example file:</span>
<!--l. 4501--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-690012"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 4502--><p class="noindent" >
<!--l. 4546--><p class="noindent" ><img 
src="pandocfiguresmlbook149x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16.2: </span><span  
class="content"><span 
class="fvmr8t-x-x-81">textstat.ml</span></span></div><!--tex4ht:label?: x1-690012 -->
                                                                               
                                                                               
<!--l. 4550--><p class="indent" >   </div><hr class="endfigure">
<!--l. 4554--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># #load "textstat.cmo";;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;s</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Textstat.stats_from_file "gregor.txt";;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val s :</span><span 
class="fvmr8t-x-x-81">&#x00A0;Textstat.stats = (8, 464, 80, 4)</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.lines s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 8</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.characters s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 464</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.words s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 80</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.sentences s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 4</span>
<!--l. 4569--><p class="noindent" ><span 
class="pplr8t-x-x-90">You might ask why we need the functions </span><span 
class="fvmr8t-x-x-81">lines</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">characters </span><span 
class="pplr8t-x-x-90">etc. when the information is returned in the tuple.</span>
<span 
class="pplr8t-x-x-90">Let us discuss that now.</span>
   <h3 class="likesectionHead"><a 
 id="x1-7000016"></a><span 
class="pplr8t-x-x-90">Making an interface</span></h3>
<a 
 id="dx1-70001"></a>
<!--l. 4574--><p class="noindent" ><span 
class="pplr8t-x-x-90">We said that modules were for creating abstractions, so that the implementation of an individual module could</span>
<span 
class="pplr8t-x-x-90">be altered without changing the rest of the program. However, we have not achieved that yet &#8211; the details of the</span>
<span 
class="pplr8t-x-x-90">internal type are visible to the program using the module, and that program would break if we changed the type</span>
<span 
class="pplr8t-x-x-90">of </span><span 
class="fvmr8t-x-x-81">stats </span><span 
class="pplr8t-x-x-90">to hold an additional statistic. In addition, the internal </span><span 
class="fvmr8t-x-x-81">count_words </span><span 
class="pplr8t-x-x-90">function is available, even though</span>
<span 
class="pplr8t-x-x-90">the user of the module is not expected to use it.</span>
<!--l. 4576--><p class="indent" >   <span 
class="pplr8t-x-x-90">What we would like to do is to restrict the module so that only the types and functions we want to be used</span>
<span 
class="pplr8t-x-x-90">directly are available. For this, we use an </span><span 
class="pplri8t-x-x-90">interface</span><span 
class="pplr8t-x-x-90">. Interfaces are held in files ending in </span><span 
class="fvmr8t-x-x-81">.mli</span><span 
class="pplr8t-x-x-90">, and we can write</span>
<span 
class="pplr8t-x-x-90">one for our module. Our interface is shown in Figure </span><a 
href="#x1-700023"><span 
class="pplr8t-x-x-90">16.3</span><!--tex4ht:ref: textstat.mli --></a><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4578--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-700023"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 4579--><p class="noindent" >
<!--l. 4596--><p class="noindent" ><img 
src="pandocfiguresmlbook150x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16.3: </span><span  
class="content"><span 
class="fvmr8t-x-x-81">textstat.mli</span></span></div><!--tex4ht:label?: x1-700023 -->
                                                                               
                                                                               
<!--l. 4600--><p class="indent" >   </div><hr class="endfigure">
<!--l. 4603--><p class="indent" >   <span 
class="pplr8t-x-x-90">In this interface, we have exposed every type and function. Types are written in the same way as in the </span><span 
class="fvmr8t-x-x-81">.ml</span>
<span 
class="pplr8t-x-x-90">file. Functions are written with</span> <a 
 id="dx1-70003"></a><span 
class="fvmb8t-x-x-81">val</span><span 
class="pplr8t-x-x-90">, followed by the name, a colon, and the type of the function. We can compile</span>
<span 
class="pplr8t-x-x-90">this by giving the</span><span 
class="fvmr8t-x-x-81">.mli </span><span 
class="pplr8t-x-x-90">file together with the</span><span 
class="fvmr8t-x-x-81">.ml </span><span 
class="pplr8t-x-x-90">file when using </span><span 
class="fvmr8t-x-x-81">ocamlc</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 4606--><p class="indent" >   <span 
class="fvmr8t-x-x-81">ocamlc textstat.mli textstat.ml</span>
<!--l. 4609--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">ocamlc </span><span 
class="pplr8t-x-x-90">compiler has created at least two files: </span><span 
class="fvmr8t-x-x-81">textstat.cmo </span><span 
class="pplr8t-x-x-90">as before and </span><span 
class="fvmr8t-x-x-81">textstat.cmi </span><span 
class="pplr8t-x-x-90">(the compiled</span>
<span 
class="pplr8t-x-x-90">interface). You should find this operates exactly as before when loaded into OCaml. Now, let us remove the</span>
<span 
class="pplr8t-x-x-90">definition of the type from the interface, to make sure that the stats type is</span> <a 
 id="dx1-70004"></a><span 
class="pplr8t-x-x-90">hidden, and its parts can only be</span>
<span 
class="pplr8t-x-x-90">accessed using the </span><span 
class="fvmr8t-x-x-81">lines</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">characters</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">words</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">sentences </span><span 
class="pplr8t-x-x-90">functions. We will also remove the declaration for</span>
<span 
class="fvmr8t-x-x-81">stats_from_channel </span><span 
class="pplr8t-x-x-90">to demonstrate that functions we do not need can be hidden too. This is shown in Figure</span>
<a 
href="#x1-700054"><span 
class="pplr8t-x-x-90">16.4</span><!--tex4ht:ref: textstat2.mli --></a><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4611--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-700054"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 4612--><p class="noindent" >
<!--l. 4627--><p class="noindent" ><img 
src="pandocfiguresmlbook151x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16.4: </span><span  
class="content"><span 
class="fvmr8t-x-x-81">textstat.mli </span><span 
class="pplr8t-x-x-90">with hidden (abstract) type</span></span></div><!--tex4ht:label?: x1-700054 -->
                                                                               
                                                                               
<!--l. 4631--><p class="indent" >   </div><hr class="endfigure">
<!--l. 4633--><p class="indent" >   <span 
class="pplr8t-x-x-90">Now, if we compile the program again with </span><span 
class="fvmr8t-x-x-81">ocamlc textstat.mli textstat.ml</span><span 
class="pplr8t-x-x-90">, we see that the</span>
<span 
class="fvmr8t-x-x-81">stats_of_channel </span><span 
class="pplr8t-x-x-90">function is now not accessible, and the type of stats is now hidden, or </span><span 
class="pplri8t-x-x-90">abstract</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4636--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># #load "textstat.cmo";;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;s</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;Textstat.stats_from_file "gregor.txt";;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val s :</span><span 
class="fvmr8t-x-x-81">&#x00A0;Textstat.stats = <abstr>                                          </span><span 
class="pplri8t-x-x-90">the type is now</span>
<span 
class="pplri8t-x-x-90">abstract</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.lines s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 8</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.characters s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 464</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.words s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 80</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># Textstat.sentences s;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 4</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">Textstat.stats_from_channel</span></span><span 
class="fvmr8t-x-x-81">;;                                       </span><span 
class="pplri8t-x-x-90">we have hidden this</span>
<span 
class="pplri8t-x-x-90">function</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Unbound value Textstat.stats_from_channel</span>
<!--l. 4653--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have successfully separated the implementation of our module from its interface &#8211; we can now change the</span>
<span 
class="fvmr8t-x-x-81">stats </span><span 
class="pplr8t-x-x-90">type internally to hold extra statistics without invalidating existing programs. This is</span> <a 
 id="dx1-70006"></a><span 
class="pplr8t-x-x-90">abstraction in a</span>
<span 
class="pplr8t-x-x-90">nutshell.</span>
   <h3 class="likesectionHead"><a 
 id="x1-7100016"></a><span 
class="pplr8t-x-x-90">Building standalone programs</span></h3>
<!--l. 4657--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now it is time to cut ourselves free from interactive OCaml, and build standalone programs which can be</span>
<span 
class="pplr8t-x-x-90">executed directly. Let us add another file </span><span 
class="fvmr8t-x-x-81">stats.ml </span><span 
class="pplr8t-x-x-90">which will use functions from the </span><span 
class="fvmr8t-x-x-81">Textstat </span><span 
class="pplr8t-x-x-90">module to create</span>
<span 
class="pplr8t-x-x-90">a program which, when given a file name, prints some statistics about it. This is illustrated in Figure </span><a 
href="#x1-710015"><span 
class="pplr8t-x-x-90">16.5</span><!--tex4ht:ref: stats.ml --></a><span 
class="pplr8t-x-x-90">. There</span>
<span 
class="pplr8t-x-x-90">are some new things here:</span>
<!--l. 4659--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                               
                                                                               
<a 
 id="x1-710015"></a>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 4660--><p class="noindent" >
<!--l. 4690--><p class="noindent" ><img 
src="pandocfiguresmlbook152x.png" alt=""  class="fbox" ></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;16.5: </span><span  
class="content"><span 
class="fvmr8t-x-x-81">stats.ml</span></span></div><!--tex4ht:label?: x1-710015 -->
                                                                               
                                                                               
<!--l. 4694--><p class="indent" >   </div><hr class="endfigure">
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-71003x1"><span 
class="pplr8t-x-x-90">The built-in array </span><span 
class="fvmr8t-x-x-81">Sys.argv </span><span 
class="pplr8t-x-x-90">lists the arguments given to a command written at the command line.</span>
     <span 
class="pplr8t-x-x-90">The first is the name of our program, so we ignore that. The second will be the name of the file the</span>
     <span 
class="pplr8t-x-x-90">user wants our program to inspect. So, we match against that array. If there is any other array size,</span>
     <span 
class="pplr8t-x-x-90">we print out a usage message.</span>
     </li>
     <li 
  class="enumerate" id="x1-71005x2"><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">Printexc.to_string </span><span 
class="pplr8t-x-x-90">from the OCaml Standard Library converts an exception into</span>
     <span 
class="pplr8t-x-x-90">a string &#8211; we use this to print out the error.</span>
     </li>
     <li 
  class="enumerate" id="x1-71007x3"><span 
class="pplr8t-x-x-90">There was an error, so it is convention to specify an </span><span 
class="pplri8t-x-x-90">exit code </span><span 
class="pplr8t-x-x-90">of 1 rather than 0. Do not worry about</span>
     <span 
class="pplr8t-x-x-90">this.</span></li></ol>
<!--l. 4703--><p class="noindent" ><span 
class="pplr8t-x-x-90">Let us compile this standalone program using </span><span 
class="fvmr8t-x-x-81">ocamlc</span><span 
class="pplr8t-x-x-90">, giving a name for the executable program using the </span><span 
class="fvmr8t-x-x-81">-o</span>
<span 
class="pplr8t-x-x-90">option:</span>
<a 
 id="dx1-71008"></a>
<!--l. 4706--><p class="indent" >   <span 
class="fvmr8t-x-x-81">ocamlc textstat.mli textstat.ml stats.ml -o stats</span>
<!--l. 4709--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, we can run the program:</span>
<!--l. 4712--><p class="noindent" ><span 
class="fvmr8t-x-x-81">$ ./stats gregor.txt</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Words:</span><span 
class="fvmr8t-x-x-81">&#x00A0;80</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Characters:</span><span 
class="fvmr8t-x-x-81">&#x00A0;464</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Sentences:</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Lines:</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><br 
class="newline" />
<!--l. 4718--><p class="noindent" ><span 
class="fvmr8t-x-x-81">$ ./stats not_there.txt</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">An error occurred:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Sys_error("not_there.txt: No such file or directory")</span><br 
class="newline" />
<!--l. 4721--><p class="noindent" ><span 
class="fvmr8t-x-x-81">$ ./stats</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Usage:</span><span 
class="fvmr8t-x-x-81">&#x00A0;stats <filename></span>
<!--l. 4725--><p class="noindent" ><span 
class="pplr8t-x-x-90">This output might look different on your computer, depending on your operating system. On most computers,</span>
<span 
class="pplr8t-x-x-90">the</span> <a 
 id="dx1-71009"></a><span 
class="fvmr8t-x-x-81">ocamlopt </span><span 
class="pplr8t-x-x-90">compiler is also available. If we type</span>
<!--l. 4728--><p class="indent" >   <span 
class="fvmr8t-x-x-81">ocamlopt textstat.mli textstat.ml stats.ml -o stats</span>
<!--l. 4731--><p class="noindent" ><span 
class="pplr8t-x-x-90">we obtain an executable which is much faster than before, and completely independent of OCaml &#8211; it can</span>
<span 
class="pplr8t-x-x-90">run on any computer which has the same processor and operating system (such as Windows or</span>
<span 
class="pplr8t-x-x-90">Mac OS X) as yours, with no need for an OCaml installation. On the other hand, the advantage of</span>
<span 
class="fvmr8t-x-x-81">ocamlc </span><span 
class="pplr8t-x-x-90">is that it produces a program which can run on any computer, so long as OCaml support is</span>
<span 
class="pplr8t-x-x-90">installed.</span>
                                                                               
                                                                               
   <h3 class="likesectionHead"><a 
 id="x1-7200016"></a><span 
class="pplr8t-x-x-90">Questions</span></h3>
<!--l. 4736--><p class="noindent" >
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-72002x1"><span 
class="pplr8t-x-x-90">Extend our example to print the character histogram data as we did in Chapter </span><a 
href="#x1-5500013"><span 
class="pplr8t-x-x-90">13</span><!--tex4ht:ref: puttingthingsinboxes --></a><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-72004x2"><span 
class="pplr8t-x-x-90">Write and compile a standalone program to reverse the lines in a text file, writing to another file.</span>
     </li>
     <li 
  class="enumerate" id="x1-72006x3"><span 
class="pplr8t-x-x-90">Write  a  program  which  takes  sufficiently  long  to  run  to  allow  you  to  compare  the  speed  of</span>
     <span 
class="pplr8t-x-x-90">programs compiled with </span><span 
class="fvmr8t-x-x-81">ocamlc </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">ocamlopt</span><span 
class="pplr8t-x-x-90">.</span>
     </li>
     <li 
  class="enumerate" id="x1-72008x4"><span 
class="pplr8t-x-x-90">Write a standalone program to search for a given string in a file. Lines where the string is found</span>
     <span 
class="pplr8t-x-x-90">should be printed to the screen.</span></li></ol>
                                                                               
                                                                               
<!--l. 4743--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4745--><p class="indent" >
                                                                               
                                                                               
   <h2 class="likechapterHead"><a 
 id="x1-7300016"></a></h2>
<!--l. 4746--><p class="noindent" ><span 
class="pplr8t-x-x-248">So Far</span><br 
class="newline" />
<!--l. 4750--><p class="noindent" ><span 
class="pplr8t-x-x-80">1</span>
<!--l. 4750--><p class="noindent" ><span 
class="pplr8t-x-x-80">Integers </span><span 
class="fvmr8t-x-x-72">min_int</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">0</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">1</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">2</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">3</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_int </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">int</span><span 
class="pplr8t-x-x-80">. Booleans </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">false </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">bool</span><span 
class="pplr8t-x-x-80">. Characters</span>
<span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">char </span><span 
class="pplr8t-x-x-80">like </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">X</span><span 
class="fvmr8c-x-x-72">' </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8c-x-x-72">'</span><span 
class="fvmr8t-x-x-72">!</span><span 
class="fvmr8c-x-x-72">'</span><span 
class="pplr8t-x-x-80">. Mathematical operators </span><span 
class="fvmr8t-x-x-72">+ - * / mod </span><span 
class="pplr8t-x-x-80">which take two integers and give another.</span>
<span 
class="pplr8t-x-x-80">Operators </span><span 
class="fvmr8t-x-x-72">=<<=>>=<> </span><span 
class="pplr8t-x-x-80">which compare two values and evaluate to either </span><span 
class="fvmr8t-x-x-72">true </span><span 
class="pplr8t-x-x-80">or </span><span 
class="fvmr8t-x-x-72">false</span><span 
class="pplr8t-x-x-80">. The conditional </span><span 
class="fvmb8t-x-x-72">if</span>
<span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">then </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">else </span><span 
class="pplri8t-x-x-80">expression3</span><span 
class="pplr8t-x-x-80">, where </span><span 
class="pplri8t-x-x-80">expresssion1 </span><span 
class="pplr8t-x-x-80">has type </span><span 
class="pplb8t-x-x-80">bool </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="pplr8t-x-x-80">and </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">have</span>
<span 
class="pplr8t-x-x-80">the same type as one another. The boolean operators </span><span 
class="fvmr8t-x-x-72">&& </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">|| </span><span 
class="pplr8t-x-x-80">which allow us to build compound boolean</span>
<span 
class="pplr8t-x-x-80">expressions.</span>
<!--l. 4753--><p class="noindent" ><span 
class="pplr8t-x-x-80">2</span>
<!--l. 4753--><p class="noindent" ><span 
class="pplr8t-x-x-80">Assigning a name to the result of evaluating an expression using the </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression </span><span 
class="pplr8t-x-x-80">construct. Building compound</span>
<span 
class="pplr8t-x-x-80">expressions using </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name1 </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name2 </span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmb8t-x-x-72">in</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Functions, introduced by </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">name argument1</span>
<span 
class="pplri8t-x-x-80">argument2 </span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">=</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. These have type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x2192;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. for some types </span><span 
class="zptmcm7m-x-x-80">&#x03B1;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">, </span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc. Recursive functions, which are</span>
<span 
class="pplr8t-x-x-80">introduced in the same way, but using </span><span 
class="fvmb8t-x-x-72">let rec </span><span 
class="pplr8t-x-x-80">instead of </span><span 
class="fvmb8t-x-x-72">let</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4756--><p class="noindent" ><span 
class="pplr8t-x-x-80">3</span>
<!--l. 4756--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching patterns using </span><span 
class="fvmb8t-x-x-72">match </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmb8t-x-x-72">with </span><span 
class="pplri8t-x-x-80">pattern1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">pattern2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;The expressions</span>
<span 
class="pplri8t-x-x-80">expression2</span><span 
class="pplr8t-x-x-80">, </span><span 
class="pplri8t-x-x-80">expression3 </span><span 
class="pplr8t-x-x-80">etc. must have the same type as one another, and this is the type of the whole </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="pplb8t-x-x-80">&#x2026;</span><span 
class="pplb8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span>
<span 
class="pplr8t-x-x-80">expression.</span>
<!--l. 4759--><p class="noindent" ><span 
class="pplr8t-x-x-80">4</span>
<!--l. 4759--><p class="noindent" ><span 
class="pplr8t-x-x-80">Lists, which are ordered collections of zero or more elements of like type. They are written between square brackets, with</span>
<span 
class="pplr8t-x-x-80">elements separated by semicolons e.g. </span><span 
class="fvmr8t-x-x-72">[1; 2; 3; 4; 5]</span><span 
class="pplr8t-x-x-80">. If a list is non-empty, it has a head, which is its first</span>
<span 
class="pplr8t-x-x-80">element, and a tail, which is the list composed of the rest of the elements. The </span><span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; operator, which adds</span>
<span 
class="pplr8t-x-x-80">an element to the front of a list. The </span><span 
class="fvmr8t-x-x-72">@ </span><span 
class="pplr8t-x-x-80">&#8220;append&#8221; operator, which concatenates two lists together. Lists and the</span>
<span 
class="fvmr8t-x-x-72">::</span><span 
class="pplr8t-x-x-80">&#x00A0;&#8220;cons&#8221; symbol may be used for pattern matching to distinguish lists of length zero, one, etc. and with particular</span>
<span 
class="pplr8t-x-x-80">contents.</span>
<!--l. 4762--><p class="noindent" ><span 
class="pplr8t-x-x-80">5</span>
<!--l. 4762--><p class="noindent" ><span 
class="pplr8t-x-x-80">Matching two or more things at once, using commas to separate as in </span><span 
class="fvmb8t-x-x-72">match</span><span 
class="fvmr8t-x-x-72">a, b</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="fvmr8t-x-x-72">0, 0 -> </span><span 
class="pplri8t-x-x-80">expression1 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="fvmr8t-x-x-72">&#x00A0;x, y -></span>
<span 
class="pplri8t-x-x-80">expression2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4765--><p class="noindent" ><span 
class="pplr8t-x-x-80">6</span>
<!--l. 4765--><p class="noindent" ><span 
class="pplr8t-x-x-80">Anonymous functions </span><span 
class="fvmb8t-x-x-72">fun </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">-> </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. Making operators into functions as in </span><span 
class="fvmr8t-x-x-72">( < ) </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">( + )</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4768--><p class="noindent" ><span 
class="pplr8t-x-x-80">7</span>
<!--l. 4768--><p class="noindent" ><span 
class="pplr8t-x-x-80">Defining exceptions with </span><span 
class="fvmb8t-x-x-72">exception </span><span 
class="pplri8t-x-x-80">name</span><span 
class="pplr8t-x-x-80">. They can carry extra information by adding </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type</span><span 
class="pplr8t-x-x-80">. Raising exceptions with </span><span 
class="fvmb8t-x-x-72">raise</span><span 
class="pplr8t-x-x-80">.</span>
<span 
class="pplr8t-x-x-80">Handling exceptions with </span><span 
class="fvmb8t-x-x-72">try</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmb8t-x-x-72">with</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x2026;</span>
<!--l. 4771--><p class="noindent" ><span 
class="pplr8t-x-x-80">8</span>
<!--l. 4771--><p class="noindent" ><span 
class="pplr8t-x-x-80">Tuples to combine a fixed number of elements </span><span 
class="fvmr8t-x-x-72">(a, b)</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">(a, b, c) </span><span 
class="pplr8t-x-x-80">etc. with types </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2;</span><span 
class="pplr8t-x-x-80">,</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B2; </span><span 
class="zptmcm7y-x-x-80">&#x00D7;</span><span 
class="zptmcm7m-x-x-80">&#x03B3; </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4774--><p class="noindent" ><span 
class="pplr8t-x-x-80">9</span>
<!--l. 4774--><p class="noindent" ><span 
class="pplr8t-x-x-80">Partial application of functions by giving fewer than the full number of arguments. Partial application with functions built from</span>
<span 
class="pplr8t-x-x-80">operators.</span>
                                                                               
                                                                               
<!--l. 4777--><p class="noindent" ><span 
class="pplr8t-x-x-80">10</span>
<!--l. 4777--><p class="noindent" ><span 
class="pplr8t-x-x-80">New types with </span><span 
class="fvmb8t-x-x-72">type </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">constructor1 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type1 </span><span 
class="fvmr8t-x-x-72">| </span><span 
class="pplri8t-x-x-80">constructor2 </span><span 
class="fvmb8t-x-x-72">of </span><span 
class="pplri8t-x-x-80">type2 </span><span 
class="fvmr8t-x-x-72">|</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;Pattern matching on them as with the built-in</span>
<span 
class="pplr8t-x-x-80">types. Polymorphic types.</span>
<!--l. 4780--><p class="noindent" ><span 
class="pplr8t-x-x-80">11</span>
<!--l. 4780--><p class="noindent" ><span 
class="pplr8t-x-x-80">Strings, which are sequences of characters written between double quotes and are of type </span><span 
class="pplb8t-x-x-80">string</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4783--><p class="noindent" ><span 
class="pplr8t-x-x-80">12</span>
<!--l. 4783--><p class="noindent" ><span 
class="pplr8t-x-x-80">The value </span><span 
class="fvmr8t-x-x-72">() </span><span 
class="pplr8t-x-x-80">and its type </span><span 
class="pplb8t-x-x-80">unit</span><span 
class="pplr8t-x-x-80">. Input channels of type </span><span 
class="pplb8t-x-x-80">in</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel </span><span 
class="pplr8t-x-x-80">and output channels of type </span><span 
class="pplb8t-x-x-80">out</span><span 
class="pplb8t-x-x-80">_</span><span 
class="pplb8t-x-x-80">channel</span><span 
class="pplr8t-x-x-80">. Built-in functions</span>
<span 
class="pplr8t-x-x-80">for reading from and writing to them respectively.</span>
<!--l. 4786--><p class="noindent" ><span 
class="pplr8t-x-x-80">13</span>
<!--l. 4786--><p class="noindent" ><span 
class="pplr8t-x-x-80">References of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">ref</span><span 
class="pplr8t-x-x-80">. Building them using </span><span 
class="fvmr8t-x-x-72">ref</span><span 
class="pplr8t-x-x-80">, accessing their contents using </span><span 
class="fvmr8t-x-x-72">! </span><span 
class="pplr8t-x-x-80">and updating them using the </span><span 
class="fvmr8t-x-x-72">:= </span><span 
class="pplr8t-x-x-80">operator.</span>
<span 
class="pplr8t-x-x-80">Bracketing expressions together with </span><span 
class="fvmb8t-x-x-72">begin </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmb8t-x-x-72">end </span><span 
class="pplr8t-x-x-80">instead of parentheses for readability. Performing an action many times</span>
<span 
class="pplr8t-x-x-80">based on a boolean condition with the </span><span 
class="fvmb8t-x-x-72">while </span><span 
class="pplri8t-x-x-80">boolean expression </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done </span><span 
class="pplr8t-x-x-80">construct. Performing an</span>
<span 
class="pplr8t-x-x-80">action a fixed number of times with a varying parameter using the </span><span 
class="fvmb8t-x-x-72">for </span><span 
class="pplri8t-x-x-80">name </span><span 
class="fvmr8t-x-x-72">= </span><span 
class="pplri8t-x-x-80">start </span><span 
class="fvmb8t-x-x-72">to </span><span 
class="pplri8t-x-x-80">end </span><span 
class="fvmb8t-x-x-72">do </span><span 
class="pplri8t-x-x-80">expression </span><span 
class="fvmb8t-x-x-72">done</span>
<span 
class="pplr8t-x-x-80">construct. Arrays of type </span><span 
class="zptmcm7m-x-x-80">&#x03B1; </span><span 
class="pplb8t-x-x-80">array</span><span 
class="pplr8t-x-x-80">. Creating an array with the built-in function </span><span 
class="fvmr8t-x-x-72">Array.make</span><span 
class="pplr8t-x-x-80">, finding its length with</span>
<span 
class="fvmr8t-x-x-72">Array.length</span><span 
class="pplr8t-x-x-80">, accessing an element with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">)</span><span 
class="pplr8t-x-x-80">. Updating with </span><span 
class="fvmr8t-x-x-72">a.(</span><span 
class="pplri8t-x-x-80">subscript</span><span 
class="fvmr8t-x-x-72">) <- </span><span 
class="pplri8t-x-x-80">expression</span><span 
class="pplr8t-x-x-80">. The built-in function</span>
<span 
class="fvmr8t-x-x-72">String.iter</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4789--><p class="noindent" ><span 
class="pplr8t-x-x-80">14</span>
<!--l. 4789--><p class="noindent" ><span 
class="pplr8t-x-x-80">Floating-point numbers </span><span 
class="fvmr8t-x-x-72">min_float</span><span 
class="pplr8t-x-x-80">&#x2026;</span><span 
class="pplr8t-x-x-80">&#x00A0;</span><span 
class="fvmr8t-x-x-72">max_float </span><span 
class="pplr8t-x-x-80">of type </span><span 
class="pplb8t-x-x-80">float</span><span 
class="pplr8t-x-x-80">. Floating-point operators </span><span 
class="fvmr8t-x-x-72">+.*.-./.** </span><span 
class="pplr8t-x-x-80">and built-in functions</span>
<span 
class="fvmr8t-x-x-72">sqrtlog </span><span 
class="pplr8t-x-x-80">etc.</span>
<!--l. 4792--><p class="noindent" ><span 
class="pplr8t-x-x-80">15</span>
<!--l. 4792--><p class="noindent" ><span 
class="pplr8t-x-x-80">Using functions from the OCaml Standard Library with the form </span><span 
class="pplri8t-x-x-80">Module</span><span 
class="fvmr8t-x-x-72">.</span><span 
class="pplri8t-x-x-80">function</span><span 
class="pplr8t-x-x-80">.</span>
<!--l. 4795--><p class="noindent" ><span 
class="pplr8t-x-x-80">16</span>
<!--l. 4795--><p class="noindent" ><span 
class="pplr8t-x-x-80">Writing modules in </span><span 
class="fvmr8t-x-x-72">.ml </span><span 
class="pplr8t-x-x-80">files. Building interfaces in </span><span 
class="fvmr8t-x-x-72">.mli </span><span 
class="pplr8t-x-x-80">files with types and </span><span 
class="fvmb8t-x-x-72">val</span><span 
class="pplr8t-x-x-80">. Using the </span><span 
class="fvmr8t-x-x-72">ocamlc </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">ocamlopt </span><span 
class="pplr8t-x-x-80">compilers.</span>
<span 
class="pplr8t-x-x-80">Comments written between </span><span 
class="fvmr8t-x-x-72">(* </span><span 
class="pplr8t-x-x-80">and </span><span 
class="fvmr8t-x-x-72">*)</span><span 
class="pplr8t-x-x-80">.</span>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4806--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 4808--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><a 
 id="x1-7400016"></a><span 
class="pplr8t-x-x-90">Answers to Questions</span></h2>
<!--l. 4810--><p class="noindent" ><span 
class="pplri8t-x-x-90">Hints may be found at the end of the book.</span>
   <h3 class="likesectionHead"><a 
 id="x1-7500016"></a><span 
class="pplr8t-x-x-90">1 (Starting Off)</span></h3>
<!--l. 4817--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-7600016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 4819--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression </span><span 
class="fvmr8t-x-x-81">17 </span><span 
class="pplr8t-x-x-90">is of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">and is a value already. The expression </span><span 
class="fvmr8t-x-x-81">1 + 2 * 3 + 4 </span><span 
class="pplr8t-x-x-90">is of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">and evaluates</span>
<span 
class="pplr8t-x-x-90">to the value </span><span 
class="fvmr8t-x-x-81">11</span><span 
class="pplr8t-x-x-90">, since the multiplication is done first. The expression </span><span 
class="fvmr8t-x-x-81">800 / 80 / 8 </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. It is the same as</span>
<span 
class="fvmr8t-x-x-81">(800 / 80) / 8 </span><span 
class="pplr8t-x-x-90">rather than </span><span 
class="fvmr8t-x-x-81">800 / (80 / 8) </span><span 
class="pplr8t-x-x-90">and evaluates to </span><span 
class="fvmr8t-x-x-81">1</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4821--><p class="indent" >   <span 
class="pplr8t-x-x-90">The expression </span><span 
class="fvmr8t-x-x-81">400 > 200 </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">because this is the type of the result of the comparison operator </span><span 
class="fvmr8t-x-x-81">></span><span 
class="pplr8t-x-x-90">. It</span>
<span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">. Similarly, </span><span 
class="fvmr8t-x-x-81">1 <> 1 </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">and evaluates to </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">. The expression </span><span 
class="fvmr8t-x-x-81">true || false </span><span 
class="pplr8t-x-x-90">is of</span>
<span 
class="pplr8t-x-x-90">type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">and evaluates to </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">since one of the operands is true. Similarly, </span><span 
class="fvmr8t-x-x-81">true && false </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">false</span>
<span 
class="pplr8t-x-x-90">since one of the operands is false. The expression </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">if </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="fvmb8t-x-x-81">then </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">&#x00A0;evaluates to </span><span 
class="fvmr8t-x-x-81">false</span>
<span 
class="pplr8t-x-x-90">since the first (</span><span 
class="fvmb8t-x-x-81">then</span><span 
class="pplr8t-x-x-90">) part of the conditional expression is chosen, and takes the place of the entire</span>
<span 
class="pplr8t-x-x-90">expression.</span>
<!--l. 4823--><p class="indent" >   <span 
class="pplr8t-x-x-90">The expression </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">%</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">is of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="pplr8t-x-x-90">and is already a value. The expression </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">b</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">has no type &#8211; it gives a</span>
<span 
class="pplr8t-x-x-90">type error because the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">operator does not operate on characters.</span>
<!--l. 4825--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-7700016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 4826--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">mod </span><span 
class="pplr8t-x-x-90">operator is of higher precedence than the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">operator. So </span><span 
class="fvmr8t-x-x-81">1 + 2 mod 3 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">1 + (2 mod 3) </span><span 
class="pplr8t-x-x-90">are the</span>
<span 
class="pplr8t-x-x-90">same expression, evaluating to </span><span 
class="fvmr8t-x-x-81">1 + 2 </span><span 
class="pplr8t-x-x-90">which is </span><span 
class="fvmr8t-x-x-81">3</span><span 
class="pplr8t-x-x-90">, but </span><span 
class="fvmr8t-x-x-81">(1 + 2) mod 3 </span><span 
class="pplr8t-x-x-90">is the same as </span><span 
class="fvmr8t-x-x-81">3 mod 3</span><span 
class="pplr8t-x-x-90">, which is</span>
<span 
class="fvmr8t-x-x-81">0</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4828--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-7800016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 4829--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression evaluates to </span><span 
class="fvmr8t-x-x-81">11</span><span 
class="pplr8t-x-x-90">. The programmer seems to be under the impression that spacing affects</span>
<span 
class="pplr8t-x-x-90">evaluation order. It does not, and so this use of space is misleading.</span>
<!--l. 4831--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-7900016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 4832--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression </span><span 
class="fvmr8t-x-x-81">max_int + 1 </span><span 
class="pplr8t-x-x-90">evaluates to a number equal to </span><span 
class="fvmr8t-x-x-81">min_int</span><span 
class="pplr8t-x-x-90">. Likewise, </span><span 
class="fvmr8t-x-x-81">min_int - 1 </span><span 
class="pplr8t-x-x-90">evaluates to a</span>
<span 
class="pplr8t-x-x-90">number equal to </span><span 
class="fvmr8t-x-x-81">max_int</span><span 
class="pplr8t-x-x-90">. The number line &#8220;wraps around&#8221;. This leads to the odd situation that </span><span 
class="fvmr8t-x-x-81">max_int + 1 <</span>
<span 
class="fvmr8t-x-x-81">max_int </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">. It follows that when writing programs, we must be careful about what happens when</span>
<span 
class="pplr8t-x-x-90">numbers may be very large or very small.</span>
<!--l. 4834--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8000016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 4835--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml accepts the program, but complains when it is run:</span>
                                                                               
                                                                               
<!--l. 4838--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;/</span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Division_by_zero.</span>
<!--l. 4844--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will talk about such </span><span 
class="pplri8t-x-x-90">exceptions </span><span 
class="pplr8t-x-x-90">later in the book. They are used for program errors which cannot necessarily be</span>
<span 
class="pplr8t-x-x-90">found just by looking at the program text, but are only discovered during evaluation.</span>
<!--l. 4846--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8100016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 4847--><p class="noindent" ><span 
class="pplr8t-x-x-90">For </span><span 
class="fvmr8t-x-x-81">x mod y</span><span 
class="pplr8t-x-x-90">:</span>
     <ul class="itemize1">
     <li class="itemize"><span 
class="pplr8t-x-x-90">when </span><span 
class="zptmcm7m-x-x-90">y </span><span 
class="zplmr7t-x-x-90">= </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, OCaml prints </span><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Division_by_zero</span>
     </li>
     <li class="itemize"><span 
class="pplr8t-x-x-90">when </span><span 
class="zptmcm7m-x-x-90">y &#x003C;&#x003E; </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">x &#x003C; </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, the result will be negative</span>
     </li>
     <li class="itemize"><span 
class="pplr8t-x-x-90">when </span><span 
class="zptmcm7m-x-x-90">y &#x003C;&#x003E; </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7m-x-x-90">x </span><span 
class="zplmr7t-x-x-90">= </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, the result will be zero</span></li></ul>
<!--l. 4853--><p class="noindent" ><span 
class="pplr8t-x-x-90">This illustrates how even simple mathematical operators require careful specification when programming &#8211; we must</span>
<span 
class="pplr8t-x-x-90">be explicit about the rules.</span>
<!--l. 4855--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8200016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 4856--><p class="noindent" ><span 
class="pplr8t-x-x-90">It prevents unexpected values: what would happen if an integer other than </span><span 
class="fvmr8t-x-x-81">1 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">0 </span><span 
class="pplr8t-x-x-90">was calculated in the</span>
<span 
class="pplr8t-x-x-90">program &#8211; what would it mean? It is better just to use a different type. We can then show more easily that a</span>
<span 
class="pplr8t-x-x-90">program is correct.</span>
<!--l. 4858--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8300016"></a><span 
class="pplr8t-x-x-90">8</span></h4>
<!--l. 4860--><p class="noindent" ><span 
class="pplr8t-x-x-90">The lowercase characters are in alphabetical order, for example </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">p</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">< </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">q</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">. The</span>
<span 
class="pplr8t-x-x-90">uppercase characters are similarly ordered. The uppercase letters are all &#8220;smaller&#8221; than the lowercase</span>
<span 
class="pplr8t-x-x-90">characters, so for example </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="fvmr8t-x-x-81">< </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">. For type </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">is considered &#8220;less than&#8221;</span>
<span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4862--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-8400016"></a><span 
class="pplr8t-x-x-90">2 (Names and Functions)</span></h3>
<!--l. 4863--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8500016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 4864--><p class="noindent" ><span 
class="pplr8t-x-x-90">Just take in an integer and return the number multiplied by ten. The function takes and returns an integer, so the</span>
<span 
class="pplr8t-x-x-90">type is </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 4867--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;times_ten</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;10;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;times_ten</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4872--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8600016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 4873--><p class="noindent" ><span 
class="pplr8t-x-x-90">We must take two integer arguments, and use the </span><span 
class="fvmr8t-x-x-81">&& </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81"><> </span><span 
class="pplr8t-x-x-90">operators to test if they are both non-zero. So the</span>
<span 
class="pplr8t-x-x-90">result will be of type </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. The whole type will therefore be </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4876--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;both_non_zero</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;y</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;<></span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;&</span><span 
class="fvmr8t-x-x-81">&&#x00A0;y</span><span 
class="fvmr8t-x-x-81">&#x00A0;<></span><span 
class="fvmr8t-x-x-81">&#x00A0;0;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;both_non_zero</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4882--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8700016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 4883--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our function should take an integer, and return another one (the sum). So, it is type will be </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. The base</span>
<span 
class="pplr8t-x-x-90">case is when the number is equal to </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">. Then, the sum of all numbers from </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">is just </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">. If not, we add the</span>
<span 
class="pplr8t-x-x-90">argument to the sum of all the numbers from </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zplmr7t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="zptmcm7y-x-x-90">-</span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zplmr7t-x-x-90">)</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4886--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;sum</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;+</span><span 
class="fvmr8t-x-x-81">&#x00A0;sum</span><span 
class="fvmr8t-x-x-81">&#x00A0;(n</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;sum</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4893--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function is recursive, so we used </span><span 
class="fvmb8t-x-x-81">let rec </span><span 
class="pplr8t-x-x-90">instead of </span><span 
class="fvmb8t-x-x-81">let</span><span 
class="pplr8t-x-x-90">. What happens if the argument given is zero or</span>
<span 
class="pplr8t-x-x-90">negative?</span>
<!--l. 4895--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8800016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 4896--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. A number to the power of </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">is </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">. A number to the power of </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">is itself.</span>
<span 
class="pplr8t-x-x-90">Otherwise, the answer is the current </span><span 
class="zptmcm7m-x-x-90">n </span><span 
class="pplr8t-x-x-90">multiplied by </span><span 
class="zptmcm7m-x-x-90">n</span><sup><span 
class="zptmcm7m-x-x-70">x</span><span 
class="zptmcm7y-x-x-70">-</span><span 
class="zptmcm7t-x-x-70">1</span></sup><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4899--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;(if</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;(n</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1));;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4908--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we had to put one  </span><span 
class="fvmb8t-x-x-81">if</span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">then</span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">inside the </span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">part of another to cope with the</span>
<span 
class="pplr8t-x-x-90">three different cases. The parentheses are not actually required, though, so we may write it like</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">this:</span>
<!--l. 4911--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;n</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;(n</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;power</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4920--><p class="noindent" ><span 
class="pplr8t-x-x-90">In fact, we can remove the case for </span><span 
class="fvmr8t-x-x-81">n = 1 </span><span 
class="pplr8t-x-x-90">since </span><span 
class="fvmr8t-x-x-81">power x 1 </span><span 
class="pplr8t-x-x-90">will reduce to </span><span 
class="fvmr8t-x-x-81">x * power x 0 </span><span 
class="pplr8t-x-x-90">which is just</span>
<span 
class="fvmr8t-x-x-81">x</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 4922--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-8900016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 4923--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">isconsonant </span><span 
class="pplr8t-x-x-90">will have type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. If a lower case character in the range </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">is not a</span>
<span 
class="pplr8t-x-x-90">vowel, it must be a consonant. So we can reuse the </span><span 
class="fvmr8t-x-x-81">isvowel </span><span 
class="pplr8t-x-x-90">function we wrote earlier, and negate its result using</span>
<span 
class="pplr8t-x-x-90">the </span><span 
class="fvmr8t-x-x-81">not </span><span 
class="pplr8t-x-x-90">function:</span>
<!--l. 4926--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;isconsonant</span><span 
class="fvmr8t-x-x-81">&#x00A0;c</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;(isvowel</span><span 
class="fvmr8t-x-x-81">&#x00A0;c);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;isconsonant</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;char</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;bool</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4931--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9000016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 4932--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression is the same as </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = 1 </span><span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">(</span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = 2 </span><span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">x + x)</span><span 
class="pplr8t-x-x-90">, and so the result is </span><span 
class="fvmr8t-x-x-81">4</span><span 
class="pplr8t-x-x-90">. Both instances of </span><span 
class="fvmr8t-x-x-81">x</span>
<span 
class="pplr8t-x-x-90">in </span><span 
class="fvmr8t-x-x-81">x + x </span><span 
class="pplr8t-x-x-90">evaluate to </span><span 
class="fvmr8t-x-x-81">2 </span><span 
class="pplr8t-x-x-90">since this is the value assigned to the name </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">in the nearest enclosing </span><span 
class="fvmb8t-x-x-81">let</span>
<span 
class="pplr8t-x-x-90">expression.</span>
<!--l. 4934--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9100016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 4935--><p class="noindent" ><span 
class="pplr8t-x-x-90">We could simply return </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">for a negative argument The factorial of </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">is </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">, so we can change that too, and say our</span>
<span 
class="pplr8t-x-x-90">new function finds the factorial of any non-negative number:</span>
<!--l. 4939--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;rec</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;<</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;if</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;0</span><span 
class="fvmr8t-x-x-81">&#x00A0;then</span><span 
class="fvmr8t-x-x-81">&#x00A0;1</span><span 
class="fvmr8t-x-x-81">&#x00A0;else</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;*</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;(x</span><span 
class="fvmr8t-x-x-81">&#x00A0;-</span><span 
class="fvmr8t-x-x-81">&#x00A0;1);;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;factorial</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;-></span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;<fun></span></span></span>
<!--l. 4948--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that </span><span 
class="fvmr8t-x-x-81">factorial </span><span 
class="pplr8t-x-x-90">can fail in other ways too &#8211; if the number gets too big and &#8220;wraps around&#8221;. For example, on</span>
<span 
class="pplr8t-x-x-90">the author&#8217;s computer, </span><span 
class="fvmr8t-x-x-81">factorial 40 </span><span 
class="pplr8t-x-x-90">yields </span><span 
class="fvmr8t-x-x-81">-2188836759280812032</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 4950--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-9200016"></a><span 
class="pplr8t-x-x-90">3 (Case by Case)</span></h3>
<!--l. 4951--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9300016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 4953--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can just pattern match on the boolean. It does not matter, in this instance, which order the two cases are</span>
<span 
class="pplr8t-x-x-90">in.</span>
<!--l. 4957--><p class="noindent" ><img 
src="pandocfiguresmlbook153x.png" alt=""  class="fbox" >
<!--l. 4967--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9400016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 4968--><p class="noindent" ><span 
class="pplr8t-x-x-90">Recall our solution from the previous chapter:</span>
<!--l. 4972--><p class="noindent" ><img 
src="pandocfiguresmlbook154x.png" alt=""  class="fbox" >
<!--l. 4981--><p class="noindent" ><span 
class="pplr8t-x-x-90">Modifying it to use pattern matching:</span>
<!--l. 4985--><p class="noindent" ><img 
src="pandocfiguresmlbook155x.png" alt=""  class="fbox" >
<!--l. 4995--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9500016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 4996--><p class="noindent" ><span 
class="pplr8t-x-x-90">Again, modifying our solution from the previous chapter:</span>
<!--l. 5000--><p class="noindent" ><img 
src="pandocfiguresmlbook156x.png" alt=""  class="fbox" >
<!--l. 5011--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9600016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5012--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is the same as</span>
<!--l. 5016--><p class="noindent" ><img 
src="pandocfiguresmlbook157x.png" alt=""  class="fbox" >
<!--l. 5026--><p class="noindent" ><span 
class="pplr8t-x-x-90">(A match case belongs to its nearest enclosing </span><span 
class="fvmb8t-x-x-81">match</span><span 
class="pplr8t-x-x-90">). So the expression evaluates to </span><span 
class="fvmr8t-x-x-81">5</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5028--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9700016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5029--><p class="noindent" ><span 
class="pplr8t-x-x-90">We write two functions of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">like this:</span>
<!--l. 5033--><p class="noindent" ><img 
src="pandocfiguresmlbook158x.png" alt=""  class="fbox" >
<!--l. 5050--><p class="noindent" ><span 
class="pplr8t-x-x-90">Alternatively, we might write:</span>
<!--l. 5054--><p class="noindent" ><img 
src="pandocfiguresmlbook159x.png" alt=""  class="fbox" >
<!--l. 5069--><p class="noindent" ><span 
class="pplr8t-x-x-90">These two solutions have differing behaviour upon erroneous arguments (such as punctuation). Can you see</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">why?</span>
<!--l. 5071--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-9800016"></a><span 
class="pplr8t-x-x-90">4 (Making Lists)</span></h3>
<!--l. 5072--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-9900016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5073--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is similar to </span><span 
class="fvmr8t-x-x-81">odd_elements</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 5077--><p class="noindent" ><img 
src="pandocfiguresmlbook160x.png" alt=""  class="fbox" >
<!--l. 5089--><p class="noindent" ><span 
class="pplr8t-x-x-90">But we can perform the same trick as before, by reversing the cases, to reduce their number:</span>
<!--l. 5093--><p class="noindent" ><img 
src="pandocfiguresmlbook161x.png" alt=""  class="fbox" >
<!--l. 5103--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10000016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5105--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is like counting the length of a list, but we only count if the current element is </span><span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5109--><p class="noindent" ><img 
src="pandocfiguresmlbook162x.png" alt=""  class="fbox" >
<!--l. 5121--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use an accumulating argument in an auxiliary function to make a tail recursive version:</span>
                                                                               
                                                                               
<!--l. 5125--><p class="noindent" ><img 
src="pandocfiguresmlbook163x.png" alt=""  class="fbox" >
<!--l. 5140--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10100016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5142--><p class="noindent" ><span 
class="pplr8t-x-x-90">To make a palindrome from any list, we can append it to its reverse. To check if a list is a palindrome,</span>
<span 
class="pplr8t-x-x-90">we can compare it for equality with its reverse (the comparison operators work over almost all</span>
<span 
class="pplr8t-x-x-90">types).</span>
<!--l. 5146--><p class="noindent" ><img 
src="pandocfiguresmlbook164x.png" alt=""  class="fbox" >
<!--l. 5158--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10200016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5160--><p class="noindent" ><span 
class="pplr8t-x-x-90">We pattern match with three cases. The empty list, where we have reached the last element, and where we have</span>
<span 
class="pplr8t-x-x-90">yet to reach it.</span>
<!--l. 5164--><p class="noindent" ><img 
src="pandocfiguresmlbook165x.png" alt=""  class="fbox" >
<!--l. 5176--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can build a tail recursive version by adding an accumulating list, and reversing it when finished (assuming a</span>
<span 
class="pplr8t-x-x-90">tail recursive </span><span 
class="fvmr8t-x-x-81">rev</span><span 
class="pplr8t-x-x-90">, of course!)</span>
                                                                               
                                                                               
<!--l. 5180--><p class="noindent" ><img 
src="pandocfiguresmlbook166x.png" alt=""  class="fbox" >
<!--l. 5195--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10300016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5197--><p class="noindent" ><span 
class="pplr8t-x-x-90">The empty list cannot contain the element; if there is a non-empty list, either the head is equal to the element we</span>
<span 
class="pplr8t-x-x-90">are looking for, or if not, the result of our function is just the same as the result of recursing on the</span>
<span 
class="pplr8t-x-x-90">tail.</span>
<!--l. 5199--><p class="indent" >   <span 
class="pplr8t-x-x-90">Note that we are using the property that the </span><span 
class="fvmr8t-x-x-81">|| </span><span 
class="pplr8t-x-x-90">operator only evaluates its right hand side if the left hand side</span>
<span 
class="pplr8t-x-x-90">is false to limit the recursion &#8211; it really does stop as soon as it finds the element.</span>
<!--l. 5203--><p class="noindent" ><img 
src="pandocfiguresmlbook167x.png" alt=""  class="fbox" >
<!--l. 5213--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10400016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5215--><p class="noindent" ><span 
class="pplr8t-x-x-90">If a list is empty, it is already a set. If not, either the head exists somewhere in the tail or it does not;</span>
<span 
class="pplr8t-x-x-90">if it does exist in the tail, we can discard it, since it will be included later. If not, we must include</span>
<span 
class="pplr8t-x-x-90">it.</span>
<!--l. 5219--><p class="noindent" ><img 
src="pandocfiguresmlbook168x.png" alt=""  class="fbox" >
<!--l. 5230--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, consider the evaluation of </span><span 
class="fvmr8t-x-x-81">make_set [4; 5; 6; 5; 4]</span><span 
class="pplr8t-x-x-90">: </span><div class="eqnarray">
                                                                               
                                                                               
   <center class="math-display" >
<img 
src="pandocfiguresmlbook169x.png" alt="      make_set-[4; 5;-6;-5;-4]
=&#x21D2;    make_set-[5; 6;-5;-4]
=&#x21D2;    make_set [6; 5; 4]
      -----------------
=&#x21D2;    6 :: make_set-[5;-4]
=&#x21D2;    6 :: 5 :: make_set-[4]-
=&#x21D2;    6 :: 5 :: 4 :: make_set-[]
=&#x21D2;    6-::-5-::-4 ::-[]
 *
=&#x21D2;    [6; 5; 4]
" class="math-display" ></center>
</div>
<!--l. 5243--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10500016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 5244--><p class="noindent" ><span 
class="pplr8t-x-x-90">The first part of the evaluation of </span><span 
class="fvmr8t-x-x-81">rev </span><span 
class="pplr8t-x-x-90">takes time proportional to the length of the list, processing each element</span>
<span 
class="pplr8t-x-x-90">once. However, when the lists are appended together, the order of the operations is such that the first argument</span>
<span 
class="pplr8t-x-x-90">becomes longer each time. The </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">@</span></span></span> <span 
class="pplr8t-x-x-90">operator, as we know, also takes time proportional to the length of its first</span>
<span 
class="pplr8t-x-x-90">argument. And so, this accumulating of the lists takes time proportional to the square of the length of the list.</span>
<div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook170x.png" alt="       rev [1;-2;-3;-4]
=&#x21D2;     rev [2;-3;-4]-@ [1]
=&#x21D2;     (rev-[3;-4]-@ [2]) @ [1]
=&#x21D2;     ((rev-[4]-@ [3]) @ [2]) @ [1]
=&#x21D2;     (((rev [] @ [4]) @ [3]) @ [2]) @ [1]
=&#x21D2;     ((([]-@-[4])-@-[3])-@-[2])-@-[1]-----
       ------------------------------
=&#x21D2;     (([4]-@-[3])-@-[2])-@-[1]-
=&#x21D2;     ([4,-3]-@-[2])-@ [1]
=&#x21D2;     [4, 3,-2]-@-[1]
=&#x21D2;     [4; 3; 2; 1]
" class="math-display" ></center>
                                                                               
                                                                               
</div>
<!--l. 5257--><p class="noindent" ><span 
class="pplr8t-x-x-90">By using an additional accumulating argument, we can write a version which operates in time proportional to</span>
<span 
class="pplr8t-x-x-90">the length of the list.</span>
<!--l. 5261--><p class="noindent" ><img 
src="pandocfiguresmlbook171x.png" alt=""  class="fbox" >
<!--l. 5276--><p class="noindent" ><span 
class="pplr8t-x-x-90">For the same list: </span><div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook172x.png" alt="       rev-[1;-2;-3;-4]
=&#x21D2;     rev_inner-[]-[1;-2; 3;-4]
=&#x21D2;     rev_inner-[1]-[2;-3;-4]-
=&#x21D2;     rev_inner-[2;-1]-[3;-4]-
=&#x21D2;     rev_inner-[3;-2;-1] [4]
=&#x21D2;     rev_inner [4; 3; 2; 1] []
       ------------------------
=&#x21D2;     [4; 3; 2; 1]
" class="math-display" ></center>
</div>
<!--l. 5287--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-10600016"></a><span 
class="pplr8t-x-x-90">5 (Sorting Things)</span></h3>
<!--l. 5288--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10700016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5289--><p class="noindent" ><span 
class="pplr8t-x-x-90">Simply add an extra </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="pplr8t-x-x-90">to define a name representing the number we will take or drop:</span>
                                                                               
                                                                               
<!--l. 5293--><p class="noindent" ><img 
src="pandocfiguresmlbook173x.png" alt=""  class="fbox" >
<!--l. 5308--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10800016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5309--><p class="noindent" ><span 
class="pplr8t-x-x-90">The argument to </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">is </span><span 
class="fvmr8t-x-x-81">length l / 2 </span><span 
class="pplr8t-x-x-90">which is clearly less than or equal to </span><span 
class="fvmr8t-x-x-81">length l </span><span 
class="pplr8t-x-x-90">for all possible</span>
<span 
class="pplr8t-x-x-90">values of </span><span 
class="fvmr8t-x-x-81">l</span><span 
class="pplr8t-x-x-90">. Thus, </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">always succeed. In our case, </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">are only called with </span><span 
class="fvmr8t-x-x-81">length l </span><span 
class="pplr8t-x-x-90">more</span>
<span 
class="pplr8t-x-x-90">than 1, due to the pattern matching.</span>
<!--l. 5311--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-10900016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5312--><p class="noindent" ><span 
class="pplr8t-x-x-90">We may simply replace the </span><span 
class="fvmr8t-x-x-81"><= </span><span 
class="pplr8t-x-x-90">operator with the </span><span 
class="fvmr8t-x-x-81">>= </span><span 
class="pplr8t-x-x-90">operator in the </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">function.</span>
<!--l. 5316--><p class="noindent" ><img 
src="pandocfiguresmlbook174x.png" alt=""  class="fbox" >
<!--l. 5330--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function is unaltered.</span>
<!--l. 5332--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11000016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5334--><p class="noindent" ><span 
class="pplr8t-x-x-90">We require a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. List of length zero and one are, by definition, sorted. If the list is</span>
<span 
class="pplr8t-x-x-90">longer, check that its first two elements are in sorted order. If this is true, also check that the rest of the list is</span>
<span 
class="pplr8t-x-x-90">sorted, starting with the second element.</span>
                                                                               
                                                                               
<!--l. 5338--><p class="noindent" ><img 
src="pandocfiguresmlbook175x.png" alt=""  class="fbox" >
<!--l. 5350--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can reverse the cases to simplify:</span>
<!--l. 5354--><p class="noindent" ><img 
src="pandocfiguresmlbook176x.png" alt=""  class="fbox" >
<!--l. 5364--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11100016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5365--><p class="noindent" ><span 
class="pplr8t-x-x-90">Lists are compared starting with their first elements. If the elements differ, they are compared, and that is the</span>
<span 
class="pplr8t-x-x-90">result of the comparison. If both have the same first element, the second elements are considered, and</span>
<span 
class="pplr8t-x-x-90">so on. If the end of one list is reached before the other, the shorter list is considered smaller. For</span>
<span 
class="pplr8t-x-x-90">example:</span>
<!--l. 5368--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[1] < [2] < [2; 1] < [2; 2]</span>
<!--l. 5371--><p class="noindent" ><span 
class="pplr8t-x-x-90">These are the same principles you use to look up a word in a dictionary: compare the first letters &#8211; if same,</span>
<span 
class="pplr8t-x-x-90">compare the second etc. So, when applied to the example in the question, it has the effect of sorting the words</span>
<span 
class="pplr8t-x-x-90">into alphabetical order.</span>
<!--l. 5373--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11200016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5374--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmb8t-x-x-81">let rec </span><span 
class="pplr8t-x-x-90">construct can be nested just like the </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="pplr8t-x-x-90">construct:</span>
                                                                               
                                                                               
<!--l. 5378--><p class="noindent" ><img 
src="pandocfiguresmlbook177x.png" alt=""  class="fbox" >
<!--l. 5397--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have renamed the second argument of the </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">function to avoid confusion.</span>
<!--l. 5399--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-11300016"></a><span 
class="pplr8t-x-x-90">6 (Functions upon Functions upon Functions)</span></h3>
<!--l. 5400--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11400016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5401--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our function will have type </span><span 
class="pplb8t-x-x-90">char list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">char list</span><span 
class="pplr8t-x-x-90">. We just match on the argument list: if it is empty, we are done. If</span>
<span 
class="pplr8t-x-x-90">it starts with an exclamation mark, we output a period, and carry on. If not, we output the character unchanged,</span>
<span 
class="pplr8t-x-x-90">and carry on:</span>
<!--l. 5405--><p class="noindent" ><img 
src="pandocfiguresmlbook178x.png" alt=""  class="fbox" >
<!--l. 5417--><p class="noindent" ><span 
class="pplr8t-x-x-90">To use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">instead, we write a simple function </span><span 
class="fvmr8t-x-x-81">calm_char </span><span 
class="pplr8t-x-x-90">to process a single character. We can then use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to</span>
<span 
class="pplr8t-x-x-90">build our main function:</span>
<!--l. 5421--><p class="noindent" ><img 
src="pandocfiguresmlbook179x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 5434--><p class="noindent" ><span 
class="pplr8t-x-x-90">This avoids the explicit recursion of the original, and so it is easier to see what is going on.</span>
<!--l. 5436--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11500016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5437--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">clip </span><span 
class="pplr8t-x-x-90">function is of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">and is easy to write:</span>
<!--l. 5441--><p class="noindent" ><img 
src="pandocfiguresmlbook180x.png" alt=""  class="fbox" >
<!--l. 5451--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we can use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">for the </span><span 
class="fvmr8t-x-x-81">cliplist </span><span 
class="pplr8t-x-x-90">function:</span>
<!--l. 5455--><p class="noindent" ><img 
src="pandocfiguresmlbook181x.png" alt=""  class="fbox" >
<!--l. 5463--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11600016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5464--><p class="noindent" ><span 
class="pplr8t-x-x-90">Just put the body of the clip function inside an anonymous function:</span>
<!--l. 5468--><p class="noindent" ><img 
src="pandocfiguresmlbook182x.png" alt=""  class="fbox" >
<!--l. 5480--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11700016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5481--><p class="noindent" ><span 
class="pplr8t-x-x-90">We require a function </span><span 
class="fvmr8t-x-x-81">apply f n x </span><span 
class="pplr8t-x-x-90">which applies function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">a total of </span><span 
class="fvmr8t-x-x-81">n </span><span 
class="pplr8t-x-x-90">times to the initial value </span><span 
class="fvmr8t-x-x-81">x</span><span 
class="pplr8t-x-x-90">. The base case</span>
<span 
class="pplr8t-x-x-90">is when </span><span 
class="fvmr8t-x-x-81">n </span><span 
class="pplr8t-x-x-90">is zero.</span>
<!--l. 5485--><p class="noindent" ><img 
src="pandocfiguresmlbook183x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 5496--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the type:</span>
<!--l. 5499--><p class="indent" >
   <center class="math-display" >
<img 
src="pandocfiguresmlbook184x.png" alt="&#x25DC;funct&#x25DE;io&#x25DF;nf&#x25DD;  &#x25DC;n&#x25DE;&#x25DF;&#x25DD;  &#x25DC;x&#x25DE;&#x25DF;&#x25DD;  re&#x25DC;&#x25DE;su&#x25DF;lt&#x25DD;
(&#x03B1; &#x2192; &#x03B1;)&#x2192;  int &#x2192;  &#x03B1; &#x2192;  &#x03B1; " class="math-display" ></center>
<!--l. 5502--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">must take and return the same type </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="pplr8t-x-x-90">, since its result in one iteration is fed back in as its argument</span>
<span 
class="pplr8t-x-x-90">in the next. Therefore, the argument </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and the final result must also have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="pplr8t-x-x-90">. For example, for </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zplmr7t-x-x-90">=</span> <span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, we</span>
<span 
class="pplr8t-x-x-90">might have a power function:</span>
<!--l. 5506--><p class="noindent" ><img 
src="pandocfiguresmlbook185x.png" alt=""  class="fbox" >
<!--l. 5515--><p class="noindent" ><span 
class="pplr8t-x-x-90">So </span><span 
class="fvmr8t-x-x-81">power a b </span><span 
class="pplr8t-x-x-90">calculates </span><span 
class="zptmcm7m-x-x-90">a</span><sup><span 
class="zptmcm7m-x-x-70">b</span></sup><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5517--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11800016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5518--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can add an extra argument to the </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">function, and use that instead of the comparison operator:</span>
<!--l. 5522--><p class="noindent" ><img 
src="pandocfiguresmlbook186x.png" alt=""  class="fbox" >
<!--l. 5536--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we just need to rewrite the </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function.</span>
                                                                               
                                                                               
<!--l. 5540--><p class="noindent" ><img 
src="pandocfiguresmlbook187x.png" alt=""  class="fbox" >
<!--l. 5550--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-11900016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5551--><p class="noindent" ><span 
class="pplr8t-x-x-90">We cannot use map here, because the result list will not necessarily be the same length as the argument list. The</span>
<span 
class="pplr8t-x-x-90">function will have type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5555--><p class="noindent" ><img 
src="pandocfiguresmlbook188x.png" alt=""  class="fbox" >
<!--l. 5569--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, </span><span 
class="fvmr8t-x-x-81">filter (</span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">x -> x mod 2 = 0) [1; 2; 4; 5] </span><span 
class="pplr8t-x-x-90">evaluates to </span><span 
class="fvmr8t-x-x-81">[2; 4]</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5571--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12000016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 5572--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5576--><p class="noindent" ><img 
src="pandocfiguresmlbook189x.png" alt=""  class="fbox" >
<!--l. 5587--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, we can see if all elements of a list are positive: </span><span 
class="fvmr8t-x-x-81">for_all (</span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">x -> x > 0) [1; 2; -1] </span><span 
class="pplr8t-x-x-90">evaluates to</span>
<span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">. Notice that we are relying on the fact that </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&</span>&</span></span> <span 
class="pplr8t-x-x-90">only evaluates its right hand side when the left hand side is</span>
<span 
class="pplr8t-x-x-90">true to limit the recursion.</span>
<!--l. 5589--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12100016"></a><span 
class="pplr8t-x-x-90">8</span></h4>
<!--l. 5590--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list</span><span 
class="pplr8t-x-x-90">. We use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">on each element of the</span>
<span 
class="pplr8t-x-x-90">list.</span>
                                                                               
                                                                               
<!--l. 5594--><p class="noindent" ><img 
src="pandocfiguresmlbook190x.png" alt=""  class="fbox" >
<!--l. 5605--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have used explicit recursion to handle the outer list, and </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to handle each inner list.</span>
<!--l. 5606--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-12200016"></a><span 
class="pplr8t-x-x-90">7 (When Things Go Wrong)</span></h3>
<!--l. 5608--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12300016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5610--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">smallest_inner </span><span 
class="pplr8t-x-x-90">takes a currently smallest found integer, a boolean value </span><span 
class="fvmr8t-x-x-81">found </span><span 
class="pplr8t-x-x-90">indicating if we</span>
<span 
class="pplr8t-x-x-90">have found any suitable value or not, and the list of integers. It is started with </span><span 
class="fvmr8t-x-x-81">max_int </span><span 
class="pplr8t-x-x-90">as the current</span>
<span 
class="pplr8t-x-x-90">value, so that any number is smaller than it, and </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">for </span><span 
class="fvmr8t-x-x-81">found </span><span 
class="pplr8t-x-x-90">because nothing has been found</span>
<span 
class="pplr8t-x-x-90">yet.</span>
<!--l. 5614--><p class="noindent" ><img 
src="pandocfiguresmlbook191x.png" alt=""  class="fbox" >
<!--l. 5633--><p class="noindent" ><span 
class="pplr8t-x-x-90">Thus, the function raises an exception in the case of an empty list, or one which is non-empty but contains no</span>
<span 
class="pplr8t-x-x-90">positive integer, and otherwise returns the smallest positive integer in the list.</span>
<!--l. 5635--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12400016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5637--><p class="noindent" ><span 
class="pplr8t-x-x-90">We just surround the call to </span><span 
class="fvmr8t-x-x-81">smallest </span><span 
class="pplr8t-x-x-90">with an exception handler for </span><span 
class="fvmr8t-x-x-81">Not_found</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 5641--><p class="noindent" ><img 
src="pandocfiguresmlbook192x.png" alt=""  class="fbox" >
<!--l. 5649--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12500016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5651--><p class="noindent" ><span 
class="pplr8t-x-x-90">We write a function </span><span 
class="fvmr8t-x-x-81">sqrt_inner </span><span 
class="pplr8t-x-x-90">which, given a test number </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and a target number </span><span 
class="fvmr8t-x-x-81">n </span><span 
class="pplr8t-x-x-90">squares </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and</span>
<span 
class="pplr8t-x-x-90">tests if it is more than </span><span 
class="fvmr8t-x-x-81">n</span><span 
class="pplr8t-x-x-90">. If it is, the answer is </span><span 
class="fvmr8t-x-x-81">x - 1</span><span 
class="pplr8t-x-x-90">. The test number will be initialized at </span><span 
class="fvmr8t-x-x-81">1</span><span 
class="pplr8t-x-x-90">. The</span>
<span 
class="pplr8t-x-x-90">function </span><span 
class="fvmr8t-x-x-81">sqrt </span><span 
class="pplr8t-x-x-90">raises our exception if the argument is less than zero, and otherwise begins the testing</span>
<span 
class="pplr8t-x-x-90">process.</span>
<!--l. 5655--><p class="noindent" ><img 
src="pandocfiguresmlbook193x.png" alt=""  class="fbox" >
<!--l. 5669--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12600016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5670--><p class="noindent" ><span 
class="pplr8t-x-x-90">We wrap up the function, handle the </span><span 
class="fvmr8t-x-x-81">Complex </span><span 
class="pplr8t-x-x-90">exception and return.</span>
<!--l. 5674--><p class="noindent" ><img 
src="pandocfiguresmlbook194x.png" alt=""  class="fbox" >
<!--l. 5682--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-12700016"></a><span 
class="pplr8t-x-x-90">8 (Looking Things Up)</span></h3>
<!--l. 5683--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12800016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5684--><p class="noindent" ><span 
class="pplr8t-x-x-90">Since the keys must be unique, the number of different keys is simply the length of the list representing the</span>
<span 
class="pplr8t-x-x-90">dictionary &#8211; so we can just use the usual </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">function.</span>
                                                                               
                                                                               
<!--l. 5686--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-12900016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5688--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type is the same as for the </span><span 
class="fvmr8t-x-x-81">add </span><span 
class="pplr8t-x-x-90">function. However, if we reach the end of the list, we raise an exception, since</span>
<span 
class="pplr8t-x-x-90">we did not manage to find the entry to replace.</span>
<!--l. 5692--><p class="noindent" ><img 
src="pandocfiguresmlbook195x.png" alt=""  class="fbox" >
<!--l. 5706--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13000016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5707--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function takes a list of keys and a list of values and returns a dictionary. So it will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192;</span>
<span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5711--><p class="noindent" ><img 
src="pandocfiguresmlbook196x.png" alt=""  class="fbox" >
<!--l. 5724--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13100016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5725--><p class="noindent" ><span 
class="pplr8t-x-x-90">This will have the type  (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. For the first time, we need to return a pair, building up both</span>
<span 
class="pplr8t-x-x-90">result lists element by element. This is rather awkward, since we will need the tails of both of the eventual</span>
<span 
class="pplr8t-x-x-90">results, so we can attach the new heads. We can do this by pattern matching.</span>
<!--l. 5730--><p class="noindent" ><img 
src="pandocfiguresmlbook197x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 5743--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here&#8217;s a sample evaluation (we cannot really show it in the conventional way, so you must work through it</span>
<span 
class="pplr8t-x-x-90">whilst looking at the function definition):</span>
<!--l. 5745--><p class="indent" >   <div class="eqnarray">
   <center class="math-display" >
<img 
src="pandocfiguresmlbook198x.png" alt="       mklists [(1, 2); (3, 4); (5, 6)]
=&#x21D2;            mklists [(3, 4); (5, 6)]
=&#x21D2;                   mklists [(5, 6)]
=&#x21D2;                         mklists []
=&#x21D2;                           ([], [])

=&#x21D2;                         ([5], [6])
=&#x21D2;                   ([3; 5], [4; 6])
=&#x21D2;              ([1; 3; 5], [2; 4; 6])
" class="math-display" ></center>
</div>
<!--l. 5756--><p class="noindent" ><span 
class="pplr8t-x-x-90">Since the inner pattern match has only one form, and is complete, we can use </span><span 
class="pplb8t-x-x-90">let </span><span 
class="pplr8t-x-x-90">instead:</span>
<!--l. 5760--><p class="noindent" ><img 
src="pandocfiguresmlbook199x.png" alt=""  class="fbox" >
<!--l. 5772--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13200016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5774--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use our </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">function which determines whether an element is a member of a list, building up a list of</span>
<span 
class="pplr8t-x-x-90">the keys we have already seen, and adding to the result list of key-value pairs only those with new</span>
<span 
class="pplr8t-x-x-90">keys.</span>
                                                                               
                                                                               
<!--l. 5778--><p class="noindent" ><img 
src="pandocfiguresmlbook200x.png" alt=""  class="fbox" >
<!--l. 5796--><p class="noindent" ><span 
class="pplr8t-x-x-90">How long does this take to run? Consider how long </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">takes.</span>
<!--l. 5798--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13300016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5799--><p class="noindent" ><span 
class="pplr8t-x-x-90">We pattern match on the first list &#8211; if it is empty, the result is simply </span><span 
class="fvmr8t-x-x-81">b</span><span 
class="pplr8t-x-x-90">. Otherwise, we add the first element of the</span>
<span 
class="pplr8t-x-x-90">first list to the union of the rest of its elements and the second list.</span>
<!--l. 5803--><p class="noindent" ><img 
src="pandocfiguresmlbook201x.png" alt=""  class="fbox" >
<!--l. 5814--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can verify that the elements of dictionary </span><span 
class="fvmr8t-x-x-81">a </span><span 
class="pplr8t-x-x-90">have precedence over the elements of dictionary </span><span 
class="fvmr8t-x-x-81">b </span><span 
class="pplr8t-x-x-90">by noting that</span>
<span 
class="fvmr8t-x-x-81">add </span><span 
class="pplr8t-x-x-90">replaces a value if the key already exists.</span>
<!--l. 5816--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-13400016"></a><span 
class="pplr8t-x-x-90">9 (More with Functions)</span></h3>
<!--l. 5818--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13500016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5820--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">g a b c </span><span 
class="pplr8t-x-x-90">has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B4; </span><span 
class="pplr8t-x-x-90">which can also be written </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B4;</span><span 
class="pplr8t-x-x-90">)). Thus, it takes an</span>
<span 
class="pplr8t-x-x-90">argument of type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">and returns a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B4;</span><span 
class="pplr8t-x-x-90">) which, when you give it an argument of type </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span>
<span 
class="pplr8t-x-x-90">returns a function of type </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B4; </span><span 
class="pplr8t-x-x-90">which, when you give it an argument of type </span><span 
class="zptmcm7m-x-x-90">&#x03B3; </span><span 
class="pplr8t-x-x-90">returns something of type </span><span 
class="zptmcm7m-x-x-90">&#x03B4;</span><span 
class="pplr8t-x-x-90">. And</span>
<span 
class="pplr8t-x-x-90">so, we can apply just one or two arguments to the function </span><span 
class="fvmr8t-x-x-81">g </span><span 
class="pplr8t-x-x-90">(which is called partial application), or apply all</span>
<span 
class="pplr8t-x-x-90">three at once. When we write </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">g a b c = </span><span 
class="fvmr8t-x-x-81">&#x2026; </span><span 
class="pplr8t-x-x-90">this is just shorthand for </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">g = </span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">a -> </span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">b -> </span><span 
class="fvmb8t-x-x-81">fun </span><span 
class="fvmr8t-x-x-81">c -></span>
<span 
class="fvmr8t-x-x-81">&#x2026;</span>
                                                                               
                                                                               
<!--l. 5822--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13600016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5823--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type of </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">is </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">, so if we partially apply the first argument, the type of </span><span 
class="fvmr8t-x-x-81">member x </span><span 
class="pplr8t-x-x-90">must</span>
<span 
class="pplr8t-x-x-90">be </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. We can use the partially-applied </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">function and </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to produce a list of boolean values,</span>
<span 
class="pplr8t-x-x-90">one for each list in the argument, indicating whether or not that list contains the element. Then, we can use</span>
<span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">again to make sure there are no </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">booleans in the list.</span>
<!--l. 5827--><p class="noindent" ><img 
src="pandocfiguresmlbook202x.png" alt=""  class="fbox" >
<!--l. 5837--><p class="noindent" ><span 
class="pplr8t-x-x-90">We could also write:</span>
<!--l. 5841--><p class="noindent" ><img 
src="pandocfiguresmlbook203x.png" alt=""  class="fbox" >
<!--l. 5850--><p class="noindent" ><span 
class="pplr8t-x-x-90">Which do you think is clearer? Why do we check for the absence of </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">rather than the presence of</span>
<span 
class="fvmr8t-x-x-81">true</span><span 
class="pplr8t-x-x-90">?</span>
<!--l. 5852--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13700016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5854--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">( / ) 2 </span><span 
class="pplr8t-x-x-90">resulting from the partial application of the </span><span 
class="fvmr8t-x-x-81">/ </span><span 
class="pplr8t-x-x-90">operator is the function which divides two by</span>
<span 
class="pplr8t-x-x-90">a given number, not the function which divides a given number by two. We can define a reverse divide</span>
<span 
class="pplr8t-x-x-90">function</span><span 
class="pplr8t-x-x-90">&#x2026;</span>
<!--l. 5857--><p class="indent" >   <span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">rdiv x y = y / x</span>
<!--l. 5860--><p class="noindent" ><span 
class="pplr8t-x-x-90">&#x2026;which, when partially applied, does what we want.</span>
<!--l. 5862--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13800016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 5864--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">has type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. The function </span><span 
class="fvmr8t-x-x-81">mapl </span><span 
class="pplr8t-x-x-90">we wrote has type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list</span>
<span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list</span><span 
class="pplr8t-x-x-90">. So the function </span><span 
class="fvmr8t-x-x-81">mapll </span><span 
class="pplr8t-x-x-90">will have type (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list list</span><span 
class="pplr8t-x-x-90">. It may be defined</span>
<span 
class="pplr8t-x-x-90">thus:</span>
<!--l. 5868--><p class="noindent" ><img 
src="pandocfiguresmlbook204x.png" alt=""  class="fbox" >
<!--l. 5876--><p class="noindent" ><span 
class="pplr8t-x-x-90">But, as discussed, we may remove the </span><span 
class="fvmr8t-x-x-81">l</span><span 
class="pplr8t-x-x-90">s too:</span>
                                                                               
                                                                               
<!--l. 5880--><p class="noindent" ><img 
src="pandocfiguresmlbook205x.png" alt=""  class="fbox" >
<!--l. 5888--><p class="noindent" ><span 
class="pplr8t-x-x-90">It is not possible to write a function which would map a function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">over a list, or list of lists, or list of lists of lists</span>
<span 
class="pplr8t-x-x-90">depending upon its argument, because every function in OCaml must have a single type. If a function could map</span>
<span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">over an </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="pplr8t-x-x-90">it must inspect its argument enough to know it is a list of lists, thus it could not be used on a</span>
<span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">unless </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="zplmr7t-x-x-90">= </span><span 
class="zptmcm7m-x-x-90">&#x03B1;</span><span 
class="zptmcm7m-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 5890--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-13900016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 5891--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can write a function to truncate a single list using our </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">function, being careful to deal with the case where</span>
<span 
class="pplr8t-x-x-90">there is not enough to take, and then use this and </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to build </span><span 
class="fvmr8t-x-x-81">truncate </span><span 
class="pplr8t-x-x-90">itself.</span>
<!--l. 5895--><p class="noindent" ><img 
src="pandocfiguresmlbook206x.png" alt=""  class="fbox" >
<!--l. 5908--><p class="noindent" ><span 
class="pplr8t-x-x-90">Here we have used partial application of </span><span 
class="fvmr8t-x-x-81">truncate </span><span 
class="pplr8t-x-x-90">to build a suitable function for </span><span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">. Note that we could use</span>
<span 
class="pplr8t-x-x-90">exception handling instead of calling length, saving time:</span>
<!--l. 5912--><p class="noindent" ><img 
src="pandocfiguresmlbook207x.png" alt=""  class="fbox" >
<!--l. 5925--><p class="noindent" ><span 
class="pplr8t-x-x-90">You might, however, reflect on whether or not this is good style.</span>
<!--l. 5927--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14000016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 5928--><p class="noindent" ><span 
class="pplr8t-x-x-90">First, define a function which takes the given number and a list, returning the first element (or the number if</span>
<span 
class="pplr8t-x-x-90">none). We can then build the main function, using partial application to make a suitable function to give to</span>
<span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">:</span>
                                                                               
                                                                               
<!--l. 5932--><p class="noindent" ><img 
src="pandocfiguresmlbook208x.png" alt=""  class="fbox" >
<!--l. 5944--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-14100016"></a><span 
class="pplr8t-x-x-90">10 (New Kinds of Data)</span></h3>
<!--l. 5946--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14200016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 5948--><p class="noindent" ><span 
class="pplr8t-x-x-90">We need two constructors &#8211; one for squares, which needs just a single integer (the length of a side), and one for</span>
<span 
class="pplr8t-x-x-90">rectangles which needs two integers (the width and height, in that order):</span>
<!--l. 5952--><p class="noindent" ><img 
src="pandocfiguresmlbook209x.png" alt=""  class="fbox" >
<!--l. 5960--><p class="noindent" ><span 
class="pplr8t-x-x-90">The name of our new type is rect. A rect is either a </span><span 
class="fvmr8t-x-x-81">Square </span><span 
class="pplr8t-x-x-90">or a </span><span 
class="fvmr8t-x-x-81">Rectangle</span><span 
class="pplr8t-x-x-90">. For example,</span>
<!--l. 5964--><p class="noindent" ><img 
src="pandocfiguresmlbook210x.png" alt=""  class="fbox" >
<!--l. 5974--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14300016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 5976--><p class="noindent" ><span 
class="pplr8t-x-x-90">We pattern match on the argument:</span>
<!--l. 5980--><p class="noindent" ><img 
src="pandocfiguresmlbook211x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 5990--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14400016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 5991--><p class="noindent" ><span 
class="pplr8t-x-x-90">This will be a function of type rect </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">rect. Squares remain unaltered, but if we have a rectangle with a bigger</span>
<span 
class="pplr8t-x-x-90">width than height, we rotate it by ninety degrees.</span>
<!--l. 5995--><p class="noindent" ><img 
src="pandocfiguresmlbook212x.png" alt=""  class="fbox" >
<!--l. 6008--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14500016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6009--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to perform our rotation on any rects in the argument list which need it. We will then use the</span>
<span 
class="pplr8t-x-x-90">sorting function from the previous chapter which takes a custom comparison function so as to just compare the</span>
<span 
class="pplr8t-x-x-90">widths.</span>
<!--l. 6013--><p class="noindent" ><img 
src="pandocfiguresmlbook213x.png" alt=""  class="fbox" >
<!--l. 6032--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example, packing the list of rects</span>
<!--l. 6035--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[Square 6; Rectangle (4, 3); Rectangle (5, 6); Square 2]</span>
<!--l. 6038--><p class="noindent" ><span 
class="pplr8t-x-x-90">will give</span>
<!--l. 6041--><p class="indent" >   <span 
class="fvmr8t-x-x-81">[Square 2; Rectangle (3, 4); Rectangle (5, 6); Square 6]</span>
<!--l. 6043--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14600016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 6044--><p class="noindent" ><span 
class="pplr8t-x-x-90">We follow the same pattern as for the </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">type, being careful to deal with exceptional circumstances:</span>
                                                                               
                                                                               
<!--l. 6048--><p class="noindent" ><img 
src="pandocfiguresmlbook214x.png" alt=""  class="fbox" >
<!--l. 6072--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14700016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 6073--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use our </span><span 
class="fvmr8t-x-x-81">power </span><span 
class="pplr8t-x-x-90">function from earlier:</span>
<!--l. 6077--><p class="noindent" ><img 
src="pandocfiguresmlbook215x.png" alt=""  class="fbox" >
<!--l. 6099--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-14800016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
                                                                               
                                                                               
<!--l. 6100--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can just wrap up the previous function:</span>
<!--l. 6104--><p class="noindent" ><img 
src="pandocfiguresmlbook216x.png" alt=""  class="fbox" >
<!--l. 6167--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-14900016"></a><span 
class="pplr8t-x-x-90">11 (Growing Trees)</span></h3>
<!--l. 6169--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15000016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 6170--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our function will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. It takes a element to look for, a tree holding that kind of element,</span>
<span 
class="pplr8t-x-x-90">and returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if the element is found, or </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">otherwise.</span>
<!--l. 6174--><p class="noindent" ><img 
src="pandocfiguresmlbook217x.png" alt=""  class="fbox" >
<!--l. 6185--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that we have placed the test </span><span 
class="fvmr8t-x-x-81">x = y </span><span 
class="pplr8t-x-x-90">first of the three to ensure earliest termination upon finding an</span>
<span 
class="pplr8t-x-x-90">appropriate element.</span>
<!--l. 6187--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15100016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 6189--><p class="noindent" ><span 
class="pplr8t-x-x-90">Our function will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree. A leaf flips to a leaf. A branch has its left and right swapped, and we</span>
<span 
class="pplr8t-x-x-90">must recursively flip its left and right sub-trees too.</span>
<!--l. 6193--><p class="noindent" ><img 
src="pandocfiguresmlbook218x.png" alt=""  class="fbox" >
<!--l. 6203--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15200016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 6205--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can check each part of both trees together. Leaves are considered equal, branches are equal if their left and</span>
<span 
class="pplr8t-x-x-90">right sub-trees are equal.</span>
                                                                               
                                                                               
<!--l. 6209--><p class="noindent" ><img 
src="pandocfiguresmlbook219x.png" alt=""  class="fbox" >
<!--l. 6236--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15300016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6238--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use the tree insertion operation repeatedly:</span>
<!--l. 6242--><p class="noindent" ><img 
src="pandocfiguresmlbook220x.png" alt=""  class="fbox" >
<!--l. 6253--><p class="noindent" ><span 
class="pplr8t-x-x-90">There will be no key clashes, because the argument should already be a dictionary. If it is not, earlier keys are</span>
<span 
class="pplr8t-x-x-90">preferred since </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">replaces existing keys.</span>
<!--l. 6255--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15400016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 6257--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can make list dictionaries from both tree dictionaries, append them, and build a new tree from the resultant</span>
<span 
class="pplr8t-x-x-90">list.</span>
<!--l. 6261--><p class="noindent" ><img 
src="pandocfiguresmlbook221x.png" alt=""  class="fbox" >
<!--l. 6270--><p class="noindent" ><span 
class="pplr8t-x-x-90">The combined list may not be a dictionary (because it may have repeated keys), but </span><span 
class="fvmr8t-x-x-81">tree_of_list </span><span 
class="pplr8t-x-x-90">will prefer</span>
<span 
class="pplr8t-x-x-90">keys encountered earlier. So, we put entries from </span><span 
class="fvmr8t-x-x-81">t</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">after those from </span><span 
class="fvmr8t-x-x-81">t</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6272--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15500016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 6274--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will use a list for the sub-trees of each branch, with the empty list signifying there are no more i.e. that this is</span>
<span 
class="pplr8t-x-x-90">the bottom of the tree. Thus, we only need a single constructor.</span>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 6277--><p class="noindent" >
<div class="minipage"><!--l. 6279--><p class="noindent" ><span 
class="fvmb8t-x-x-81">type</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a mtree = Branch of </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a * </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a mtree list</span>
</div></div>
<!--l. 6284--><p class="noindent" ><span 
class="pplr8t-x-x-90">So, now we can define </span><span 
class="fvmr8t-x-x-81">size</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">total</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6288--><p class="noindent" ><img 
src="pandocfiguresmlbook222x.png" alt=""  class="fbox" >
<!--l. 6308--><p class="noindent" ><span 
class="pplr8t-x-x-90">In fact, when there is only one pattern to match, we can put it directly in place of the function&#8217;s argument,</span>
<span 
class="pplr8t-x-x-90">simplifying these definitions:</span>
<!--l. 6312--><p class="noindent" ><img 
src="pandocfiguresmlbook223x.png" alt=""  class="fbox" >
<!--l. 6329--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-15600016"></a><span 
class="pplr8t-x-x-90">12 (In and Out)</span></h3>
                                                                               
                                                                               
<!--l. 6330--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15700016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 6331--><p class="noindent" ><span 
class="pplr8t-x-x-90">A first attempt might be:</span>
<!--l. 6336--><p class="noindent" ><img 
src="pandocfiguresmlbook224x.png" alt=""  class="fbox" >
<!--l. 6348--><p class="noindent" ><span 
class="pplr8t-x-x-90">However, there are two problems:</span>
<!--l. 6351--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3]</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_integers</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3;</span><span 
class="fvmr8t-x-x-81">&#x00A0;]-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 6359--><p class="noindent" ><span 
class="pplr8t-x-x-90">There is an extra space after the last element, and a semicolon too. We can fix this, at the cost of a longer</span>
<span 
class="pplr8t-x-x-90">program:</span>
<!--l. 6363--><p class="noindent" ><img 
src="pandocfiguresmlbook225x.png" alt=""  class="fbox" >
<!--l. 6381--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now, the result is correct:</span>
<!--l. 6384--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3]</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_integers</span><span 
class="fvmr8t-x-x-81">&#x00A0;[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[1;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3]-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 6391--><p class="noindent" >
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-15800016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 6392--><p class="noindent" ><span 
class="pplr8t-x-x-90">We must deal with the exception raised when </span><span 
class="fvmr8t-x-x-81">read_int </span><span 
class="pplr8t-x-x-90">attempts to read something which is not an integer, as</span>
<span 
class="pplr8t-x-x-90">before. When that exception is caught, we try again, by recursively calling ourselves. The function ends when</span>
<span 
class="pplr8t-x-x-90">three integers are input correctly, returning them as a tuple.</span>
<!--l. 6396--><p class="noindent" ><img 
src="pandocfiguresmlbook226x.png" alt=""  class="fbox" >
<!--l. 6416--><p class="noindent" ><span 
class="pplr8t-x-x-90">You may wonder why we used nested </span><span 
class="fvmb8t-x-x-81">let</span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">in </span><span 
class="pplr8t-x-x-90">structures rather than just writing </span><span 
class="fvmr8t-x-x-81">(read_int (), read_int (),</span>
<span 
class="fvmr8t-x-x-81">read_int ()) </span><span 
class="pplr8t-x-x-90">&#8211; the evaluation order of a tuple is not specified and OCaml is free to do what it</span>
<span 
class="pplr8t-x-x-90">wants.</span>
<!--l. 6418--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-15900016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 6419--><p class="noindent" ><span 
class="pplr8t-x-x-90">We ask the user how many dictionary entries will be entered, eliminating the need for a special &#8220;I have finished&#8221;</span>
<span 
class="pplr8t-x-x-90">code. First, a function to read a given number of integer&#8211;string pairs, dealing with the usual problem of</span>
<span 
class="pplr8t-x-x-90">malformed integers:</span>
<!--l. 6423--><p class="noindent" ><img 
src="pandocfiguresmlbook227x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 6443--><p class="noindent" ><span 
class="pplr8t-x-x-90">And now, asking the user how many entries there will be, and calling our first function:</span>
<!--l. 6447--><p class="noindent" ><img 
src="pandocfiguresmlbook228x.png" alt=""  class="fbox" >
<!--l. 6472--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we defined, raised, and handled our own exception </span><span 
class="fvmr8t-x-x-81">BadNumber </span><span 
class="pplr8t-x-x-90">to deal with the user asking</span>
<span 
class="pplr8t-x-x-90">to read a negative number of dictionary entries &#8211; this would cause </span><span 
class="fvmr8t-x-x-81">read_dict_number </span><span 
class="pplr8t-x-x-90">to fail to</span>
<span 
class="pplr8t-x-x-90">return.</span>
<!--l. 6474--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16000016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6475--><p class="noindent" ><span 
class="pplr8t-x-x-90">If we write a function to build the list of integers from </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">to </span><span 
class="zptmcm7m-x-x-90">n </span><span 
class="pplr8t-x-x-90">(or the empty list if </span><span 
class="zptmcm7m-x-x-90">n </span><span 
class="pplr8t-x-x-90">is zero):</span>
<!--l. 6479--><p class="noindent" ><img 
src="pandocfiguresmlbook229x.png" alt=""  class="fbox" >
<!--l. 6490--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can then write a function to output a table of a given size to an output channel.</span>
                                                                               
                                                                               
<!--l. 6494--><p class="noindent" ><img 
src="pandocfiguresmlbook230x.png" alt=""  class="fbox" >
<!--l. 6512--><p class="noindent" ><span 
class="pplr8t-x-x-90">Look at this carefully. We are using nested calls to </span><span 
class="fvmr8t-x-x-81">iter </span><span 
class="pplr8t-x-x-90">to build the two-dimensional table from one-dimensional</span>
<span 
class="pplr8t-x-x-90">lists. Can you separate this into more than one function? Which approach do you think is more</span>
<span 
class="pplr8t-x-x-90">readable?</span>
<!--l. 6514--><p class="indent" >   <span 
class="pplr8t-x-x-90">We can test </span><span 
class="fvmr8t-x-x-81">write_table_channel </span><span 
class="pplr8t-x-x-90">most easily by using the built-in output channel </span><span 
class="fvmr8t-x-x-81">stdout </span><span 
class="pplr8t-x-x-90">which just writes</span>
<span 
class="pplr8t-x-x-90">to the screen:</span>
<!--l. 6517--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;write_table_channel</span><span 
class="fvmr8t-x-x-81">&#x00A0;stdout</span><span 
class="fvmr8t-x-x-81">&#x00A0;5;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">1</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;2</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;3</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;4</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;6</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;10</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">3</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;6</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;9</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;12</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;15</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">4</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;8</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;12</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;16</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;20</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">5</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;10</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;15</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;20</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;25</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 6528--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we just need to wrap it in a function to open an output file, write the table, and close the output, dealing</span>
<span 
class="pplr8t-x-x-90">with any errors which may arise.</span>
<!--l. 6532--><p class="noindent" ><img 
src="pandocfiguresmlbook231x.png" alt=""  class="fbox" >
<!--l. 6549--><p class="noindent" ><span 
class="pplr8t-x-x-90">In addition to raising </span><span 
class="fvmr8t-x-x-81">Invalid_argument </span><span 
class="pplr8t-x-x-90">in the case of a negative number, we handle all possible exceptions to</span>
<span 
class="pplr8t-x-x-90">do with opening, writing to, and closing the file, re-raising them as our own, predefined one. Is this good</span>
<span 
class="pplr8t-x-x-90">style?</span>
                                                                               
                                                                               
<!--l. 6551--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16100016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 6552--><p class="noindent" ><span 
class="pplr8t-x-x-90">We write a simple function to count the lines in a channel by taking a line, ignoring it, and adding one to the</span>
<span 
class="pplr8t-x-x-90">result of taking another line; our recursion ends when an </span><span 
class="fvmr8t-x-x-81">End_of_file </span><span 
class="pplr8t-x-x-90">exception is raised &#8211; it is caught and </span><span 
class="zptmcm7t-x-x-90">0</span>
<span 
class="pplr8t-x-x-90">ends the summation.</span>
<!--l. 6554--><p class="indent" >   <span 
class="pplr8t-x-x-90">The main function </span><span 
class="fvmr8t-x-x-81">countlines </span><span 
class="pplr8t-x-x-90">just opens the file, calls the first function, and closes the file. Any errors are</span>
<span 
class="pplr8t-x-x-90">caught and re-raised using the built-in </span><span 
class="fvmr8t-x-x-81">Failure </span><span 
class="pplr8t-x-x-90">exception.</span>
<!--l. 6558--><p class="noindent" ><img 
src="pandocfiguresmlbook232x.png" alt=""  class="fbox" >
<!--l. 6580--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16200016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 6581--><p class="noindent" ><span 
class="pplr8t-x-x-90">As usual, let us write a function to deal with channels, and then deal with opening and closing files afterward.</span>
<span 
class="pplr8t-x-x-90">Our function takes an input channel and an output channel, adds the line read from the input to the output,</span>
<span 
class="pplr8t-x-x-90">follows it with a newline character, and continues. It only ends when the </span><span 
class="fvmr8t-x-x-81">End_of_file </span><span 
class="pplr8t-x-x-90">exception is raised inside</span>
<span 
class="fvmr8t-x-x-81">input_line </span><span 
class="pplr8t-x-x-90">and caught.</span>
<!--l. 6585--><p class="noindent" ><img 
src="pandocfiguresmlbook233x.png" alt=""  class="fbox" >
<!--l. 6599--><p class="noindent" ><span 
class="pplr8t-x-x-90">Now we wrap it up, remembering to open and close both files and deal with the many different errors which</span>
<span 
class="pplr8t-x-x-90">might occur.</span>
                                                                               
                                                                               
<!--l. 6603--><p class="noindent" ><img 
src="pandocfiguresmlbook234x.png" alt=""  class="fbox" >
<!--l. 6621--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-16300016"></a><span 
class="pplr8t-x-x-90">13 (Putting Things in Boxes)</span></h3>
<!--l. 6622--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16400016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 6623--><p class="noindent" ><span 
class="pplr8t-x-x-90">Two references, </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">y</span><span 
class="pplr8t-x-x-90">, of type </span><span 
class="pplb8t-x-x-90">int ref </span><span 
class="pplr8t-x-x-90">have been created. Their initial values are </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7t-x-x-90">2</span><span 
class="pplr8t-x-x-90">. Their final values</span>
<span 
class="pplr8t-x-x-90">are </span><span 
class="zptmcm7t-x-x-90">2 </span><span 
class="pplr8t-x-x-90">and </span><span 
class="zptmcm7t-x-x-90">4</span><span 
class="pplr8t-x-x-90">. The type of the expression is </span><span 
class="pplb8t-x-x-90">int </span><span 
class="pplr8t-x-x-90">because this is the type of </span><span 
class="fvmr8t-x-x-81">!x + !y</span><span 
class="pplr8t-x-x-90">, and the result is</span>
<span 
class="zptmcm7t-x-x-90">6</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6625--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16500016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 6626--><p class="noindent" ><span 
class="pplr8t-x-x-90">The expression </span><span 
class="fvmr8t-x-x-81">[ref 5; ref 5] </span><span 
class="pplr8t-x-x-90">is of type </span><span 
class="pplb8t-x-x-90">int ref list</span><span 
class="pplr8t-x-x-90">. It contains two references each containing the integer 5.</span>
<span 
class="pplr8t-x-x-90">Changing the contents of one reference will not change the contents of the other. The expression </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">x = ref 5</span>
<span 
class="fvmb8t-x-x-81">in </span><span 
class="fvmr8t-x-x-81">[x; x] </span><span 
class="pplr8t-x-x-90">is also of type </span><span 
class="pplb8t-x-x-90">int ref list </span><span 
class="pplr8t-x-x-90">and also contains two references to the integer 5. However, altering one will</span>
<span 
class="pplr8t-x-x-90">alter the other:</span>
<!--l. 6629--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;r</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;let</span><span 
class="fvmr8t-x-x-81">&#x00A0;x</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;ref</span><span 
class="fvmr8t-x-x-81">&#x00A0;5</span><span 
class="fvmr8t-x-x-81">&#x00A0;in</span><span 
class="fvmr8t-x-x-81">&#x00A0;[x;</span><span 
class="fvmr8t-x-x-81">&#x00A0;x];;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">val</span><span 
class="fvmr8t-x-x-81">&#x00A0;r</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;ref</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[{contents</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;5};</span><span 
class="fvmr8t-x-x-81">&#x00A0;{contents</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;5}]</span></span></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">match r with h::_ -> h := 6</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Warning</span><span 
class="fvmr8t-x-x-81">&#x00A0;8:</span><span 
class="fvmr8t-x-x-81">&#x00A0;this</span><span 
class="fvmr8t-x-x-81">&#x00A0;pattern-matching</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;exhaustive.</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Here</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;an</span><span 
class="fvmr8t-x-x-81">&#x00A0;example</span><span 
class="fvmr8t-x-x-81">&#x00A0;of</span><span 
class="fvmr8t-x-x-81">&#x00A0;a</span><span 
class="fvmr8t-x-x-81">&#x00A0;value</span><span 
class="fvmr8t-x-x-81">&#x00A0;that</span><span 
class="fvmr8t-x-x-81">&#x00A0;is</span><span 
class="fvmr8t-x-x-81">&#x00A0;not</span><span 
class="fvmr8t-x-x-81">&#x00A0;matched:</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">[]</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;r;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;int</span><span 
class="fvmr8t-x-x-81">&#x00A0;ref</span><span 
class="fvmr8t-x-x-81">&#x00A0;list</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;[{contents</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;6};</span><span 
class="fvmr8t-x-x-81">&#x00A0;{contents</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;6}]</span></span></span>
                                                                               
                                                                               
<!--l. 6641--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16600016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 6642--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can write a function </span><span 
class="fvmr8t-x-x-81">forloop </span><span 
class="pplr8t-x-x-90">which takes a function of type </span><span 
class="pplb8t-x-x-90">int </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">(where alpha would normally be </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">),</span>
<span 
class="pplr8t-x-x-90">together with the start and end numbers:</span>
<!--l. 6646--><p class="noindent" ><img 
src="pandocfiguresmlbook235x.png" alt=""  class="fbox" >
<!--l. 6659--><p class="noindent" ><span 
class="pplr8t-x-x-90">For example:</span>
<!--l. 6662--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;forloop</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_int</span><span 
class="fvmr8t-x-x-81">&#x00A0;2</span><span 
class="fvmr8t-x-x-81">&#x00A0;10;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2345678910-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">#</span><span 
class="fvmr8t-x-x-81">&#x00A0;forloop</span><span 
class="fvmr8t-x-x-81">&#x00A0;print_int</span><span 
class="fvmr8t-x-x-81">&#x00A0;2</span><span 
class="fvmr8t-x-x-81">&#x00A0;2;;</span></span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">2-</span><span 
class="fvmr8t-x-x-81">&#x00A0;:</span><span 
class="fvmr8t-x-x-81">&#x00A0;unit</span><span 
class="fvmr8t-x-x-81">&#x00A0;=</span><span 
class="fvmr8t-x-x-81">&#x00A0;()</span></span></span>
<!--l. 6669--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16700016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6671--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|] </span><span 
class="pplr8t-x-x-90">: </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">int array</span>
<!--l. 6674--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|true; false; true|] </span><span 
class="pplr8t-x-x-90">: </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">bool array</span>
<!--l. 6677--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|[|1|]|] </span><span 
class="pplr8t-x-x-90">: (</span><span 
class="pplb8t-x-x-90">int array</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">array </span><span 
class="pplr8t-x-x-90">which is </span><span 
class="pplb8t-x-x-90">int array array</span>
<!--l. 6680--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|[1; 2; 3]; [4; 5; 6]|] </span><span 
class="pplr8t-x-x-90">: </span><span 
class="pplb8t-x-x-90">int list array</span>
<!--l. 6683--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|].(2) </span><span 
class="pplr8t-x-x-90">: </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">, has value 2</span>
<!--l. 6686--><p class="noindent" ><span 
class="fvmr8t-x-x-81">[|1; 2; 3|].(2) <- 4 </span><span 
class="pplr8t-x-x-90">: </span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">, updates the array to </span><span 
class="fvmr8t-x-x-81">[|1; 2; 4|]</span>
<!--l. 6688--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16800016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 6690--><p class="noindent" ><span 
class="pplr8t-x-x-90">We use a </span><span 
class="fvmb8t-x-x-81">for </span><span 
class="pplr8t-x-x-90">construct:</span>
<!--l. 6694--><p class="noindent" ><img 
src="pandocfiguresmlbook236x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 6707--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that this works for the empty array, because a </span><span 
class="fvmb8t-x-x-81">for </span><span 
class="pplr8t-x-x-90">construct where the second number is less than the first</span>
<span 
class="pplr8t-x-x-90">never executes its expression.</span>
<!--l. 6709--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-16900016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 6711--><p class="noindent" ><span 
class="pplr8t-x-x-90">Since we wish to reverse the array in place, our function will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">array </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">. Our method is to proceed</span>
<span 
class="pplr8t-x-x-90">from the first element to the half-way point, swapping elements from either end of the array. If the array has odd</span>
<span 
class="pplr8t-x-x-90">length, the middle element will not be altered.</span>
<!--l. 6715--><p class="noindent" ><img 
src="pandocfiguresmlbook237x.png" alt=""  class="fbox" >
<!--l. 6731--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17000016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 6732--><p class="noindent" ><span 
class="pplr8t-x-x-90">We will represent the </span><span 
class="pplb8t-x-x-90">int array array </span><span 
class="pplr8t-x-x-90">as an array of columns so that </span><span 
class="fvmr8t-x-x-81">a.(x).(y) </span><span 
class="pplr8t-x-x-90">is the element in column </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">and</span>
<span 
class="pplr8t-x-x-90">row </span><span 
class="fvmr8t-x-x-81">y</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6736--><p class="noindent" ><img 
src="pandocfiguresmlbook238x.png" alt=""  class="fbox" >
<!--l. 6754--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that the result is correct for </span><span 
class="fvmr8t-x-x-81">table 0</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6756--><p class="noindent" >
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-17100016"></a><span 
class="pplr8t-x-x-90">8</span></h4>
<!--l. 6758--><p class="noindent" ><span 
class="pplr8t-x-x-90">The difference between the codes for </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">, or </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">Z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">is 32, so we add or subtract as appropriate.</span>
<span 
class="pplr8t-x-x-90">Codes not in those ranges are unaltered.</span>
<!--l. 6762--><p class="noindent" ><img 
src="pandocfiguresmlbook239x.png" alt=""  class="fbox" >
<!--l. 6778--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17200016"></a><span 
class="pplr8t-x-x-90">9</span></h4>
<!--l. 6779--><p class="noindent" ><span 
class="pplr8t-x-x-90">Periods, exclamation marks and question marks may appear in multiples, leading to a wrong answer. The</span>
<span 
class="pplr8t-x-x-90">number of characters does not include newlines. It is not clear how quotations would be handled. Counting the</span>
<span 
class="pplr8t-x-x-90">words by counting spaces is inaccurate &#8211; a line with ten words will count only nine.</span>
<!--l. 6781--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-17300016"></a><span 
class="pplr8t-x-x-90">14 (The Other Numbers)</span></h3>
<!--l. 6782--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17400016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 6784--><p class="noindent" ><span 
class="pplr8t-x-x-90">We calculate the ceiling and floor, and return the closer one, being careful to make sure that a point equally far</span>
<span 
class="pplr8t-x-x-90">from the ceiling and floor is rounded up.</span>
<!--l. 6788--><p class="noindent" ><img 
src="pandocfiguresmlbook240x.png" alt=""  class="fbox" >
<!--l. 6799--><p class="noindent" ><span 
class="pplr8t-x-x-90">The behaviour with regard to values such as </span><span 
class="fvmr8t-x-x-81">infinity </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">nan </span><span 
class="pplr8t-x-x-90">is fine, since it always returns the result of either</span>
<span 
class="fvmr8t-x-x-81">floor </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">ceil</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 6801--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17500016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 6803--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function returns another point, and is simple arithmetic.</span>
<!--l. 6807--><p class="noindent" ><img 
src="pandocfiguresmlbook241x.png" alt=""  class="fbox" >
<!--l. 6815--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17600016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 6816--><p class="noindent" ><span 
class="pplr8t-x-x-90">The whole part is calculated using the built-in </span><span 
class="fvmr8t-x-x-81">floor </span><span 
class="pplr8t-x-x-90">function. We return a tuple, the first number being the</span>
<span 
class="pplr8t-x-x-90">whole part, the second being the original number minus the whole part. In the case of a negative number, we</span>
<span 
class="pplr8t-x-x-90">must be careful &#8211; </span><span 
class="fvmr8t-x-x-81">floor </span><span 
class="pplr8t-x-x-90">always rounds downward, not toward zero!</span>
<!--l. 6820--><p class="noindent" ><img 
src="pandocfiguresmlbook242x.png" alt=""  class="fbox" >
<!--l. 6833--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we are using the unary operator </span><span 
class="fvmr8t-x-x-81">-. </span><span 
class="pplr8t-x-x-90">to make the number positive.</span>
<!--l. 6835--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17700016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6837--><p class="noindent" ><span 
class="pplr8t-x-x-90">We need to determine at which column the asterisk will be printed. It is important to make sure that the range</span>
<span 
class="zptmcm7t-x-x-90">0</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">is split into fifty equal sized parts, which requires some careful thought. Then, we just print enough spaces to</span>
<span 
class="pplr8t-x-x-90">pad the line, add the asterisk, and a newline character.</span>
<!--l. 6841--><p class="noindent" ><img 
src="pandocfiguresmlbook243x.png" alt=""  class="fbox" >
<!--l. 6853--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-17800016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
                                                                               
                                                                               
<!--l. 6855--><p class="noindent" ><span 
class="pplr8t-x-x-90">We use a reference to hold the current value, starting at the beginning of the range, and then loop until we are</span>
<span 
class="pplr8t-x-x-90">outside the range.</span>
<!--l. 6859--><p class="noindent" ><img 
src="pandocfiguresmlbook244x.png" alt=""  class="fbox" >
<!--l. 6872--><p class="noindent" ><span 
class="pplr8t-x-x-90">No allowance has been made here for bad arguments (for example, </span><span 
class="fvmr8t-x-x-81">b </span><span 
class="pplr8t-x-x-90">smaller than </span><span 
class="fvmr8t-x-x-81">a</span><span 
class="pplr8t-x-x-90">). Can you extend our</span>
<span 
class="pplr8t-x-x-90">program to move the zero-point to the middle of the screen, so that the sine function can be graphed even when</span>
<span 
class="pplr8t-x-x-90">its result is less than zero?</span>
<!--l. 6874--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-17900016"></a><span 
class="pplr8t-x-x-90">15 (The OCaml Standard Library)</span></h3>
<!--l. 6875--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18000016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 6876--><p class="noindent" ><span 
class="pplr8t-x-x-90">A non-tail-recursive one is simple:</span>
<!--l. 6880--><p class="noindent" ><img 
src="pandocfiguresmlbook245x.png" alt=""  class="fbox" >
<!--l. 6891--><p class="noindent" ><span 
class="pplr8t-x-x-90">To make a tail-recursive one, we can use an accumulator, reversing each list as we append it, and reversing the</span>
<span 
class="pplr8t-x-x-90">result. </span><span 
class="fvmr8t-x-x-81">List.rev </span><span 
class="pplr8t-x-x-90">is tail-recursive already.</span>
<!--l. 6895--><p class="noindent" ><img 
src="pandocfiguresmlbook246x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 6909--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18100016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 6910--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use </span><span 
class="fvmr8t-x-x-81">List.mem</span><span 
class="pplr8t-x-x-90">, partially applied, to map over the list of lists. We then make sure that </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">is not in the</span>
<span 
class="pplr8t-x-x-90">resultant list, again with </span><span 
class="fvmr8t-x-x-81">List.mem</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 6914--><p class="noindent" ><img 
src="pandocfiguresmlbook247x.png" alt=""  class="fbox" >
<!--l. 6922--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18200016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 6924--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">String.iter </span><span 
class="pplr8t-x-x-90">function calls a user-supplied function of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit </span><span 
class="pplr8t-x-x-90">on each character of the string. We</span>
<span 
class="pplr8t-x-x-90">can use this to increment a counter when an exclamation mark is found.</span>
<!--l. 6928--><p class="noindent" ><img 
src="pandocfiguresmlbook248x.png" alt=""  class="fbox" >
<!--l. 6939--><p class="noindent" ><span 
class="pplr8t-x-x-90">The contents of the counter is then the result of the function.</span>
<!--l. 6941--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18300016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 6943--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use the </span><span 
class="fvmr8t-x-x-81">String.map </span><span 
class="pplr8t-x-x-90">function, which takes a user-supplied function of type </span><span 
class="pplb8t-x-x-90">char </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">char </span><span 
class="pplr8t-x-x-90">and returns a</span>
<span 
class="pplr8t-x-x-90">new string, where each character is the result of the mapping function on the character in the same place in the</span>
<span 
class="pplr8t-x-x-90">old string.</span>
<!--l. 6947--><p class="noindent" ><img 
src="pandocfiguresmlbook249x.png" alt=""  class="fbox" >
<!--l. 6956--><p class="noindent" ><span 
class="pplr8t-x-x-90">Notice that we have taken advantage of partial application to erase the last argument as usual.</span>
<!--l. 6958--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18400016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 6960--><p class="noindent" ><span 
class="pplr8t-x-x-90">Looking at the documentation for the </span><span 
class="fvmr8t-x-x-81">String </span><span 
class="pplr8t-x-x-90">module we find the following:</span>
                                                                               
                                                                               
<!--l. 6964--><p class="noindent" ><img 
src="pandocfiguresmlbook250x.png" alt=""  class="fbox" >
<!--l. 6972--><p class="noindent" ><span 
class="pplr8t-x-x-90">So, by using the empty string as a separator, we have what we want:</span>
<!--l. 6976--><p class="noindent" ><img 
src="pandocfiguresmlbook251x.png" alt=""  class="fbox" >
<!--l. 6984--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18500016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 6986--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can use the functions </span><span 
class="fvmr8t-x-x-81">create</span><span 
class="pplr8t-x-x-90">, </span><span 
class="fvmr8t-x-x-81">add_string</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">contents </span><span 
class="pplr8t-x-x-90">from the </span><span 
class="fvmr8t-x-x-81">Buffer </span><span 
class="pplr8t-x-x-90">module together with the usual</span>
<span 
class="pplr8t-x-x-90">list iterator </span><span 
class="fvmr8t-x-x-81">List.iter</span><span 
class="pplr8t-x-x-90">:</span>
<!--l. 6990--><p class="noindent" ><img 
src="pandocfiguresmlbook252x.png" alt=""  class="fbox" >
<!--l. 7001--><p class="noindent" ><span 
class="pplr8t-x-x-90">The initial size of the buffer, </span><span 
class="zptmcm7t-x-x-90">100</span><span 
class="pplr8t-x-x-90">, is arbitrary.</span>
<!--l. 7003--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18600016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7005--><p class="noindent" ><span 
class="pplr8t-x-x-90">We repeatedly check if the string we are looking for is right at the beginning of the string to be searched. If not,</span>
<span 
class="pplr8t-x-x-90">we chop one character off the string to be searched, and try again. Every time we find a match, we increment a</span>
<span 
class="pplr8t-x-x-90">counter.</span>
<!--l. 7009--><p class="noindent" ><img 
src="pandocfiguresmlbook253x.png" alt=""  class="fbox" >
                                                                               
                                                                               
<!--l. 7028--><p class="noindent" ><span 
class="pplr8t-x-x-90">You might consider that writing this function with lists of characters rather than strings would be easier.</span>
<span 
class="pplr8t-x-x-90">Unfortunately, it would be slow, and these kinds of searching tasks are often required to be very</span>
<span 
class="pplr8t-x-x-90">fast.</span>
<!--l. 7030--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-18700016"></a><span 
class="pplr8t-x-x-90">16 (Building Bigger Programs)</span></h3>
<!--l. 7031--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18800016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7032--><p class="noindent" ><span 
class="pplr8t-x-x-90">First, we extend the </span><span 
class="fvmr8t-x-x-81">Textstat </span><span 
class="pplr8t-x-x-90">module to allow frequencies to be counted and expose it through the interface.</span>
<span 
class="pplr8t-x-x-90">Then we must revise the main program is as shown below.</span>
<div class="center" 
>
<!--l. 7036--><p class="noindent" >
<!--l. 7052--><p class="noindent" ><img 
src="pandocfiguresmlbook254x.png" alt=""  class="fbox" ></div>
<div class="center" 
>
<!--l. 7057--><p class="noindent" >
                                                                               
                                                                               
<!--l. 7109--><p class="noindent" ><img 
src="pandocfiguresmlbook255x.png" alt=""  class="fbox" ></div>
                                                                               
                                                                               
<div class="center" 
>
<!--l. 7114--><p class="noindent" >
<!--l. 7159--><p class="noindent" ><img 
src="pandocfiguresmlbook256x.png" alt=""  class="fbox" ></div>
<!--l. 7162--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-18900016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7164--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can write two little functions &#8211; one to read all the lines from a file, and one to write them. The</span>
                                                                               
                                                                               
<span 
class="pplr8t-x-x-90">main function, then, reads the command line to find the input and output file names, reads the lines</span>
<span 
class="pplr8t-x-x-90">from the input, reverses the list of lines, and writes them out. If a problem occurs, the exception is</span>
<span 
class="pplr8t-x-x-90">printed out. If the command line is badly formed, we print a usage message and exit. This is shown</span>
<span 
class="pplr8t-x-x-90">below.</span>
<div class="center" 
>
<!--l. 7167--><p class="noindent" >
<!--l. 7211--><p class="noindent" ><img 
src="pandocfiguresmlbook257x.png" alt=""  class="fbox" ></div>
                                                                               
                                                                               
<!--l. 7215--><p class="noindent" ><span 
class="pplr8t-x-x-90">Note that there is a problem if the file has no final newline &#8211; it will end up with one. How might you solve</span>
<span 
class="pplr8t-x-x-90">that?</span>
<!--l. 7218--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19000016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7219--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can simply do something (or nothing) a huge number of times using a </span><span 
class="fvmb8t-x-x-81">for </span><span 
class="pplr8t-x-x-90">loop.</span>
<!--l. 7223--><p class="noindent" ><img 
src="pandocfiguresmlbook258x.png" alt=""  class="fbox" >
<!--l. 7234--><p class="noindent" ><span 
class="pplr8t-x-x-90">On many systems, typing </span><span 
class="fvmr8t-x-x-81">time </span><span 
class="pplr8t-x-x-90">followed by a space and the usual command will print out on the screen how</span>
<span 
class="pplr8t-x-x-90">long the program took to run. For example, on the author&#8217;s computer:</span>
<!--l. 7237--><p class="noindent" ><span 
class="fvmr8t-x-x-81">$ ocamlc bigloop.ml -o bigloop</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">$ time ./bigloop</span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81">real</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m1.896s</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">user</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m1.885s</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">sys</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m0.005s</span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81">$ ocamlopt bigloop.ml -o bigloop</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">$ time ./bigloop</span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81">real</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m0.022s</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">user</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m0.014s</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">sys</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;0m0.003s</span>
<!--l. 7252--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can see that, when compiled with </span><span 
class="fvmr8t-x-x-81">ocamlc</span><span 
class="pplr8t-x-x-90">, it takes 1.9s to run, but when compiled with </span><span 
class="fvmr8t-x-x-81">ocamlopt </span><span 
class="pplr8t-x-x-90">just</span>
<span 
class="pplr8t-x-x-90">0.022s.</span>
<!--l. 7254--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19100016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7255--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can get all the lines in the file using our </span><span 
class="fvmr8t-x-x-81">getlines </span><span 
class="pplr8t-x-x-90">function from question two. The main function simply calls</span>
<span 
class="fvmr8t-x-x-81">string_in_line </span><span 
class="pplr8t-x-x-90">on each line, printing it if </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">is returned.</span>
<!--l. 7257--><p class="indent" >   <span 
class="pplr8t-x-x-90">The interesting function is </span><span 
class="fvmr8t-x-x-81">string_in_line</span><span 
class="pplr8t-x-x-90">. To see if </span><span 
class="fvmr8t-x-x-81">term </span><span 
class="pplr8t-x-x-90">is in </span><span 
class="fvmr8t-x-x-81">line </span><span 
class="pplr8t-x-x-90">we start at position 0. The condition for</span>
<span 
class="pplr8t-x-x-90">the term having been found is a combination of boolean expressions. The first ensures that we are not so far</span>
<span 
class="pplr8t-x-x-90">through the string that the expression could not possibly fit at the current position. The second checks to see if</span>
<span 
class="pplr8t-x-x-90">the term is found at the current position by using the function </span><span 
class="fvmr8t-x-x-81">String.sub </span><span 
class="pplr8t-x-x-90">from the OCaml Standard Library. If</span>
<span 
class="pplr8t-x-x-90">not, we carry on. This is illustrated below.</span>
<div class="center" 
>
                                                                               
                                                                               
<!--l. 7260--><p class="noindent" >
<!--l. 7303--><p class="noindent" ><img 
src="pandocfiguresmlbook259x.png" alt=""  class="fbox" ></div>
                                                                               
                                                                               
<!--l. 7307--><p class="indent" >
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 7309--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><a 
 id="x1-19200016"></a><span 
class="pplr8t-x-x-90">Hints for Questions</span></h2>
   <h3 class="likesectionHead"><a 
 id="x1-19300016"></a><span 
class="pplr8t-x-x-90">1</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Starting Off</span></h3>
<!--l. 7312--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19400016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7313--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try to work these out on paper, and then check by typing them in. Remember that the type of an</span>
<span 
class="pplr8t-x-x-90">expression is the type of the value it will evaluate to. Can you show the steps of evaluation for each</span>
<span 
class="pplr8t-x-x-90">expression?</span>
<!--l. 7315--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19500016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7316--><p class="noindent" ><span 
class="pplr8t-x-x-90">Type each expression in. What number does each evaluate to? Can you work out which operator (</span><span 
class="fvmr8t-x-x-81">mod </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">+</span><span 
class="pplr8t-x-x-90">) is</span>
<span 
class="pplr8t-x-x-90">being calculated first?</span>
<!--l. 7318--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19600016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7319--><p class="noindent" ><span 
class="pplr8t-x-x-90">Type it in. What does OCaml print? What is the evaluation order?</span>
<!--l. 7321--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19700016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7322--><p class="noindent" ><span 
class="pplr8t-x-x-90">What if a value of 2 appeared? How might we interpret it?</span>
<!--l. 7324--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-19800016"></a><span 
class="pplr8t-x-x-90">2</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Names and Functions</span></h3>
<!--l. 7325--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-19900016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7326--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function takes one integer, and returns that integer multiplied by ten. So what must its type</span>
<span 
class="pplr8t-x-x-90">be?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20000016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7328--><p class="noindent" ><span 
class="pplr8t-x-x-90">What does the function take as arguments? What is the type of its result? So what is the whole type? You can use</span>
<span 
class="pplr8t-x-x-90">the </span><span 
class="fvmr8t-x-x-81"><> </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">&& </span><span 
class="pplr8t-x-x-90">operators here.</span>
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-20100016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7330--><p class="noindent" ><span 
class="pplr8t-x-x-90">This will be a recursive function, so remember to use </span><span 
class="fvmb8t-x-x-81">let rec</span><span 
class="pplr8t-x-x-90">. What is the sum of all the integers from </span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="zptmcm7m-x-x-90">&#x2026;</span><span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">?</span>
<span 
class="pplr8t-x-x-90">Perhaps this is a good base case.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20200016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7332--><p class="noindent" ><span 
class="pplr8t-x-x-90">This will be a recursive function. What happens when you raise a number to the power </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">? What about the power</span>
<span 
class="zptmcm7t-x-x-90">1</span><span 
class="pplr8t-x-x-90">? What about a higher power?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20300016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7334--><p class="noindent" ><span 
class="pplr8t-x-x-90">Can you define this in terms of the </span><span 
class="fvmr8t-x-x-81">isvowel </span><span 
class="pplr8t-x-x-90">function we have already written?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20400016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7336--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try adding parentheses to the expression in a way which does not change its meaning. Does this make it easier to</span>
<span 
class="pplr8t-x-x-90">understand?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20500016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7338--><p class="noindent" ><span 
class="pplr8t-x-x-90">When does it not terminate? Can you add a check to see when it might happen, and return </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">instead? What is the</span>
<span 
class="pplr8t-x-x-90">factorial of </span><span 
class="zptmcm7t-x-x-90">0 </span><span 
class="pplr8t-x-x-90">anyway?</span>
<!--l. 7339--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-20600016"></a><span 
class="pplr8t-x-x-90">3</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Case by Case</span></h3>
<!--l. 7340--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-20700016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7341--><p class="noindent" ><span 
class="pplr8t-x-x-90">We are pattern matching on a boolean value, so there are just two cases: </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20800016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7343--><p class="noindent" ><span 
class="pplr8t-x-x-90">Convert the </span><span 
class="fvmb8t-x-x-81">if</span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">then</span><span 
class="fvmr8t-x-x-81">&#x2026;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmb8t-x-x-81">else </span><span 
class="pplr8t-x-x-90">structure of the </span><span 
class="fvmr8t-x-x-81">sum </span><span 
class="pplr8t-x-x-90">function from the previous chapter into a pattern matching</span>
<span 
class="pplr8t-x-x-90">structure.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-20900016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7345--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will need three cases as before &#8211; when the power is </span><span 
class="zptmcm7t-x-x-90">0</span><span 
class="pplr8t-x-x-90">, </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">or greater than </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">&#8211; but now in the form of a pattern</span>
<span 
class="pplr8t-x-x-90">match.</span>
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-21000016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7347--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider where parentheses might be added without altering the expression.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21100016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7349--><p class="noindent" ><span 
class="pplr8t-x-x-90">There will be two cases in each function &#8211; the special range pattern </span><span 
class="fvmr8t-x-x-81">x..y</span><span 
class="pplr8t-x-x-90">, and </span><span 
class="fvmr8t-x-x-81">_ </span><span 
class="pplr8t-x-x-90">for any other character.</span>
<!--l. 7351--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-21200016"></a><span 
class="pplr8t-x-x-90">4</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Making Lists</span></h3>
<!--l. 7352--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-21300016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7353--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider three cases: (1)</span><span 
class="pplr8t-x-x-90">&#x00A0;the argument list is empty, (2)</span><span 
class="pplr8t-x-x-90">&#x00A0;the argument list has one element, (3)</span><span 
class="pplr8t-x-x-90">&#x00A0;the</span>
<span 
class="pplr8t-x-x-90">argument list has more than one element </span><span 
class="fvmr8t-x-x-81">a::b::t</span><span 
class="pplr8t-x-x-90">. In the last case, which element do we need to miss</span>
<span 
class="pplr8t-x-x-90">out?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21400016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7355--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type </span><span 
class="pplb8t-x-x-90">bool list</span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. Consider the empty list, the list with </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">as its head, and the list</span>
<span 
class="pplr8t-x-x-90">with </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">as its head. Count one for each </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">and zero for each </span><span 
class="fvmr8t-x-x-81">false</span><span 
class="pplr8t-x-x-90">.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21500016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7357--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function to make a palindrome is trivial; to detect if a list is a palindrome, consider the definition of a</span>
<span 
class="pplr8t-x-x-90">palindrome &#8211; a list which equals its own reverse.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21600016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7359--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the cases (1)</span><span 
class="pplr8t-x-x-90">&#x00A0;the empty list, (2)</span><span 
class="pplr8t-x-x-90">&#x00A0;the list with one element, and (3)</span><span 
class="pplr8t-x-x-90">&#x00A0;the list with more than one element.</span>
<span 
class="pplr8t-x-x-90">For the tail recursive version, use an accumulating argument.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21700016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7361--><p class="noindent" ><span 
class="pplr8t-x-x-90">Can any element exist in the empty list? If the list is not empty, it must have a head and a tail. What is the answer</span>
<span 
class="pplr8t-x-x-90">if the element we are looking for is equal to the head? What do we do if it is not?</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-21800016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7363--><p class="noindent" ><span 
class="pplr8t-x-x-90">The empty list is already a set. If we have a head and a tail, what does it tell us to find out if the head exists</span>
<span 
class="pplr8t-x-x-90">within the tail?</span>
                                                                               
                                                                               
   <h4 class="likesubsectionHead"><a 
 id="x1-21900016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7365--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider in which order the </span><span 
class="fvmr8t-x-x-81">@ </span><span 
class="pplr8t-x-x-90">operators are evaluated in the reverse function. How long does each append take?</span>
<span 
class="pplr8t-x-x-90">How many are there?</span>
<!--l. 7367--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-22000016"></a><span 
class="pplr8t-x-x-90">5</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Sorting Things</span></h3>
<!--l. 7368--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22100016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7369--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider adding another </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="pplr8t-x-x-90">before </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">left </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">right</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7371--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22200016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7372--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the situations in which </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">drop </span><span 
class="pplr8t-x-x-90">can fail, and what arguments </span><span 
class="fvmr8t-x-x-81">msort </span><span 
class="pplr8t-x-x-90">gives them at each</span>
<span 
class="pplr8t-x-x-90">recursion.</span>
<!--l. 7374--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22300016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7375--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is a simple change &#8211; consider the comparison operator itself.</span>
<!--l. 7377--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22400016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7378--><p class="noindent" ><span 
class="pplr8t-x-x-90">What will the type of the function be? Lists of length zero and one are already sorted &#8211; so these will be the base</span>
<span 
class="pplr8t-x-x-90">cases. What do we do when there is more than one element?</span>
<!--l. 7380--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22500016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7381--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can put one </span><span 
class="fvmb8t-x-x-81">let rec </span><span 
class="pplr8t-x-x-90">construct inside another.</span>
<!--l. 7383--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-22600016"></a><span 
class="pplr8t-x-x-90">6</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Functions upon Functions upon Functions</span></h3>
                                                                               
                                                                               
<!--l. 7384--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22700016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7385--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function </span><span 
class="fvmr8t-x-x-81">calm </span><span 
class="pplr8t-x-x-90">is simple recursion on lists. There are three cases &#8211; the empty list, a list beginning with </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">!</span><span 
class="fvmr8c-x-x-81">'</span>
<span 
class="pplr8t-x-x-90">and a list beginning with any other character. In the second part of the question, write a function</span>
<span 
class="fvmr8t-x-x-81">calm_char </span><span 
class="pplr8t-x-x-90">which processes a single character. You can then use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to define a new version of</span>
<span 
class="fvmr8t-x-x-81">calm</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7387--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22800016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7388--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is the same process as Question 1.</span>
<!--l. 7390--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-22900016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7391--><p class="noindent" ><span 
class="pplr8t-x-x-90">Look back at the section on anonymous functions. How can </span><span 
class="fvmr8t-x-x-81">clip </span><span 
class="pplr8t-x-x-90">be expressed as an anonymous function? So,</span>
<span 
class="pplr8t-x-x-90">how can we use it with </span><span 
class="fvmr8t-x-x-81">map</span><span 
class="pplr8t-x-x-90">?</span>
<!--l. 7393--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23000016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7394--><p class="noindent" ><span 
class="pplr8t-x-x-90">We want a function of the form </span><span 
class="fvmb8t-x-x-81">let rec </span><span 
class="fvmr8t-x-x-81">apply f n x =</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;which applies </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">to </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">a total of </span><span 
class="fvmr8t-x-x-81">n </span><span 
class="pplr8t-x-x-90">times. What is the</span>
<span 
class="pplr8t-x-x-90">base case? What do we do in that case? What otherwise?</span>
<!--l. 7396--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23100016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7397--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will need to add the extra function as an argument to both </span><span 
class="fvmr8t-x-x-81">insert </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">and use it in place of the </span><span 
class="fvmr8t-x-x-81"><=</span>
<span 
class="pplr8t-x-x-90">operator in </span><span 
class="fvmr8t-x-x-81">insert</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7399--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23200016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7400--><p class="noindent" ><span 
class="pplr8t-x-x-90">There are three possibilities: the argument list is empty, </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">is returned when its head is given to the function </span><span 
class="fvmr8t-x-x-81">f</span><span 
class="pplr8t-x-x-90">,</span>
<span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">is returned when its head is given to the function </span><span 
class="fvmr8t-x-x-81">f</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7402--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23300016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7403--><p class="noindent" ><span 
class="pplr8t-x-x-90">If the input list is empty, the result is trivially true &#8211; there cannot possibly be any elements for which the function</span>
<span 
class="pplr8t-x-x-90">does not hold. If not, it must hold for the first one, and for all the others by recursion.</span>
<!--l. 7405--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23400016"></a><span 
class="pplr8t-x-x-90">8</span></h4>
<!--l. 7406--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">on each </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="pplr8t-x-x-90">in the </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list</span><span 
class="pplr8t-x-x-90">.</span>
                                                                               
                                                                               
<!--l. 7408--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-23500016"></a><span 
class="pplr8t-x-x-90">7</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">When Things Go Wrong</span></h3>
<!--l. 7410--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23600016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7411--><p class="noindent" ><span 
class="pplr8t-x-x-90">Make sure to consider the case of the empty list, where there is no smallest positive element, and also the</span>
<span 
class="pplr8t-x-x-90">non-empty list containing entirely zero or negative numbers.</span>
<!--l. 7413--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23700016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7414--><p class="noindent" ><span 
class="pplr8t-x-x-90">Just put an exception handler around the function in the previous question.</span>
<!--l. 7416--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23800016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7417--><p class="noindent" ><span 
class="pplr8t-x-x-90">First, write a function to find the number less than or equal to the square root of its argument. Now, define a</span>
<span 
class="pplr8t-x-x-90">suitable exception, and wrap up your function in another which, on a bad argument, raises the exception or</span>
<span 
class="pplr8t-x-x-90">otherwise calls your first function.</span>
<!--l. 7419--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-23900016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7420--><p class="noindent" ><span 
class="pplr8t-x-x-90">Use the </span><span 
class="fvmb8t-x-x-81">try</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;</span><span 
class="fvmb8t-x-x-81">with </span><span 
class="pplr8t-x-x-90">construct to call your function and handle the exception you defined.</span>
<!--l. 7422--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-24000016"></a><span 
class="pplr8t-x-x-90">8</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Looking Things Up</span></h3>
<!--l. 7423--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24100016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7424--><p class="noindent" ><span 
class="pplr8t-x-x-90">The keys in a dictionary are unique &#8211; does remembering that fact help you?</span>
<!--l. 7426--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24200016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7427--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type will be the same as for the </span><span 
class="fvmr8t-x-x-81">add </span><span 
class="pplr8t-x-x-90">function, but we only replace something if we find it there &#8211; when do we</span>
<span 
class="pplr8t-x-x-90">know we will not find it?</span>
                                                                               
                                                                               
<!--l. 7429--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24300016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7430--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function takes a list of keys and a list of values, and returns a dictionary. So it will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span>
<span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplr8t-x-x-90">(</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. Try matching on both lists at once &#8211; what are the cases?</span>
<!--l. 7432--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24400016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7433--><p class="noindent" ><span 
class="pplr8t-x-x-90">This function takes a list of pairs and produces a pair of lists. So its type must be (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span>
<span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7435--><p class="indent" >   <span 
class="pplr8t-x-x-90">For the base case (the empty dictionary), we can see that the result should be </span><span 
class="fvmr8t-x-x-81">([], [])</span><span 
class="pplr8t-x-x-90">. But what to do in the</span>
<span 
class="pplr8t-x-x-90">case we have </span><span 
class="fvmr8t-x-x-81">(k, v) ::more</span><span 
class="pplr8t-x-x-90">? We must get names for the two parts of the result of our function on </span><span 
class="fvmr8t-x-x-81">more</span><span 
class="pplr8t-x-x-90">, and</span>
<span 
class="pplr8t-x-x-90">then cons </span><span 
class="fvmr8t-x-x-81">k </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">v </span><span 
class="pplr8t-x-x-90">on to them &#8211; can you think of how to do that?</span>
<!--l. 7437--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24500016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7438--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can keep a list of the keys which have already been seen, and use the </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">function to make sure you do</span>
<span 
class="pplr8t-x-x-90">not add to the result list a key-value pair whose key has already been included.</span>
<!--l. 7440--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24600016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7441--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will take two dictionaries, and return another &#8211; so you should be able to write down its type</span>
<span 
class="pplr8t-x-x-90">easily.</span>
<!--l. 7443--><p class="indent" >   <span 
class="pplr8t-x-x-90">Try pattern matching on the first list &#8211; when it is empty, the answer is trivial &#8211; what about when it has a head</span>
<span 
class="pplr8t-x-x-90">and a tail?</span>
<!--l. 7445--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-24700016"></a><span 
class="pplr8t-x-x-90">9</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">More with Functions</span></h3>
<!--l. 7447--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24800016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7448--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try building a list of booleans, each representing the result of </span><span 
class="fvmr8t-x-x-81">member </span><span 
class="pplr8t-x-x-90">on a list.</span>
<!--l. 7450--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-24900016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7451--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">/ </span><span 
class="pplr8t-x-x-90">operator differs from the </span><span 
class="fvmr8t-x-x-81">* </span><span 
class="pplr8t-x-x-90">operator in an important sense. What is it?</span>
                                                                               
                                                                               
<!--l. 7453--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25000016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7454--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type of </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">is (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list</span><span 
class="pplr8t-x-x-90">. The type of </span><span 
class="fvmr8t-x-x-81">mapl </span><span 
class="pplr8t-x-x-90">is (</span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2;</span><span 
class="pplr8t-x-x-90">) </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplb8t-x-x-90">list list </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B2; </span><span 
class="pplb8t-x-x-90">list list</span><span 
class="pplr8t-x-x-90">. So, what must</span>
<span 
class="pplr8t-x-x-90">the type of </span><span 
class="fvmr8t-x-x-81">mapll </span><span 
class="pplr8t-x-x-90">be? Now, look at our definition of </span><span 
class="fvmr8t-x-x-81">mapl </span><span 
class="pplr8t-x-x-90">&#8211; how can we extend it to lists of lists of</span>
<span 
class="pplr8t-x-x-90">lists?</span>
<!--l. 7456--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25100016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7457--><p class="noindent" ><span 
class="pplr8t-x-x-90">Use our revised </span><span 
class="fvmr8t-x-x-81">take </span><span 
class="pplr8t-x-x-90">function to process a single list. You may then use </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">with this (partially applied) function</span>
<span 
class="pplr8t-x-x-90">to build the </span><span 
class="fvmr8t-x-x-81">truncate </span><span 
class="pplr8t-x-x-90">function.</span>
<!--l. 7459--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25200016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7460--><p class="noindent" ><span 
class="pplr8t-x-x-90">Build a function </span><span 
class="fvmr8t-x-x-81">firstelt </span><span 
class="pplr8t-x-x-90">which, given the number and a list, returns the first element or that number.</span>
<span 
class="pplr8t-x-x-90">You can then use this function (partially applied) together with </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">to build the main </span><span 
class="fvmr8t-x-x-81">firstelts</span>
<span 
class="pplr8t-x-x-90">function.</span>
<!--l. 7462--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-25300016"></a><span 
class="pplr8t-x-x-90">10</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">New Kinds of Data</span></h3>
<!--l. 7463--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25400016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7464--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type will have two constructors: one for squares, requiring only a single integer, and one for rectangles,</span>
<span 
class="pplr8t-x-x-90">requiring two: one for the width and one for the height.</span>
<!--l. 7466--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25500016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7467--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type rect </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. Work by pattern matching on the two constructors of your</span>
<span 
class="pplr8t-x-x-90">type.</span>
<!--l. 7469--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25600016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7470--><p class="noindent" ><span 
class="pplr8t-x-x-90">Work by pattern matching on your type. What happens to a square. What to a rectangle?</span>
                                                                               
                                                                               
<!--l. 7472--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25700016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7473--><p class="noindent" ><span 
class="pplr8t-x-x-90">First, we need to rotate the rectangles as needed &#8211; you have already written something for this. Then, we need to</span>
<span 
class="pplr8t-x-x-90">sort them according to width. Can you use our </span><span 
class="fvmr8t-x-x-81">sort </span><span 
class="pplr8t-x-x-90">function which takes a custom comparison function for</span>
<span 
class="pplr8t-x-x-90">this?</span>
<!--l. 7475--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25800016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7476--><p class="noindent" ><span 
class="pplr8t-x-x-90">Look at how we re-wrote </span><span 
class="fvmr8t-x-x-81">length </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">append </span><span 
class="pplr8t-x-x-90">for the sequence type.</span>
<!--l. 7478--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-25900016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7479--><p class="noindent" ><span 
class="pplr8t-x-x-90">Add another constructor, and amend </span><span 
class="fvmr8t-x-x-81">evaluate </span><span 
class="pplr8t-x-x-90">as necessary.</span>
<!--l. 7481--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26000016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7482--><p class="noindent" ><span 
class="pplr8t-x-x-90">Handle the exception, and return </span><span 
class="fvmr8t-x-x-81">None </span><span 
class="pplr8t-x-x-90">in that case.</span>
<!--l. 7499--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-26100016"></a><span 
class="pplr8t-x-x-90">11</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Growing Trees</span></h3>
<!--l. 7501--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26200016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7502--><p class="noindent" ><span 
class="pplr8t-x-x-90">The type will be </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">bool</span><span 
class="pplr8t-x-x-90">. That is, it takes an element to search for, and a tree containing elements of</span>
<span 
class="pplr8t-x-x-90">the same type, and returns </span><span 
class="fvmr8t-x-x-81">true </span><span 
class="pplr8t-x-x-90">if the element is found, and </span><span 
class="fvmr8t-x-x-81">false </span><span 
class="pplr8t-x-x-90">if not. What happens if the tree is a leaf? What</span>
<span 
class="pplr8t-x-x-90">if it is a branch?</span>
<!--l. 7504--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26300016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7505--><p class="noindent" ><span 
class="pplr8t-x-x-90">The function will have type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="pplr8t-x-x-90">tree. What happens to a leaf? What must happen to a branch and its</span>
<span 
class="pplr8t-x-x-90">sub-trees?</span>
<!--l. 7507--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26400016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7508--><p class="noindent" ><span 
class="pplr8t-x-x-90">If the two trees are both </span><span 
class="fvmr8t-x-x-81">Lf</span><span 
class="pplr8t-x-x-90">, they have the same shape. What if they are both branches? What if one is a branch</span>
<span 
class="pplr8t-x-x-90">and the other a leaf or vice versa?</span>
                                                                               
                                                                               
<!--l. 7511--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26500016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7512--><p class="noindent" ><span 
class="pplr8t-x-x-90">We have already written a function for inserting an element into an existing tree.</span>
<!--l. 7514--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26600016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7515--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try using list dictionaries as an intermediate representation. We already know how to build a tree from a</span>
<span 
class="pplr8t-x-x-90">list.</span>
<!--l. 7517--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26700016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7518--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider using a list of sub-trees for a branch. How can we represent a branch which has no sub-trees?</span>
<!--l. 7520--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-26800016"></a><span 
class="pplr8t-x-x-90">12</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">In and Out</span></h3>
<!--l. 7521--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-26900016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7522--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can use the </span><span 
class="fvmr8t-x-x-81">print_string </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">print_int </span><span 
class="pplr8t-x-x-90">functions. Be careful about what happens when you print the last</span>
<span 
class="pplr8t-x-x-90">number.</span>
<!--l. 7524--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27000016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7525--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can use the </span><span 
class="fvmr8t-x-x-81">read_int </span><span 
class="pplr8t-x-x-90">function to read an integer from the user. Be sure to give the user proper instructions,</span>
<span 
class="pplr8t-x-x-90">and to deal with the case where </span><span 
class="fvmr8t-x-x-81">read_int </span><span 
class="pplr8t-x-x-90">raises an exception (which it will if the user does not type an</span>
<span 
class="pplr8t-x-x-90">integer).</span>
<!--l. 7527--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27100016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7528--><p class="noindent" ><span 
class="pplr8t-x-x-90">One way would be to ask the user how many dictionary entries they intend to type in first. Then we do not need</span>
<span 
class="pplr8t-x-x-90">a special code to signal the end of input.</span>
<!--l. 7530--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27200016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7531--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try writing a function to build a list of integers from </span><span 
class="zptmcm7t-x-x-90">1 </span><span 
class="pplr8t-x-x-90">to </span><span 
class="zptmcm7m-x-x-90">n</span><span 
class="pplr8t-x-x-90">. Can you use that to build the table and print it? The</span>
<span 
class="fvmr8t-x-x-81">iter </span><span 
class="pplr8t-x-x-90">and/or </span><span 
class="fvmr8t-x-x-81">map </span><span 
class="pplr8t-x-x-90">functions may come in useful. Deal with a channel in your innermost function &#8211; the opening</span>
<span 
class="pplr8t-x-x-90">and closing of the file can be dealt with elsewhere.</span>
                                                                               
                                                                               
<!--l. 7533--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27300016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7534--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">input_line </span><span 
class="pplr8t-x-x-90">function can be used &#8211; how many times can you call it until </span><span 
class="fvmr8t-x-x-81">End_of_file </span><span 
class="pplr8t-x-x-90">is raised?</span>
<!--l. 7536--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27400016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7537--><p class="noindent" ><span 
class="pplr8t-x-x-90">We can read lines from the file using </span><span 
class="fvmr8t-x-x-81">input_line </span><span 
class="pplr8t-x-x-90">and write using </span><span 
class="fvmr8t-x-x-81">output_string </span><span 
class="pplr8t-x-x-90">&#8211; make sure the newlines do</span>
<span 
class="pplr8t-x-x-90">not get lost! How do we know when we are done? Write a function to copy a line from one channel to another &#8211;</span>
<span 
class="pplr8t-x-x-90">we can deal with opening and closing the files separately.</span>
<!--l. 7539--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-27500016"></a><span 
class="pplr8t-x-x-90">13</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Putting Things in Boxes</span></h3>
<!--l. 7540--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27600016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7541--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the initial values of the references, and then work through how each one is altered by each part of the</span>
<span 
class="pplr8t-x-x-90">expression. What is finally returned as the result of the expression?</span>
<!--l. 7543--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27700016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7544--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try creating a value for each list in OCaml. Now try getting the head of the list, which is a reference, and</span>
<span 
class="pplr8t-x-x-90">updating its contents to another integer. What has happened in each case?</span>
<!--l. 7546--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27800016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7547--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try writing a function </span><span 
class="fvmr8t-x-x-81">forloop </span><span 
class="pplr8t-x-x-90">which takes a function to be applied to each number, and the start and end</span>
<span 
class="pplr8t-x-x-90">numbers. It should call the given function on each number. What should happen when the start number is larger</span>
<span 
class="pplr8t-x-x-90">than the end number?</span>
<!--l. 7549--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-27900016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7550--><p class="noindent" ><span 
class="pplr8t-x-x-90">Type them in if you are stuck. Can you work out why each expression has the type OCaml prints?</span>
<!--l. 7552--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28000016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7553--><p class="noindent" ><span 
class="pplr8t-x-x-90">We want a function of type </span><span 
class="pplb8t-x-x-90">int array </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">int</span><span 
class="pplr8t-x-x-90">. Try a for loop with a reference to accumulate the sum.</span>
                                                                               
                                                                               
<!--l. 7555--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28100016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7556--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider swapping elements from opposite ends of the array &#8211; the problem is symmetric.</span>
<!--l. 7558--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28200016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7559--><p class="noindent" ><span 
class="pplr8t-x-x-90">To build an array of arrays, you will need a use </span><span 
class="fvmr8t-x-x-81">Array.make </span><span 
class="pplr8t-x-x-90">to build an array of empty arrays. You can then set</span>
<span 
class="pplr8t-x-x-90">each of the elements of the main array to a suitably sized array, again created with </span><span 
class="fvmr8t-x-x-81">Array.make</span><span 
class="pplr8t-x-x-90">. Once the</span>
<span 
class="pplr8t-x-x-90">structure is in place, putting the numbers in should be simple.</span>
<!--l. 7561--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28300016"></a><span 
class="pplr8t-x-x-90">8</span></h4>
<!--l. 7562--><p class="noindent" ><span 
class="pplr8t-x-x-90">What is the difference between the codes for </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">a</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">A</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">? What about </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">z</span><span 
class="fvmr8c-x-x-81">' </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8c-x-x-81">'</span><span 
class="fvmr8t-x-x-81">Z</span><span 
class="fvmr8c-x-x-81">'</span><span 
class="pplr8t-x-x-90">?</span>
<!--l. 7564--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-28400016"></a><span 
class="pplr8t-x-x-90">14</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">The Other Numbers</span></h3>
<!--l. 7565--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28500016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7566--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the built-in functions </span><span 
class="fvmr8t-x-x-81">ceil </span><span 
class="pplr8t-x-x-90">and </span><span 
class="fvmr8t-x-x-81">floor</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7568--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28600016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7569--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is simple arithmetic. The function will take two points and return another, so it will have type </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">float</span>
<span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">float </span><span 
class="zptmcm7y-x-x-90">&#x00D7; </span><span 
class="pplb8t-x-x-90">float</span><span 
class="pplr8t-x-x-90">.</span>
<!--l. 7571--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28700016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7572--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider the built-in function </span><span 
class="fvmr8t-x-x-81">floor</span><span 
class="pplr8t-x-x-90">. What should happen in the case of a negative number?</span>
<!--l. 7574--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28800016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7575--><p class="noindent" ><span 
class="pplr8t-x-x-90">Calculate the column number for the asterisk carefully. How can it be printed in the correct column?</span>
                                                                               
                                                                               
<!--l. 7577--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-28900016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7578--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will need to call the </span><span 
class="fvmr8t-x-x-81">star </span><span 
class="pplr8t-x-x-90">function with an appropriate argument at points between the beginning and end of</span>
<span 
class="pplr8t-x-x-90">the range, as determined by the step.</span>
<!--l. 7580--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-29000016"></a><span 
class="pplr8t-x-x-90">15</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">The OCaml Standard Library</span></h3>
<!--l. 7581--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-29100016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7581--><p class="noindent" ><span 
class="pplr8t-x-x-90">You can assume </span><span 
class="fvmr8t-x-x-81">List.rev </span><span 
class="pplr8t-x-x-90">which is tail-recursive.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29200016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7582--><p class="noindent" ><span 
class="pplr8t-x-x-90">You might use </span><span 
class="fvmr8t-x-x-81">List.map </span><span 
class="pplr8t-x-x-90">here, together with </span><span 
class="fvmr8t-x-x-81">List.mem</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29300016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7583--><p class="noindent" ><span 
class="pplr8t-x-x-90">The </span><span 
class="fvmr8t-x-x-81">String.iter </span><span 
class="pplr8t-x-x-90">function should help here.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29400016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7584--><p class="noindent" ><span 
class="pplr8t-x-x-90">Try </span><span 
class="fvmr8t-x-x-81">String.map </span><span 
class="pplr8t-x-x-90">supplying a suitable function.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29500016"></a><span 
class="pplr8t-x-x-90">5</span></h4>
<!--l. 7585--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider </span><span 
class="fvmr8t-x-x-81">String.concat</span><span 
class="pplr8t-x-x-90">.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29600016"></a><span 
class="pplr8t-x-x-90">6</span></h4>
<!--l. 7586--><p class="noindent" ><span 
class="pplr8t-x-x-90">Create a buffer, add all the strings to it in order, and then return its contents.</span>
   <h4 class="likesubsectionHead"><a 
 id="x1-29700016"></a><span 
class="pplr8t-x-x-90">7</span></h4>
<!--l. 7587--><p class="noindent" ><span 
class="fvmr8t-x-x-81">String.sub </span><span 
class="pplr8t-x-x-90">is useful here. You can compare strings with one another for equality, as with any other</span>
<span 
class="pplr8t-x-x-90">type.</span>
<!--l. 7589--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-29800016"></a><span 
class="pplr8t-x-x-90">16</span><br 
class="newline" /><span 
class="pplr8t-x-x-90">Building Bigger Programs</span></h3>
                                                                               
                                                                               
<!--l. 7591--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-29900016"></a><span 
class="pplr8t-x-x-90">1</span></h4>
<!--l. 7592--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will need to alter the </span><span 
class="fvmr8t-x-x-81">Textstat </span><span 
class="pplr8t-x-x-90">module to calculate the histogram and allow it to be accessed through the</span>
<span 
class="pplr8t-x-x-90">module&#8217;s interface. Then, alter the main program to retrieve and print the extra information.</span>
<!--l. 7594--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30000016"></a><span 
class="pplr8t-x-x-90">2</span></h4>
<!--l. 7595--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will need functions to read and write the lines. You can read the required input and output filenames from</span>
<span 
class="fvmr8t-x-x-81">Sys.argv</span><span 
class="pplr8t-x-x-90">. What should we do in case of an error, e.g. a bad filename?</span>
<!--l. 7597--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30100016"></a><span 
class="pplr8t-x-x-90">3</span></h4>
<!--l. 7598--><p class="noindent" ><span 
class="pplr8t-x-x-90">Consider doing something a very large number of times. You should avoid printing information to the screen,</span>
<span 
class="pplr8t-x-x-90">because the printing speed might dominate, and the differing computation speeds may be hard to</span>
<span 
class="pplr8t-x-x-90">notice.</span>
<!--l. 7600--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30200016"></a><span 
class="pplr8t-x-x-90">4</span></h4>
<!--l. 7601--><p class="noindent" ><span 
class="pplr8t-x-x-90">Start with a function to search for a given string inside another. You might find some functions from the </span><span 
class="fvmr8t-x-x-81">String</span>
<span 
class="pplr8t-x-x-90">module in the OCaml Standard Library to be useful, or you can write it from first principles. Once this is done,</span>
<span 
class="pplr8t-x-x-90">the rest is simple.</span>
                                                                               
                                                                               
                                                                               
                                                                               
<!--l. 7604--><p class="indent" >
                                                                               
                                                                               
   <h2 class="chapterHead"><a 
 id="x1-30300016"></a><span 
class="pplr8t-x-x-90">Coping with Errors</span></h2>
<!--l. 7605--><p class="noindent" ><span 
class="pplr8t-x-x-90">It is very hard to write even small programs correctly the first time. An unfortunate but inevitable part of</span>
<span 
class="pplr8t-x-x-90">programming is the location and fixing of mistakes. OCaml has a range of messages to help you with this</span>
<span 
class="pplr8t-x-x-90">process.</span>
<!--l. 7607--><p class="indent" >   <span 
class="pplr8t-x-x-90">Here are descriptions of the common messages OCaml prints when a program cannot be accepted or when</span>
<span 
class="pplr8t-x-x-90">running it causes a problem (a so-called &#8220;run-time error&#8221;). We also describe warnings OCaml prints to</span>
<span 
class="pplr8t-x-x-90">alert the programmer to a program which, though it can be accepted for evaluation, might contain</span>
<span 
class="pplr8t-x-x-90">mistakes.</span>
   <h3 class="likesectionHead"><a 
 id="x1-30400016"></a><span 
class="pplrc8t-x-x-90">E<span 
class="small-caps">R</span><span 
class="small-caps">R</span><span 
class="small-caps">O</span><span 
class="small-caps">R</span><span 
class="small-caps">S</span></span></h3>
<!--l. 7611--><p class="noindent" ><span 
class="pplr8t-x-x-90">These are messages printed when an expression could not be accepted for evaluation, due to being malformed in</span>
<span 
class="pplr8t-x-x-90">some way. No evaluation is attempted. You must fix the expression and try again.</span>
<!--l. 7613--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30500016"></a><span 
class="pplr8t-x-x-90">Syntax error</span></h4>
<!--l. 7615--><p class="noindent" ><span 
class="pplr8t-x-x-90">This error occurs when OCaml finds that the program text contains things which are not valid words (such as </span><span 
class="fvmb8t-x-x-81">if</span><span 
class="pplr8t-x-x-90">,</span>
<span 
class="fvmb8t-x-x-81">let </span><span 
class="pplr8t-x-x-90">etc.) or other basic parts of the language, or when they exist in invalid combinations &#8211; this is known as</span>
<span 
class="pplri8t-x-x-90">syntax</span><span 
class="pplr8t-x-x-90">. Check carefully and try again.</span>
<!--l. 7618--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81">#1 +</span><span class="underline"><span 
class="fvmr8t-x-x-81">;;</span></span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;syntax</span><span 
class="fvmr8t-x-x-81">&#x00A0;error</span></span></span>
<!--l. 7624--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml has underlined where it thinks the error is. Since this error occurs for a wide range of different mistakes</span>
<span 
class="pplr8t-x-x-90">and problems, the underlining may not pinpoint the exact position of your mistake.</span>
<!--l. 7626--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30600016"></a><span 
class="pplr8t-x-x-90">Unbound value </span><span 
class="pplr8t-x-x-90">&#x2026;</span></h4>
<!--l. 7628--><p class="noindent" ><span 
class="pplr8t-x-x-90">This error occurs when you have mentioned a name which has not been defined (technically &#8220;bound to a value&#8221;).</span>
<span 
class="pplr8t-x-x-90">This might happen if you have mistyped the name.</span>
<!--l. 7631--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">x</span></span> <span 
class="fvmr8t-x-x-81">+ 1;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Unbound value x</span>
<!--l. 7637--><p class="noindent" ><span 
class="pplr8t-x-x-90">In our example </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="pplr8t-x-x-90">is not defined, so it has been underlined.</span>
<!--l. 7639--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30700016"></a><span 
class="pplr8t-x-x-90">This expression has type </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;but an expression was expected of type </span><span 
class="pplr8t-x-x-90">&#x2026;</span></h4>
<!--l. 7641--><p class="noindent" ><span 
class="pplr8t-x-x-90">You will see this error very frequently. It occurs when the expression&#8217;s syntax is correct (i.e. it is made up of valid</span>
<span 
class="pplr8t-x-x-90">words and constructs), and OCaml has moved on to type-checking the expression prior to evaluation. If there is a</span>
<span 
class="pplr8t-x-x-90">problem with type-checking, OCaml shows you where a mismatch between the expected and actual type</span>
<span 
class="pplr8t-x-x-90">occurred.</span>
                                                                               
                                                                               
<!--l. 7644--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># 1 + </span><span class="underline"><span 
class="fvmr8t-x-x-81">true</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;This expression has type bool but an expression was expected of type</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span></span></span><span 
class="fvmr8t-x-x-81">int</span>
<!--l. 7651--><p class="noindent" ><span 
class="pplr8t-x-x-90">In this example, OCaml is looking for an integer on the right hand side of the </span><span 
class="fvmr8t-x-x-81">+ </span><span 
class="pplr8t-x-x-90">operator, and finds something of</span>
<span 
class="pplr8t-x-x-90">type </span><span 
class="pplb8t-x-x-90">bool </span><span 
class="pplr8t-x-x-90">instead.</span>
<!--l. 7653--><p class="indent" >   <span 
class="pplr8t-x-x-90">It is not always as easy to spot the real source of the problem, especially if the function is recursive.</span>
<span 
class="pplr8t-x-x-90">Nevertheless, a careful look at the program will often shine light on the problem &#8211; look at each function and its</span>
<span 
class="pplr8t-x-x-90">arguments, and try to find your mistake.</span>
<!--l. 7655--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30800016"></a><span 
class="pplr8t-x-x-90">This function is applied to too many arguments</span></h4>
<!--l. 7657--><p class="noindent" ><span 
class="pplr8t-x-x-90">Exactly what it says. The function name is underlined.</span>
<!--l. 7660--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># let f x = x + 1;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val f :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int -> int = <fun></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">f</span></span> <span 
class="fvmr8t-x-x-81">x y;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;This function is applied to too many arguments;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">maybe you forgot a </span><span class="obeylines-h"><span class="verb"><span 
class="fvmr8c-x-x-81">`</span><span 
class="fvmr8t-x-x-81">;</span><span 
class="fvmr8c-x-x-81">'</span></span></span>
<!--l. 7669--><p class="noindent" ><span 
class="pplr8t-x-x-90">The phrase &#8220;maybe you forgot a &#8216;;&#8217; &#8221; applies to imperative programs where accidently missing out a &#8216;;&#8217; between</span>
<span 
class="pplr8t-x-x-90">successive function applications might commonly lead to this error.</span>
<!--l. 7671--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-30900016"></a><span 
class="pplr8t-x-x-90">Unbound constructor </span><span 
class="pplr8t-x-x-90">&#x2026;</span></h4>
<!--l. 7673--><p class="noindent" ><span 
class="pplr8t-x-x-90">This occurs when a constructor name is used which is not defined.</span>
<!--l. 7676--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># type t = Roof | Wall | Floor;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">type t = Roof | Wall | Floor</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">Window</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Unbound constructor Window</span>
<!--l. 7684--><p class="noindent" ><span 
class="pplr8t-x-x-90">OCaml knows it is a constructor name because it has an initial capital letter.</span>
<!--l. 7686--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31000016"></a><span 
class="pplr8t-x-x-90">The constructor </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;expects </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;argument(s), but is applied here to </span><span 
class="pplr8t-x-x-90">&#x2026;</span><span 
class="pplr8t-x-x-90">&#x00A0;argument(s)</span></h4>
<!--l. 7688--><p class="noindent" ><span 
class="pplr8t-x-x-90">This error occurs when the wrong kind of data is given to a constructor for a type. It is just another type error, but</span>
<span 
class="pplr8t-x-x-90">we get a specialised message.</span>
<!--l. 7691--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># type p = A of int | B of bool;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">type p = A of int | B of bool</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># A;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Error:</span><span 
class="fvmr8t-x-x-81">&#x00A0;The constructor A expects 1 argument(s),</span><br 
class="newline" /><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span></span></span><span 
class="fvmr8t-x-x-81">but is applied here to 0 argument(s)</span>
<!--l. 7700--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-31100016"></a><span 
class="pplrc8t-x-x-90">R<span 
class="small-caps">U</span><span 
class="small-caps">N</span>-<span 
class="small-caps">T</span><span 
class="small-caps">I</span><span 
class="small-caps">M</span><span 
class="small-caps">E</span> E<span 
class="small-caps">R</span><span 
class="small-caps">R</span><span 
class="small-caps">O</span><span 
class="small-caps">R</span><span 
class="small-caps">S</span></span></h3>
<!--l. 7702--><p class="noindent" ><span 
class="pplr8t-x-x-90">In any programming language powerful enough to be of use, some errors cannot be detected before attempting</span>
<span 
class="pplr8t-x-x-90">evaluation of an expression (until &#8220;run-time&#8221;). The exception mechanism is for handling and recovering from</span>
<span 
class="pplr8t-x-x-90">these kinds of problems.</span>
<!--l. 7704--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31200016"></a><span 
class="pplr8t-x-x-90">Stack overflow during evaluation (looping recursion?)</span></h4>
<!--l. 7706--><p class="noindent" ><span 
class="pplr8t-x-x-90">This occurs if the function builds up a working expression which is too big. This might occur if</span>
<span 
class="pplr8t-x-x-90">the function is never going to stop because of a programming error, or if the argument is just too</span>
<span 
class="pplr8t-x-x-90">big.</span>
<!--l. 7709--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># let rec f x = 1 + f (x + 1);;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val f :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int -> int = <fun></span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># f 0;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Stack overflow during evaluation (looping recursion?).</span>
<!--l. 7717--><p class="noindent" ><span 
class="pplr8t-x-x-90">Find the cause of the unbounded recursion, and try again. If it is really not a mistake, rewrite the function to use</span>
<span 
class="pplr8t-x-x-90">an accumulating argument (and so, to be tail recursive).</span>
<!--l. 7719--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31300016"></a><span 
class="pplr8t-x-x-90">Exception: Match_failure </span><span 
class="pplr8t-x-x-90">&#x2026;</span></h4>
<!--l. 7721--><p class="noindent" ><span 
class="pplr8t-x-x-90">This occurs when a pattern match cannot find anything to match against. You would have been warned about</span>
<span 
class="pplr8t-x-x-90">this possibility when the program was originally entered. For example, if the following function </span><span 
class="fvmr8t-x-x-81">f </span><span 
class="pplr8t-x-x-90">were defined</span>
<span 
class="pplr8t-x-x-90">as</span>
<!--l. 7724--><p class="indent" >   <span 
class="fvmb8t-x-x-81">let </span><span 
class="fvmr8t-x-x-81">f x = </span><span 
class="fvmb8t-x-x-81">match </span><span 
class="fvmr8t-x-x-81">x </span><span 
class="fvmb8t-x-x-81">with </span><span 
class="fvmr8t-x-x-81">0 -> 1</span>
<!--l. 7727--><p class="noindent" ><span 
class="pplr8t-x-x-90">then using the function with </span><span 
class="fvmr8t-x-x-81">1 </span><span 
class="pplr8t-x-x-90">as an argument would produce:</span>
<!--l. 7730--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># f 1;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Match_failure ("//toplevel//", 1, 10).</span>
                                                                               
                                                                               
<!--l. 7736--><p class="noindent" ><span 
class="pplr8t-x-x-90">In this example, the match failure occurred in the top level (i.e. the interactive OCaml we are using), at line one,</span>
<span 
class="pplr8t-x-x-90">character ten.</span>
<!--l. 7738--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31400016"></a><span 
class="pplr8t-x-x-90">Exception: </span><span 
class="pplr8t-x-x-90">&#x2026;</span></h4>
<!--l. 7740--><p class="noindent" ><span 
class="pplr8t-x-x-90">This is printed if an un-handled exception reaches OCaml.</span>
<!--l. 7743--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># exception Exp of string;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">exception Exp of string</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># raise (Exp "Failed");;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Exception:</span><span 
class="fvmr8t-x-x-81">&#x00A0;Exp "Failed".</span>
<!--l. 7751--><p class="noindent" ><span 
class="pplr8t-x-x-90">This can occur for built-in exceptions like </span><span 
class="fvmr8t-x-x-81">Division_by_Zero </span><span 
class="pplr8t-x-x-90">or </span><span 
class="fvmr8t-x-x-81">Not_found </span><span 
class="pplr8t-x-x-90">or ones the user has defined like </span><span 
class="fvmr8t-x-x-81">Exp</span>
<span 
class="pplr8t-x-x-90">above.</span>
<!--l. 7753--><p class="noindent" >
   <h3 class="likesectionHead"><a 
 id="x1-31500016"></a><span 
class="pplrc8t-x-x-90">W<span 
class="small-caps">A</span><span 
class="small-caps">R</span><span 
class="small-caps">N</span><span 
class="small-caps">I</span><span 
class="small-caps">N</span><span 
class="small-caps">G</span><span 
class="small-caps">S</span></span></h3>
<!--l. 7755--><p class="noindent" ><span 
class="pplr8t-x-x-90">Warnings do not stop an expression being accepted or evaluated. They are printed after an expression is accepted</span>
<span 
class="pplr8t-x-x-90">but before the expression is evaluated. Warnings are for occasions where OCaml is concerned you may have</span>
<span 
class="pplr8t-x-x-90">made a mistake, even though the expression is not actually malformed. You should check each new warning in a</span>
<span 
class="pplr8t-x-x-90">program carefully.</span>
<!--l. 7757--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31600016"></a><span 
class="pplr8t-x-x-90">This pattern-matching is not exhaustive</span></h4>
<!--l. 7759--><p class="noindent" ><span 
class="pplr8t-x-x-90">This warning is printed when OCaml has determined that you have missed out one or more cases in a pattern</span>
<span 
class="pplr8t-x-x-90">match. This could result in a </span><span 
class="fvmr8t-x-x-81">Match_failure </span><span 
class="pplr8t-x-x-90">exception being raised at run-time.</span>
<!--l. 7762--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># let f x = </span><span class="underline"><span 
class="fvmr8t-x-x-81">match x with 0 -> 1</span></span><span 
class="fvmr8t-x-x-81">;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Warning 8:</span><span 
class="fvmr8t-x-x-81">&#x00A0;this pattern-matching is not exhaustive.</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Here is an example of a value that is not matched:</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">1</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val f :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int -> int = <fun></span>
<!--l. 7771--><p class="noindent" ><span 
class="pplr8t-x-x-90">Helpfully, it is able to generate an example of something the pattern match does not cover, so this should give</span>
<span 
class="pplr8t-x-x-90">you a hint about what has been missed out. You may ignore the warning if you&#8217;re sure that, for other reasons,</span>
<span 
class="pplr8t-x-x-90">this case can never occur.</span>
<!--l. 7773--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31700016"></a><span 
class="pplr8t-x-x-90">This match case is unused</span></h4>
                                                                               
                                                                               
<!--l. 7775--><p class="noindent" ><span 
class="pplr8t-x-x-90">This occurs when two parts of the pattern match cover the same case. In this situation, the second one could</span>
<span 
class="pplr8t-x-x-90">never be reached, so it is almost certain the programmer has made a mistake.</span>
<!--l. 7778--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># let f x = match x with _ -> 1 | </span><span class="underline"><span 
class="fvmr8t-x-x-81">0</span></span> <span 
class="fvmr8t-x-x-81">-> 0;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Warning 11:</span><span 
class="fvmr8t-x-x-81">&#x00A0;this match case is unused.</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">val f :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int -> int = <fun></span>
<!--l. 7785--><p class="noindent" ><span 
class="pplr8t-x-x-90">In this case, the first case matches everything, so the second cannot ever match.</span>
<!--l. 7787--><p class="noindent" >
   <h4 class="likesubsectionHead"><a 
 id="x1-31800016"></a><span 
class="pplr8t-x-x-90">This expression should have type unit</span></h4>
<!--l. 7789--><p class="noindent" ><span 
class="pplr8t-x-x-90">Sometimes when writing imperative programs, we ignore the result of some side-effect-producing function.</span>
<span 
class="pplr8t-x-x-90">However, this can indicate a mistake.</span>
<!--l. 7792--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">f 1</span></span><span 
class="fvmr8t-x-x-81">; 2;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">Warning 10:</span><span 
class="fvmr8t-x-x-81">&#x00A0;this expression should have type unit.</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 2</span>
<!--l. 7799--><p class="noindent" ><span 
class="pplr8t-x-x-90">It is better to use the built-in </span><span 
class="fvmr8t-x-x-81">ignore </span><span 
class="pplr8t-x-x-90">function in these cases, to avoid this warning:</span>
<!--l. 7802--><p class="noindent" ><span class="obeylines-h"><span class="verb"><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;</span><span 
class="fvmr8t-x-x-81">&#x00A0;OCaml</span></span></span><br 
class="newline" /><br 
class="newline" /><span 
class="fvmr8t-x-x-81"># </span><span class="underline"><span 
class="fvmr8t-x-x-81">ignore (f 1)</span></span><span 
class="fvmr8t-x-x-81">; 2;;</span><br 
class="newline" /><span 
class="fvmr8t-x-x-81">- :</span><span 
class="fvmr8t-x-x-81">&#x00A0;int = 2</span>
<!--l. 7808--><p class="noindent" ><span 
class="pplr8t-x-x-90">The ignore function has type </span><span 
class="zptmcm7m-x-x-90">&#x03B1; </span><span 
class="zptmcm7y-x-x-90">&#x2192; </span><span 
class="pplb8t-x-x-90">unit</span><span 
class="pplr8t-x-x-90">. It has no side-effect.</span>
<a 
 id="Q1-1-329"></a>
    
</body></html> 

                                                                               
                                                                               
                                                                               


